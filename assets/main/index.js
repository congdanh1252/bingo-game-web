System.register("chunks:///_virtual/AuthenticationPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./UIBase.ts","./StaticInstance.ts","./index.ts"],(function(e){"use strict";var t,n,r,i,o,a,s,l,c,u,p,d,g,h,f,m,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.Node,u=e.Label,p=e.director,d=e.math},function(e){g=e.Utils},function(e){h=e.UIBase},function(e){f=e.StaticInstance},function(e){m=e.signIn,v=e.signUp}],execute:function(){var y,w,T,x,b,S,_,U,B,E,L,k,I;s._RF.push({},"7209djwfRJO2pc352Lvvcp6","AuthenticationPanel",void 0);var C=l.ccclass,A=l.property;e("AuthenticationPanel",(y=C("AuthenticationPanel"),w=A({type:c}),T=A({type:c}),x=A({type:c}),b=A({type:c}),S=A({type:u}),y((B=t((U=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"loginButton",B,i(t)),r(t,"signUpButton",E,i(t)),r(t,"emailField",L,i(t)),r(t,"passwordField",k,i(t)),r(t,"errorText",I,i(t)),t._uiManager=void 0,t._password=void 0,t._email="",t}n(t,e);var s=t.prototype;return s.onLoad=function(){e.prototype.onLoad.call(this),this.errorText.string="",p.preloadScene("start",(function(){return console.log("START SCENE PRELOADED!")}))},s.show=function(){e.prototype.show.call(this)},s.hide=function(){e.prototype.hide.call(this)},s.init=function(e){this._uiManager=e},s.onLoginButtonClick=function(){var e=this;console.log("Login clicked!");var t=this._password,n=this.emailField.getChildByName("EditBox").getChildByName("TEXT_LABEL").getComponent(u).string;this.validateInput(n,t)&&(this._email=n,f.authUIManager.showLoadingOverlay(),m(n,t).then(o(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(n),null!=n&&n.access_token?(e.errorText.string="Success",e.errorText.color=d.color("#1dc35d"),e._uiManager.navigateStartScreen()):(null!=n&&n.error&&(e.errorText.string=n.error),f.authUIManager.closeLoadingOverlay());case 2:case"end":return t.stop()}}),t)})))).catch((function(t){e.errorText.string=(null==t?void 0:t.toString())||""})))},s.onPasswordChange=function(e){this._password=e},s.onSignUpButtonClick=function(){var e=this;console.log("Register clicked!");var t=this._password,n=this.emailField.getChildByName("EditBox").getChildByName("TEXT_LABEL").getComponent(u).string;this.validateInput(n,t)&&(this._email=n,f.authUIManager.showLoadingOverlay(),v(n,t).then(o(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(n),null!=n&&n.access_token?(e.errorText.string="Success",e.errorText.color=d.color("#1dc35d"),e._uiManager.navigateStartScreen()):(null!=n&&n.error&&(e.errorText.string=n.error),f.authUIManager.closeLoadingOverlay());case 2:case"end":return t.stop()}}),t)})))).catch((function(t){e.errorText.string=(null==t?void 0:t.toString())||""})))},s.validateInput=function(e,t){return e&&t?g.validateEmail(e)?!e.toLowerCase().includes("@demo")||(this.errorText.string="Email with @demo is invalid!",!1):(console.log("invalid email"),this.errorText.string="Invalid email format!",!1):(console.log("missing field!"),this.errorText.string="Please fill in both fields!",!1)},s.writeUserInfoToDatabase=function(e,t){var n={id:e,name:"",email:t,balance:200};f.nakamaClient.writeStorageObject("user",e,n,1).then((function(){f.currentUser=n}))},s.checkUserDataObjectExist=function(){var e=o(a().mark((function e(t){var n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.nakamaClient.readStorageObject("user",t,t).then(o(a().mark((function e(r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r&&r.length>0)){e.next=7;break}console.log("-- GET USER DATA: data exists --"),o=JSON.parse(JSON.stringify(null==(i=r[0])?void 0:i.value)),f.currentUser=o,f.nakamaClient.updateBalanceFromWallet(),e.next=10;break;case 7:return console.log("-- GET USER DATA ERROR: no data --"),e.next=10,n.writeUserInfoToDatabase(t,n._email);case 10:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}(h)).prototype,"loginButton",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),E=t(U.prototype,"signUpButton",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),L=t(U.prototype,"emailField",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),k=t(U.prototype,"passwordField",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),I=t(U.prototype,"errorText",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),_=U))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/BalanceTab.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StaticInstance.ts","./UIBase.ts"],(function(t){"use strict";var e,n,i,a,r,o,c,l,s,u,p,b,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.createClass,o=t.asyncToGenerator,c=t.regeneratorRuntime},function(t){l=t.cclegacy,s=t._decorator,u=t.Label,p=t.Node},function(t){b=t.StaticInstance},function(t){f=t.UIBase}],execute:function(){var h,y,d,g,B,m,v,w,S,k,C;l._RF.push({},"b0b148gyHVDC5V2hMCNAfto","BalanceTab",void 0);var M=s.ccclass,_=s.property;t("BalanceTab",(h=M("BalanceTab"),y=_({type:u}),d=_({type:p}),g=_({type:p}),B=_({type:p}),h((w=e((v=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,i(e,"balanceLabel",w,a(e)),i(e,"closeButton",S,a(e)),i(e,"depositButton",k,a(e)),i(e,"withdrawButton",C,a(e)),e._isFromStartMenu=void 0,e}n(e,t);var l=e.prototype;return l.init=function(){var t=o(c().mark((function t(){var e,n,i;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.balanceLabel.string=(null==(e=b.mainGameManager)||null==(n=e.balance)?void 0:n.toString())||(null==(i=b.currentUser)?void 0:i.balance.toString());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),l.onCloseButtonClick=function(){this._isFromStartMenu&&(b.startUIManager.balanceTabCloseCallback(),this._isFromStartMenu=void 0),t.prototype.hide.call(this)},l.onDepositButtonClick=function(){console.log("Deposit clicked!")},l.onWithdrawButtonClick=function(){console.log("Withdraw clicked!")},r(e,[{key:"isFromStartMenu",set:function(t){this._isFromStartMenu=t}}]),e}(f)).prototype,"balanceLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),S=e(v.prototype,"closeButton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),k=e(v.prototype,"depositButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),C=e(v.prototype,"withdrawButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),m=v))||m));l._RF.pop()}}}));

System.register("chunks:///_virtual/BingoPopUp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./StaticInstance.ts","./Constant.ts"],(function(t){"use strict";var i,n,e,o,r,c,a,s,u,l,p,g,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){c=t.cclegacy,a=t._decorator,s=t.Node,u=t.Label},function(t){l=t.UIBase},function(t){p=t.StaticInstance},function(t){g=t.MATCH,h=t.MATCH_PRIZE}],execute:function(){var _,f,T,b,y,P,w;c._RF.push({},"8acf1ES27xJCb694xCVmeQt","BingoPopUp",void 0);var C=a.ccclass,z=a.property;t("BingoPopUp",(_=C("BingoPopUp"),f=z({type:s}),T=z({type:u}),_((P=i((y=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return i=t.call.apply(t,[this].concat(r))||this,e(i,"closeButton",P,o(i)),e(i,"bingoValue",w,o(i)),i._winPrize=-1,i}n(i,t);var c=i.prototype;return c.onLoad=function(){console.log("onLoad in BingoPopUp");var t=0,i=p.currentMatch.win_prize,n=p.currentMatch.match_id;t=n==g.FAST_1||n==g.NORMAL_1?h.ONE_CREDIT_TICKET:n==g.FAST_2||n==g.NORMAL_2?h.TWO_CREDIT_TICKET:h.TEN_CREDIT_TICKET,i>-1?this.bingoValue.string="$ "+p.currentMatch.win_prize.toString():this._winPrize>-1?this.bingoValue.string="$ "+this._winPrize.toString():this.bingoValue.string="$ "+t.toString()},c.init=function(){},c.initFromStart=function(t){this._winPrize=t,this.bingoValue.string="$ "+this._winPrize.toString()},c.show=function(){t.prototype.show.call(this)},c.onCloseButtonClick=function(){t.prototype.hide.call(this)},r(i,[{key:"winPrize",set:function(t){this._winPrize=t}}]),i}(l)).prototype,"closeButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),w=i(y.prototype,"bingoValue",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),b=y))||b));c._RF.pop()}}}));

System.register("chunks:///_virtual/BottomPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(t){"use strict";var o,n,i,e,r,a,u,l,c,s;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,u=t.Node,l=t.Button,c=t.Sprite},function(t){s=t.UIBase}],execute:function(){var p,f,y,B,g,b,h,m,C,d,k,_,P;r._RF.push({},"1f5aaLsrFRIkJviQg7108Gj","BottomPanel",void 0);var v=a.ccclass,M=a.property;t("BottomPanel",(p=v("BottomPanel"),f=M({type:u}),y=M({type:u}),B=M({type:u}),g=M({type:u}),b=M({type:u}),p((C=o((m=function(t){function o(){for(var o,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return o=t.call.apply(t,[this].concat(r))||this,i(o,"notificationButton",C,e(o)),i(o,"treasureButton",d,e(o)),i(o,"historyButton",k,e(o)),i(o,"profileButton",_,e(o)),i(o,"buyButton",P,e(o)),o._uiManager=void 0,o}n(o,t);var r=o.prototype;return r.onLoad=function(){t.prototype.onLoad.call(this)},r.show=function(){t.prototype.show.call(this)},r.hide=function(){t.prototype.hide.call(this)},r.init=function(t){this._uiManager=t,this._uiManager.topPanelComp.isPendingData&&this.toggleBuyButton(!1)},r.onNotificationButtonClick=function(){this._uiManager.onNotificationTabClick()},r.onTreasureButtonClick=function(){this._uiManager.onTreasureTabClick()},r.onHistoryButtonClick=function(){this._uiManager.onHistoryTabClick()},r.onProfileButtonClick=function(){this._uiManager.onProfileTabClick()},r.onBuyButtonClick=function(){this._uiManager.onBuyButtonClick()},r.toggleBuyButton=function(t){console.log("in toggle buy button"),this.buyButton.getComponent(l).interactable=t,this.buyButton.getComponent(c).grayscale=!t},o}(s)).prototype,"notificationButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),d=o(m.prototype,"treasureButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),k=o(m.prototype,"historyButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),_=o(m.prototype,"profileButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),P=o(m.prototype,"buyButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),h=m))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/BoughtNumber.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,u,i;return{setters:[function(t){e=t.createClass},function(t){u=t.cclegacy,i=t._decorator}],execute:function(){var r;u._RF.push({},"fa78aW716xL6bJAqIYPhVsz","BoughtNumber",void 0);var n=i.ccclass;i.property,t("BoughtNumber",n("BoughtNumber")(r=function(){function t(){this._value=void 0,this._time=void 0}return e(t,[{key:"value",get:function(){return this._value},set:function(t){this._value=t}},{key:"time",get:function(){return this._time},set:function(t){this._time=t}}]),t}())||r);u._RF.pop()}}}));

System.register("chunks:///_virtual/ComingSoonModal.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(o){"use strict";var n,t,e,i;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy,e=o._decorator},function(o){i=o.UIBase}],execute:function(){var c;t._RF.push({},"47501nzkS5J85MJOYW+grZU","ComingSoonModal",void 0);var r=e.ccclass;e.property,o("ComingSoonModal",r("ComingSoonModal")(c=function(o){function t(){return o.apply(this,arguments)||this}n(t,o);var e=t.prototype;return e.onLoad=function(){o.prototype.onLoad.call(this)},e.show=function(){o.prototype.show.call(this)},e.hide=function(){o.prototype.hide.call(this)},e.onCancelClick=function(){this.node.destroy()},t}(i))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/ConfirmationModal.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./StaticInstance.ts","./UIBase.ts","./DataStorage.ts"],(function(t){"use strict";var e,n,o,a,i,r,s,c,u,l,f,h,p,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,r=t._decorator,s=t.Label,c=t.Node,u=t.director,l=t.game},function(t){f=t.ICMContext},function(t){h=t.StaticInstance},function(t){p=t.UIBase},function(t){g=t.DataStorage}],execute:function(){var d,m,y,b,C,k,A,I,M;i._RF.push({},"c090aSNp0ZEZaYUItGoaEw5","ConfirmationModal",void 0);var S=r.ccclass,w=r.property;t("ConfirmationModal",(d=S("ConfirmationModal"),m=w({type:s}),y=w({type:c}),b=w({type:c}),d((A=e((k=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,o(e,"message",A,a(e)),o(e,"cancelButton",I,a(e)),o(e,"continueButton",M,a(e)),e._fromContext=void 0,e}n(e,t);var i=e.prototype;return i.onLoad=function(){t.prototype.onLoad.call(this)},i.show=function(){t.prototype.show.call(this)},i.hide=function(){t.prototype.hide.call(this)},i.init=function(t){switch(this._fromContext=t,t){case f.START:this.message.string="Are you sure to\nquit the game?";break;case f.MAIN:this.message.string="Are you sure to\ngo back to start menu?";break;case f.LOGOUT:this.message.string="Are you sure to\nlog out from this account?";break;default:this.message.string=""}},i.onCancelClick=function(){this.node.destroy()},i.onContinueClick=function(){switch(this._fromContext){case f.START:l.end();break;case f.MAIN:h.mainUIManager.closeAllWebSocket(),h.mainUIManager.stopMatchCountdown(),u.loadScene("start");break;case f.LOGOUT:this.handleLogOut()}},i.handleLogOut=function(){h.startUIManager.closeAllWebSocket(),h.isAuth=!1,g.setAccessToken(""),g.setRefreshToken(""),u.loadScene("auth")},e}(p)).prototype,"message",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),I=e(k.prototype,"cancelButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),M=e(k.prototype,"continueButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),C=k))||C));i._RF.pop()}}}));

System.register("chunks:///_virtual/Constant.ts",["cc"],(function(T){"use strict";var _;return{setters:[function(T){_=T.cclegacy}],execute:function(){_._RF.push({},"38d11DFCn1Ma5f33tTt0ePX","Constant",void 0);T("CONSTANT",{NUMBER_BOX_SIZE:106,TICKET_PRICE:10,TREASURE_PRIZE:100,JACKPOT_PRIZE:1500}),T("MATCH",{NORMAL_1:20,NORMAL_2:21,NORMAL_10:22,FAST_1:17,FAST_2:18,FAST_10:19}),T("MATCH_PRIZE",{ONE_CREDIT_TICKET:70,TWO_CREDIT_TICKET:140,TEN_CREDIT_TICKET:700});_._RF.pop()}}}));

System.register("chunks:///_virtual/DataStorage.ts",["cc"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.cclegacy,n=t.sys}],execute:function(){e._RF.push({},"e0d74+m3UhJaqvrLuA6P+hb","DataStorage",void 0);t("DataStorage",function(){function t(){}return t.setIsMusicMute=function(t){n.localStorage.setItem("IS_AUDIO_MUTE",JSON.stringify(t))},t.getIsMusicMute=function(){var t=n.localStorage.getItem("IS_AUDIO_MUTE");return!!t&&JSON.parse(t)},t.setAccessToken=function(t){n.localStorage.setItem("ACCESS_TOKEN",t)},t.getAccessToken=function(){var t=n.localStorage.getItem("ACCESS_TOKEN");return t||""},t.setRefreshToken=function(t){n.localStorage.setItem("REFRESH_TOKEN",t)},t.getRefreshToken=function(){var t=n.localStorage.getItem("REFRESH_TOKEN");return t||""},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Enum.ts",["cc"],(function(e){"use strict";var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){var n,o,t,i,r;e({IBoxState:void 0,ICMContext:void 0,IGameMode:void 0,INumberPrice:void 0,UIType:void 0}),a._RF.push({},"7688dUac2NK87QIhYnq4i0D","Enum",void 0),function(e){e[e.Home=0]="Home",e[e.PlayButton=1]="PlayButton",e[e.TopPanel=2]="TopPanel",e[e.BottomPanel=3]="BottomPanel",e[e.TreasurePanel=4]="TreasurePanel",e[e.NotificationTab=5]="NotificationTab",e[e.TreasureTab=6]="TreasureTab",e[e.HistoryTab=7]="HistoryTab",e[e.ProfileTab=8]="ProfileTab",e[e.NumberBoughtTab=9]="NumberBoughtTab",e[e.BalanceTab=10]="BalanceTab",e[e.ResultPopUp=11]="ResultPopUp",e[e.BingoPopUp=12]="BingoPopUp",e[e.StartMenu=13]="StartMenu",e[e.TreasureHunterPopUp=14]="TreasureHunterPopUp",e[e.AuthenticationPanel=15]="AuthenticationPanel",e[e.NumberPricePanel=16]="NumberPricePanel",e[e.ConfirmationModal=17]="ConfirmationModal",e[e.OptionPanel=18]="OptionPanel",e[e.LoadingOverlay=19]="LoadingOverlay",e[e.BalanceInsufficientModal=20]="BalanceInsufficientModal"}(n||(n=e("UIType",{}))),function(e){e[e.NORMAL=0]="NORMAL",e[e.SELECTED=1]="SELECTED",e[e.BOUGHT=2]="BOUGHT",e[e.TREASURE=3]="TREASURE",e[e.UNAVAILABLE=4]="UNAVAILABLE"}(o||(o=e("IBoxState",{}))),function(e){e[e.FAST=0]="FAST",e[e.NORMAL=1]="NORMAL"}(t||(t=e("IGameMode",{}))),function(e){e[e.ONE=0]="ONE",e[e.TWO=1]="TWO",e[e.TEN=2]="TEN"}(i||(i=e("INumberPrice",{}))),function(e){e[e.AUTH=0]="AUTH",e[e.START=1]="START",e[e.MAIN=2]="MAIN",e[e.LOGOUT=3]="LOGOUT"}(r||(r=e("ICMContext",{}))),a._RF.pop()}}}));

System.register("chunks:///_virtual/FullscreenPopUp.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,o=e.Component}],execute:function(){var c;n._RF.push({},"73733Egu3FFxJqzCpnIpphx","FullscreenPopUp",void 0);var p=r.ccclass;r.property,e("FullscreenPopUp",p("FullscreenPopUp")(c=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var r=n.prototype;return r.start=function(){},r.update=function(e){},n}(o))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./NumberBox.ts","./Constant.ts","./StaticInstance.ts","./index.ts","./DataStorage.ts"],(function(e){"use strict";var r,t,s,a,i,n,o,u,h,b,m,c,l,d,_,f,N;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,s=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.createClass},function(e){n=e.cclegacy,o=e._decorator,u=e.Prefab,h=e.Label,b=e.instantiate,m=e.Component},function(e){c=e.IBoxState},function(e){l=e.NumberBox},function(e){d=e.CONSTANT},function(e){_=e.StaticInstance},function(e){f=e.buyNumbers},function(e){N=e.DataStorage}],execute:function(){var g,p,v,x,w,T,M;n._RF.push({},"b18f6mcVFBDGaTmPJizuw5R","GameManager",void 0);var O=o.ccclass,B=o.property,y=d.NUMBER_BOX_SIZE;e("GameManager",(g=O("GameManager"),p=B({type:l}),v=B({type:u}),g((T=r((w=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return r=e.call.apply(e,[this].concat(i))||this,s(r,"firstBox",T,a(r)),s(r,"surroundArrows",M,a(r)),r._balance=void 0,r._boxes=[],r._boughtNumbers=[],r._boughtTreasures=[],r._selectedNumbers=[],r._treasureNumbers=[],r._unavailableNumbers=[],r._arrowChildrenArr=[],r}t(r,e);var n=r.prototype;return n.randomizeBoughtNumber=function(){if(100-this._unavailableNumbers.length>0){var e=Math.floor(100*Math.random()),r=this._boxes[e].state;r!=c.NORMAL&&r!=c.SELECTED&&r!=c.TREASURE||(this._unavailableNumbers.push(e),this._boxes[e].makeUnavailable(!1),this._treasureNumbers.indexOf(e)>-1&&this.removeTreasureNumber(e),this._selectedNumbers.indexOf(e)>-1&&this.removeSurroundingArrows())}else console.log("Unschedules"),this.unschedule(this.randomizeBoughtNumber)},n.onLoad=function(){_.setMainGameManager(this),_.mainGameManager.balance=_.currentUser.balance,_.mainGameManager.initOneHundredNumberBoxes(),this.initDataFromServer()},n.initOneHundredNumberBoxes=function(){this._boxes.push(this.firstBox);for(var e=0;e<10;e++)for(var r=0==e?1:0;r<10;r++){var t=new l,s=this._boxes.length,a=this._boxes[s-1],i=a.getPosition(),n=a.clone();n.children[0].getComponent(h).string=(s<10?"0":"")+s.toString(),s>=10&&s%10==0?n.setPosition(this.firstBox.getPosition().x,i.y-y):n.setPosition(i.x+y,i.y),t.init(n),n.setSiblingIndex(0),this.node.addChild(n),this._boxes.push(t)}},n.onBuyButtonClick=function(){var e=this,r=N.getAccessToken();f(r,_.currentMatch.match_id,this._selectedNumbers).then((function(r){0==Object.keys(r).length?(console.log("-- Buy success --"),e._boughtNumbers=e._boughtNumbers.concat(e._selectedNumbers),e._selectedNumbers=[],_.mainUIManager.updateTopPanelTotalTicketBought()):null!=r&&r.error&&_.mainUIManager.initInsufficientBalanceModal(r.error)}))},n.handleBuyOrderApproved=function(){var e=this,r=[],t=0,s=[],a=[],i=[];this._selectedNumbers.forEach((function(r,t){e._boxes[r].state=c.BOUGHT,e._boxes[r].makeUnavailable(!0),a.push(e.findNearestTreasureInfo(r));var s=e._treasureNumbers.indexOf(r)>0;if(s){var i=_.roundData.remainTreasureNumbers.indexOf(r);_.roundData.remainTreasureNumbers.splice(i,1)}_.nakamaClient.sendMatchData(r,s),_.roundData.boughtNumbers.push(r)})),_.nakamaClient.deductWalletCredit(),_.isJoiner||_.nakamaClient.updateRoundDataStorageObject(),a.forEach((function(t){if(r.indexOf(t.treasure)<0&&e._selectedNumbers.indexOf(t.treasure)<0)r.push(t.treasure),s.push(t.number);else if(r.indexOf(t.treasure)>=0){var i=a[r.indexOf(t.treasure)];t.min<i.min&&(s.splice(s.indexOf(i.number),1),s.push(t.number))}})),s.forEach((function(r){e.showSurroundArrows(r)})),this._selectedNumbers.forEach((function(r){e._treasureNumbers.indexOf(r)>-1&&(t++,i.push(r),e._boxes[r].makeTreasure(!0),e.removeArrowsOfFoundTreasure(r))})),this._boughtTreasures=this._boughtTreasures.concat(i),t>0&&(this._balance+=t*_.roundData.treasurePrize,console.log(this._balance),_.mainUIManager.updateTopPanelBalanceLabel(this._balance),_.mainUIManager.showTreasureHunterPopUp(i)),_.mainUIManager.updateAfterBuying()},n.removeSurroundingArrows=function(){this.node.children[100]&&this.node.removeChild(this.node.children[100])},n.removeArrowsOfFoundTreasure=function(e){var r=this;this._arrowChildrenArr.forEach((function(t,s){e==t.treasureNumber&&(r.node.children[t.childIndex].active=!1)}))},n.removeSelectedNumber=function(e){var r=this._selectedNumbers.indexOf(e);this._selectedNumbers.splice(r,1)},n.removeTreasureNumber=function(e){var r=this._treasureNumbers.indexOf(e);this._treasureNumbers.splice(r,1)},n.updateBoughtAndSelectedNumbers=function(){var e=this;this._selectedNumbers.forEach((function(r){e._treasureNumbers.indexOf(r)>-1&&(e.removeTreasureNumber(r),console.log("Removed "+r))})),this._boughtNumbers=this._boughtNumbers.concat(this._selectedNumbers),this._selectedNumbers=[],this._unavailableNumbers=[].concat(this._boughtNumbers)},n.showSurroundArrows=function(e){var r=b(this.surroundArrows),t=this.node.children[e].getPosition();r.setPosition(t.x,t.y),this.editArrowsByValue(r,e),this.node.addChild(r)},n.editArrowsByValue=function(e,r){for(var t=[],s=[],a=-1234,i=this._boxes[r],n=0;n<this._treasureNumbers.length;n++){var o=this._boxes[this._treasureNumbers[n]],u=Math.sqrt(Math.pow(o.getPosition().x-i.getPosition().x,2)+Math.pow(o.getPosition().y-i.getPosition().y,2));u>0?(s.push(u),(-1234==a||a>u)&&(a=u)):s.push(u)}for(var h=0;h<this._treasureNumbers.length;h++){var b=this._boxes[this._treasureNumbers[h]];if(this._treasureNumbers[h]!=r&&a==s[h]){var m=i.getPosition().x,c=i.getPosition().y,l=b.getPosition().x,d=b.getPosition().y;m==l?c<d?t.push("arrow_top"):t.push("arrow_bottom"):c==d?m<l?t.push("arrow_right"):t.push("arrow_left"):m>l?c<d?t.push("arrow_top_left"):t.push("arrow_bottom_left"):m<l&&(c<d?t.push("arrow_top_right"):t.push("arrow_bottom_right")),console.log({childIndex:this.node.children.length,treasureNumber:this._treasureNumbers[h]}),this._arrowChildrenArr.push({childIndex:this.node.children.length,treasureNumber:this._treasureNumbers[h]})}}["arrow_top","arrow_bottom","arrow_left","arrow_right","arrow_top_left","arrow_top_right","arrow_bottom_left","arrow_bottom_right"].forEach((function(r){if(t.indexOf(r)<0){var s=e.getChildByName(r);e.removeChild(s)}}))},n.randomizeTreasureNumber=function(){for(var e=0;this._treasureNumbers.length<5;e++){var r=Math.floor(100*Math.random());this._treasureNumbers.indexOf(r)<0&&(this._treasureNumbers.push(r),this._boxes[r].state=c.TREASURE)}console.log("Treasure numbers: "+this._treasureNumbers)},n.initDataFromServer=function(){var e,r,t=this;null==(e=_.roundData)||e.treasureNumbers.forEach((function(e){t._treasureNumbers.push(e),t._boxes[e].state=c.TREASURE})),null==(r=_.currentMatch.bought_tickets)||r.forEach((function(e){t.handleMakeNumberUnavailable(e)}))},n.findNearestTreasureInfo=function(e){for(var r=-1,t=-1234,s=this._boxes[e],a=0;a<this._treasureNumbers.length;a++){var i=this._boxes[this._treasureNumbers[a]],n=Math.sqrt(Math.pow(i.getPosition().x-s.getPosition().x,2)+Math.pow(i.getPosition().y-s.getPosition().y,2));n>0&&(-1234==t||t>n)&&(r=a,t=n)}return{number:e,min:t,treasure:this._treasureNumbers[r]}},n.showRestTreasureNumbers=function(){for(var e=this;this.node.children[100];)this.node.removeChild(this.node.children[100]);this._treasureNumbers.forEach((function(r){e._boxes[r].makeTreasure(!1)}))},n.restartRound=function(){var e=this;this.node.children.forEach((function(r,t){t>0?r.destroy():(e.firstBox.state=c.NORMAL,e.firstBox.makeNormal())})),this._boxes=[],this._boughtNumbers=[],this._boughtTreasures=[],this._selectedNumbers=[],this._treasureNumbers=[],this._unavailableNumbers=[],_.mainGameManager.initOneHundredNumberBoxes()},n.handleMakeNumberUnavailable=function(e){if(this._selectedNumbers.indexOf(e)>=0)this._boxes[e].state=c.UNAVAILABLE,this._boxes[e].makeUnavailable(!0);else{var r=this._boxes[e].state;r!=c.NORMAL&&r!=c.SELECTED&&r!=c.TREASURE||(this._unavailableNumbers.push(e),this._boxes[e].makeUnavailable(!1),this._treasureNumbers.indexOf(e)>-1&&this.removeTreasureNumber(e),this._selectedNumbers.indexOf(e)>-1&&this.removeSurroundingArrows())}},n.handleMakeNumberBought=function(e){this._boxes[e].state=c.BOUGHT,this._boxes[e].makeUnavailable(!0)},n.handleNumberBoughtEvent=function(e){var r;if(this.handleMakeNumberUnavailable(e.number.value),null!=e&&null!=(r=e.number)&&r.isTreasure){this.removeTreasureNumber(e.number.value);var t=_.roundData.remainTreasureNumbers.indexOf(e.number);_.roundData.remainTreasureNumbers.splice(t,1)}},n.saveUserCurrentRoundData=function(){var e=_.roundData,r=_.nakamaClient.matchId,t=this._boughtNumbers.indexOf(e.jackpotNumber)>-1,s=r,a={matchId:r,period:e.period,boughtJackpot:t,startTime:e.startTime,numberPrice:e.numberPrice,boughtNumbers:this._boughtNumbers,jackpotPrize:e.jackpotPrize,treasurePrize:e.treasurePrize,jackpotNumber:e.jackpotNumber,boughtTreasures:this._boughtTreasures};_.nakamaClient.writeStorageObject("user_round",s,a,1)},i(r,[{key:"boxes",get:function(){return this._boxes}},{key:"balance",get:function(){return this._balance},set:function(e){this._balance=e}}]),r}(m)).prototype,"firstBox",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),M=r(w.prototype,"surroundArrows",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),x=w))||x));n._RF.pop()}}}));

System.register("chunks:///_virtual/HistoryDateItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(t){"use strict";var e,i,n,o,r,a,s,l,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Label,l=t.Node,c=t.instantiate},function(t){u=t.UIBase}],execute:function(){var p,d,g,m,h,y,f;r._RF.push({},"c2a0frF2XpPrbj88jaKmKpf","HistoryDateItem",void 0);var b=a.ccclass,v=a.property;t("HistoryDateItem",(p=b("HistoryDateItem"),d=v({type:s}),g=v({type:l}),p((y=e((h=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"dateLabel",y,o(e)),n(e,"firstItem",f,o(e)),e}i(e,t);var r=e.prototype;return r.onLoad=function(){t.prototype.onLoad.call(this)},r.show=function(){t.prototype.show.call(this)},r.hide=function(){t.prototype.hide.call(this)},r.init=function(t){var e,i,n=this,o=new Date(null==t?void 0:t.started_at),r=o.getDate().toString()+"/"+(o.getMonth()+1).toString()+"/"+o.getFullYear().toString();this.dateLabel.string="Period "+((null==t?void 0:t.id)<10?"0":"")+(null==t||null==(e=t.id)?void 0:e.toString())+" â€” "+r,null==t||null==(i=t.bingo_tickets)||i.forEach((function(t,e){var i="win"==t.status?"Jackpot":"                    ",o=parseFloat(t.amount);n.createNewNumberItem(t.ticket_number,e,i,o)})),this.firstItem.active=!1},r.createNewNumberItem=function(t,e,i,n){var o=c(this.firstItem);o.setPosition(0,this.firstItem.getPosition().y-140.375*e),o.getChildByName("Container").getChildByName("BottomlessButton").getChildByName("Label").getComponent(s).string=(t<10?"0":"")+t.toString(),o.getChildByName("Container").getChildByName("NumberTypeLabel").getComponent(s).string=i,o.getChildByName("Container").getChildByName("WinLossLabel").getComponent(s).string=(i.includes("a")?"+ ":"- ")+n.toString()+" $",this.node.addChild(o)},e}(u)).prototype,"dateLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),f=e(h.prototype,"firstItem",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),m=h))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/HistoryTab.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./UIBase.ts","./NumberBoughtTab.ts","./HistoryDateItem.ts","./StaticInstance.ts","./index.ts","./DataStorage.ts"],(function(t){"use strict";var e,n,i,o,a,r,s,l,c,u,g,h,m,f,p,d,y,b,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){r=t.cclegacy,s=t._decorator,l=t.Node,c=t.Prefab,u=t.instantiate,g=t.UITransform,h=t.Label},function(t){m=t.Utils},function(t){f=t.UIBase},function(t){p=t.ITEM_MARGIN_BOTTOM},function(t){d=t.HistoryDateItem},function(t){y=t.StaticInstance},function(t){b=t.getUserHistory},function(t){C=t.DataStorage}],execute:function(){var v,I,T,B,_,M,D,S,w;r._RF.push({},"cf0aawaQX1JK6oubmPRCon2","HistoryTab",void 0);var H=s.ccclass,L=s.property,U=-84;t("HistoryTab",(v=H("HistoryTab"),I=L({type:l}),T=L({type:l}),B=L({type:c}),v((D=e((M=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"closeButton",D,o(e)),i(e,"scrollContent",S,o(e)),i(e,"dateItem",w,o(e)),e._isFromStartMenu=void 0,e}n(e,t);var r=e.prototype;return r.onLoad=function(){var t=this,e=C.getAccessToken();y.startUIManager.showLoadingOverlay(),b(e).then((function(e){var n=null==e?void 0:e.items;if(n.length>6&&(n=n.slice(0,5)),n){var i,o=0;null==(i=n)||i.forEach((function(e){if(n.length>0){var i=u(t.dateItem),a=140*o;o+=e.bingo_tickets.length+1,i.setPosition(0,-a+U),t.scrollContent.addChild(i);var r=i.getComponent(d);r.init(e),r.show()}})),0==n.length&&(t.scrollContent.getChildByName("EmptyLabel").active=!0),t.scrollContent.getComponent(g).height=140*o}y.startUIManager.closeLoadingOverlay()}))},r.init=function(){var t,e=this,n=new Date,i=this.scrollContent.children[0],o=(null==(t=y.mainGameManager)?void 0:t._boughtNumbers)||[];this.scrollContent.getComponent(g).height=158*(null==o?void 0:o.length),o.forEach((function(t,o){var a=u(i);a.getChildByName("BottomlessButton").getChildByName("Label").getComponent(h).string=(t<10?"0":"")+t.toString(),a.getChildByName("TimeLabel").getComponent(h).string="10:25:30 - "+m.getDateAsString(n),a.setPosition(i.position.x,i.position.y-o*p),e.scrollContent.addChild(a)})),i.active=!1},r.onCloseButtonClick=function(){this._isFromStartMenu&&(y.startUIManager.balanceTabCloseCallback(),this._isFromStartMenu=void 0),t.prototype.hide.call(this)},r.sortHistoryDataWithTimeOrder=function(t,e){return null==t?void 0:t.sort((function(t,e){return new Date(e.create_time).getTime()-new Date(t.create_time).getTime()}))},a(e,[{key:"isFromStartMenu",set:function(t){this._isFromStartMenu=t}}]),e}(f)).prototype,"closeButton",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),S=e(M.prototype,"scrollContent",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),w=e(M.prototype,"dateItem",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),_=M))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataStorage.ts","./StaticInstance.ts"],(function(e){"use strict";var t,r,n,a,s;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy},function(e){a=e.DataStorage},function(e){s=e.StaticInstance}],execute:function(){e({buyNumbers:function(e,t,r){return x.apply(this,arguments)},getMatchData:function(e,t){return h.apply(this,arguments)},getMatchResult:function(e,t,r){return k.apply(this,arguments)},getUserBalance:function(e){return f.apply(this,arguments)},getUserBoughtNumbersInMatch:function(e,t){return d.apply(this,arguments)},getUserHistory:function(e){return b.apply(this,arguments)},getUserInfo:function(e){return p.apply(this,arguments)},signIn:function(e,t){return i.apply(this,arguments)},signUp:function(e,t){return l.apply(this,arguments)}}),n._RF.push({},"6a830g10OpEQo4SlVslGh0v","index",void 0);var u=e("PLATFORM_CLIENT_ID","bingo123"),o=e("API_URL","https://be.our-projects.org/v1"),c={Accept:"application/json","Client-ID":u,"Content-Type":"application/json"};function i(){return(i=t(r().mark((function e(t,n){var u,i,l,p,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u={method:"POST",headers:c,body:JSON.stringify({email:t,password:n})},e.prev=1,e.next=4,fetch(o+"/users/sign_in",u);case 4:return l=e.sent,e.next=7,l.json();case 7:if(p=e.sent,!l.ok||null==p||null==(i=p.data)||!i.access_token){e.next=14;break}s.isAuth=!0,a.setAccessToken(p.data.access_token),console.log("Token stored..."),e.next=16;break;case 14:if(200==l.status){e.next=16;break}return e.abrupt("return",{error:null==p||null==(f=p.error)?void 0:f.errors[0]});case 16:return e.abrupt("return",p.data);case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})))).apply(this,arguments)}function l(){return(l=t(r().mark((function e(t,n){var u,i,l,p,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u={method:"POST",headers:c,body:JSON.stringify({email:t,password:n,username:"",first_name:"",last_name:"",is_agent:!1,referral_code:""})},e.prev=1,e.next=4,fetch(o+"/users",u);case 4:return l=e.sent,e.next=7,l.json();case 7:if(p=e.sent,!l.ok||null==p||null==(i=p.data)||!i.access_token){e.next=14;break}s.isAuth=!0,a.setAccessToken(p.data.access_token),console.log("Token stored..."),e.next=16;break;case 14:if(200==l.status){e.next=16;break}return e.abrupt("return",{error:null==p||null==(f=p.error)?void 0:f.errors[0]});case 16:return e.abrupt("return",p.data);case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})))).apply(this,arguments)}function p(){return(p=t(r().mark((function e(t){var n,a,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",headers:{"Client-ID":u,"Content-Type":"application/json",Authorization:"Bearer "+t}},e.prev=1,e.next=4,fetch(o+"/users/current",n);case 4:return a=e.sent,e.next=7,a.json();case 7:if(s=e.sent,!a.ok||null==s||!s.data){e.next=12;break}return e.abrupt("return",s.data);case 12:if(200==a.status){e.next=14;break}return e.abrupt("return",{error:null==s||null==(c=s.error)?void 0:c.errors[0]});case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function f(){return(f=t(r().mark((function e(t){var n,a,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",headers:{"Client-ID":u,"Content-Type":"application/json",Authorization:"Bearer "+t}},e.prev=1,e.next=4,fetch(o+"/users/balance",n);case 4:return a=e.sent,e.next=7,a.json();case 7:if(s=e.sent,!a.ok||null==s||!s.data){e.next=12;break}return e.abrupt("return",s.data);case 12:if(200==a.status){e.next=14;break}return e.abrupt("return",{error:null==s||null==(c=s.error)?void 0:c.errors[0]});case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function h(){return(h=t(r().mark((function e(t,n){var a,s,c,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"GET",headers:{"Client-ID":u,"Content-Type":"application/json",Authorization:"Bearer "+t}},e.prev=1,e.next=4,fetch(o+"/matches/"+n,a);case 4:return s=e.sent,e.next=7,null==s?void 0:s.json();case 7:if(c=e.sent,null==s||!s.ok||null==c||!c.data){e.next=12;break}return e.abrupt("return",c.data);case 12:if(200==s.status){e.next=14;break}return e.abrupt("return",{error:null==c||null==(i=c.error)?void 0:i.errors[0]});case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function d(){return(d=t(r().mark((function e(t,n){var a,s,c,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"GET",headers:{"Client-ID":u,"Content-Type":"application/json",Authorization:"Bearer "+t}},e.prev=1,e.next=4,fetch(o+"/users/tickets/"+n+"/current",a);case 4:return s=e.sent,e.next=7,null==s?void 0:s.json();case 7:if(c=e.sent,null==s||!s.ok||null==c||!c.data){e.next=12;break}return e.abrupt("return",c.data);case 12:if(200==s.status){e.next=14;break}return e.abrupt("return",{error:null==c||null==(i=c.error)?void 0:i.errors[0]});case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function k(){return(k=t(r().mark((function e(t,n,a){var s,c,i,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={method:"GET",headers:{"Client-ID":u,"Content-Type":"application/json",Authorization:"Bearer "+t}},e.prev=1,e.next=4,fetch(o+"/matches/"+n+"/result/"+a,s);case 4:return c=e.sent,e.next=7,null==c?void 0:c.json();case 7:if(i=e.sent,null==c||!c.ok||null==i||!i.data){e.next=12;break}return e.abrupt("return",i.data);case 12:if(200==c.status){e.next=14;break}return e.abrupt("return",{error:null==i||null==(l=i.error)?void 0:l.errors[0]});case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function x(){return(x=t(r().mark((function e(t,n,a){var s,c,i,l,p,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){var e="";return a.forEach((function(t,r){e+=t.toString(),r<a.length-1&&(e+=",")})),e},c={method:"POST",body:JSON.stringify({tickets:s()}),headers:{"Client-ID":u,"Content-Type":"application/json",Authorization:"Bearer "+t}},e.prev=2,e.next=5,fetch(o+"/matches/"+n+"/buy",c);case 5:return i=e.sent,e.next=8,i.json();case 8:if(l=e.sent,!i.ok||null==l||!l.data){e.next=13;break}return e.abrupt("return",l.data);case 13:if(200==i.status){e.next=15;break}return e.abrupt("return",{error:null==l||null==(p=l.error)||null==(f=p.message)?void 0:f.error});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,17]])})))).apply(this,arguments)}function b(){return(b=t(r().mark((function e(t){var n,a,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",headers:{"Client-ID":u,"Content-Type":"application/json",Authorization:"Bearer "+t}},e.prev=1,e.next=4,fetch(o+"/users/tickets",n);case 4:return a=e.sent,e.next=7,null==a?void 0:a.json();case 7:if(s=e.sent,null==a||!a.ok||null==s||!s.data){e.next=12;break}return e.abrupt("return",s.data);case 12:if(200==a.status){e.next=14;break}return e.abrupt("return",{error:null==s||null==(c=s.error)?void 0:c.errors[0]});case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}n._RF.pop()}}}));

System.register("chunks:///_virtual/InsufficientBalanceModal.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(e){"use strict";var t,n,i,o,a,c,r,l,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,c=e._decorator,r=e.Node,l=e.Label},function(e){s=e.UIBase}],execute:function(){var u,f,p,d,h;a._RF.push({},"468d3dNjVZPf77hgjY2FP82","InsufficientBalanceModal",void 0);var y=c.ccclass,g=c.property;e("InsufficientBalanceModal",(u=y("InsufficientBalanceModal"),f=g({type:r}),u((h=t((d=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a))||this,i(t,"cancelButton",h,o(t)),t}n(t,e);var a=t.prototype;return a.onLoad=function(){e.prototype.onLoad.call(this)},a.show=function(t){void 0===t&&(t="Your balance is insufficient!"),e.prototype.show.call(this),this.node.getChildByName("Background").getChildByName("Message").getComponent(l).string=t},a.hide=function(){e.prototype.hide.call(this)},a.onCancelClick=function(){this.node.destroy()},t}(s)).prototype,"cancelButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),p=d))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/Interface.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"139c1O7BbhFSI3riFSMPZZG","Interface",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingOverlay.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(o){"use strict";var t,n,e,i;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,e=o._decorator},function(o){i=o.UIBase}],execute:function(){var a;n._RF.push({},"722750c5P9IY44S2o0b/h5a","LoadingOverlay",void 0);var r=e.ccclass;o("LoadingOverlay",r("LoadingOverlay")(a=function(o){function n(){return o.apply(this,arguments)||this}t(n,o);var e=n.prototype;return e.onLoad=function(){o.prototype.onLoad.call(this)},e.show=function(){o.prototype.show.call(this)},e.init=function(o){var t,n;(void 0===o&&(o=!1),o)&&(null==(t=this.node)||null==(n=t.getChildByName("Label"))||n.setPosition(0,-135.632))},n}(i))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./UIManager3.ts","./AuthenticationPanel.ts","./UIManager4.ts","./GameManager.ts","./UIManager.ts","./index.ts","./BoughtNumber.ts","./NumberBox.ts","./SurroundArrows.ts","./NakamaClient.ts","./BottomPanel.ts","./InsufficientBalanceModal.ts","./TopPanel.ts","./TreasurePanel.ts","./BalanceTab.ts","./BingoPopUp.ts","./FullscreenPopUp.ts","./HistoryTab.ts","./NotificationTab.ts","./NumberBoughtTab.ts","./ProfileTab.ts","./ResultPopUp.ts","./TreasureHunterPopUp.ts","./TreasureTab.ts","./HistoryDateItem.ts","./PeriodPicker.ts","./Constant.ts","./Enum.ts","./Interface.ts","./StaticInstance.ts","./UIBase.ts","./UIManager2.ts","./ComingSoonModal.ts","./ConfirmationModal.ts","./LoadingOverlay.ts","./NumberPricePanel.ts","./OptionPanel.ts","./PlayButton.ts","./StartMenu.ts","./DataStorage.ts","./Utils.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/NakamaClient.ts",["./rollupPluginModLoBabelHelpers.js","cc","./nakama-js.esm.mjs","./Enum.ts","./DataStorage.ts","./StaticInstance.ts"],(function(e){"use strict";var t,r,n,s,a,i,c,o,u;return{setters:[function(e){t=e.createClass,r=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){s=e.cclegacy,a=e._decorator},function(e){i=e.Client},function(e){c=e.IGameMode},function(e){o=e.DataStorage},function(e){u=e.StaticInstance}],execute:function(){var h;s._RF.push({},"d38d1MI+8RGa6Xnq00O5BoW","NakamaClient",void 0);var d=a.ccclass;a.property,e("TEMP_USER_ID","68515a09-ae15-4ff7-96ff-b229e399b77f"),e("NakamaClient",d("NakamaClient")(h=function(){function e(){this.client=void 0,this.socket=void 0,this._session=void 0,this.joinedMatchId=void 0,this._buyOrders=[];for(var e=0;e<100;e++)this._buyOrders.push([]);this.client=new i("defaultkey","dashboard-ws.our-projects.org","443",!0)}var s=e.prototype;return s.initSocket=function(){var e=r(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.createSocket(!0);case 2:return this.socket=e.sent,!0,e.next=6,this.socket.connect(this._session,true);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.checkLiveRound=function(e,t){var r=new Date,n=new Date(e+60*t*1e3);return console.log("Round live?: "+(r<n)),r<n},s.authenticateWithEmail=function(){var e=r(n().mark((function e(t){var r,s,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.email,s=t.password,!1,e.next=5,this.client.authenticateEmail(r,s,false,"");case 5:return(a=e.sent)&&a.token&&(this._session=a,u.isAuth=!0,o.setAccessToken(a.token),o.setRefreshToken(a.refresh_token),this.setEmailAsUsername(r)),e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(0),console.log("~~ Error in login: "+JSON.stringify(e.t0));case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),s.updateBalanceFromWallet=function(){var e=r(n().mark((function e(){var t,r,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.getAccount(this._session);case 2:r=e.sent,s=JSON.parse(r.wallet),console.log("~~ CREDIT IN WALLET: "+(null==s?void 0:s.credit)+" ~~"),null!=(null==(t=u.currentUser)?void 0:t.balance)&&(u.currentUser.balance=null==s?void 0:s.credit),u.walletCreditUpdated="fetched";case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.deductWalletCredit=function(){var e=r(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={game_id:1,match_id:this.matchId,quantity:u.mainGameManager._selectedNumbers.length,ticketPrice:u.numberPrice/10==1?3:u.numberPrice},"buy_ticket_number_rpc",this.client.rpc(this.session,"buy_ticket_number_rpc",t).then((function(e){console.log(e)})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.logOutSession=function(){var e=r(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.isAuth=!1,o.setAccessToken(""),o.setRefreshToken("");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s.removeObjectStorage=function(){var e=r(n().mark((function e(t,r,s){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.deleteStorageObjects(this.session,{object_ids:[{collection:t,key:r}]});case 2:console.log("Object deleted!");case 3:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),s.writeStorageObject=function(){var e=r(n().mark((function e(t,r,s,a){var i,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[{collection:t,key:r,value:s,permission_read:a}],e.next=5,this.client.writeStorageObjects(this.session,i);case 5:c=e.sent,console.log("Write objects: "+c.acks[0].key);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r,n,s){return e.apply(this,arguments)}}(),s.readStorageObject=function(){var e=r(n().mark((function e(t,r,s){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.client.readStorageObjects(this.session,{object_ids:[{collection:t,key:r,user_id:s||this._session.user_id}]});case 3:return a=e.sent,console.log("Read objects: %o",a.objects),e.abrupt("return",a.objects);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),s.readMultipleStorageObjects=function(){var e=r(n().mark((function e(t,r){var s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 100,e.next=3,this.client.listStorageObjects(this._session,t,r,100,"");case 3:return s=e.sent,console.log("List objects: %o",s.objects),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.getRoomStorageObject=function(){var e=r(n().mark((function e(t){var r,s,a,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=4,this.client.listStorageObjects(this._session,"currentRound",null,100);case 4:for(s=e.sent,console.log("room length: "+s.objects.length),a=0;a<s.objects.length;a++)(i=s.objects[a]).key==t&&r.push({value:i.value,creatorId:i.user_id,version:i.version,updatedAt:new Date(i.update_time)});return r=r.sort((function(e,t){return t.updatedAt-e.updatedAt})),e.abrupt("return",r[0]);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.getRoundDataStorageObject=function(){var e=r(n().mark((function e(t,r){var s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.readStorageObject("round",t,r);case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.createMatch=function(){var e=r(n().mark((function e(t){var r,s,a,i,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initSocket();case 2:return e.next=4,this.socket.createMatch();case 4:return r=e.sent,s=u.numberPrice,a=u.gameMode==c.FAST?1:10,i=(1==a?"FAST_":"NORMAL_")+s.toString(),o={status:"live",period:t,duration:a,matchId:r.match_id,numberPrice:s,createdAt:(new Date).getTime()},this.joinedMatchId=r.match_id,console.log(r.match_id),e.next=13,this.writeStorageObject("currentRound",i,o,2);case 13:return e.next=15,this.createRoundStorageObject(r.match_id,t);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.createRoundStorageObject=function(){var e=r(n().mark((function e(t,r){var s,a,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=this.randomTreasureNumbers(),e.next=3,this.randomJackpotNumber();case 3:return a=e.sent,i={id:108,winner:"",period:r,jackpotNumber:a,treasureNumbers:s,remainTreasureNumbers:s,startTime:(new Date).getTime(),numberPrice:u.numberPrice,boughtNumbers:[],treasurePrize:2*u.numberPrice,jackpotPrize:70*u.numberPrice,duration:u.gameMode==c.FAST?1:10},e.next=7,this.writeStorageObject("round",t,i,2);case 7:u.roundData=JSON.parse(JSON.stringify(i));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.joinMatch=function(){var e=r(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.socket){e.next=3;break}return e.next=3,this.initSocket();case 3:if(!t){e.next=8;break}return this.joinedMatchId=t,e.next=7,this.socket.joinMatch(t);case 7:e.sent;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.leaveMatch=function(){var e=r(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.socket.leaveMatch(this.joinedMatchId);case 2:console.log("Left match!");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.handleSelfSocketMsg=function(e,t){var r=this,n=JSON.parse(e);if(103==t)n.numbers.value.forEach((function(e){var t;r._buyOrders[e].push({number:e,time:null==n||null==(t=n.numbers)?void 0:t.time,userId:r.session.user_id}),r._buyOrders[e]=r._buyOrders[e].sort((function(e,t){return e.time-t.time})),console.log(r._buyOrders[e])}));else if(104==t){var s=[];n.numbers.value.forEach((function(e){r._buyOrders[e].length>0&&r._buyOrders[e][0].userId==r.session.user_id?s.push(e):console.log("Self buy order rejected: "+e)})),u.mainGameManager._selectedNumbers=s,u.mainGameManager.handleBuyOrderApproved()}},s.initSocketListener=function(){var e=r(n().mark((function e(){var t=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.socket){e.next=3;break}return e.next=3,this.initSocket();case 3:this.socket.onmatchdata=function(e){var r=e.data,n=(new TextDecoder).decode(r),s=JSON.parse(n);switch(e.op_code){case 101:console.log("A custom opcode.");break;case 102:break;case 103:u.isJoiner||s.numbers.value.forEach((function(r){var n;t._buyOrders[r].push({number:r,time:null==s||null==(n=s.numbers)?void 0:n.time,userId:e.presence.user_id}),t._buyOrders[r]=t._buyOrders[r].sort((function(e,t){return e.time-t.time})),console.log(t._buyOrders[r])}));break;case 104:if(!u.isJoiner){var a=[];s.numbers.value.forEach((function(r){t._buyOrders[r].length>0&&t._buyOrders[r][0].userId==e.presence.user_id?a.push(r):console.log("Buy order rejected: "+r)})),t.socket.sendMatchState(t.joinedMatchId,105,JSON.stringify({data:{numbers:a,userId:e.presence.user_id}}))}break;case 105:s.data.userId==t.session.user_id&&(u.mainGameManager._selectedNumbers=s.data.numbers,u.mainGameManager.handleBuyOrderApproved());break;default:console.log("a user just bought %o",e.presence.user_id,n),u.mainGameManager.handleNumberBoughtEvent(s),u.roundData.boughtNumbers.push(s.number.value),u.isJoiner||t.updateRoundDataStorageObject()}};case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.sendMatchData=function(){var e=r(n().mark((function e(t,r){var s,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=this.joinedMatchId,1,a=JSON.stringify({number:{value:t,isTreasure:r||!1}}),this.socket.sendMatchState(s,1,a);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.sendSelectedNumberToMatch=function(){var e=r(n().mark((function e(t,r){var s,a,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=this.joinedMatchId,103,a=(new Date).getTime(),i=JSON.stringify({number:{value:t,time:a}}),u.isJoiner?this.socket.sendMatchState(s,103,i):this.handleSelfSocketMsg(i,103);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.sendSelectedNumbersToMatch=function(){var e=r(n().mark((function e(t,r){var s,a,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=this.joinedMatchId,103,a=(new Date).getTime(),i=JSON.stringify({numbers:{value:t,time:a}}),u.isJoiner?this.socket.sendMatchState(s,103,i):this.handleSelfSocketMsg(i,103);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.sendSecondMsgToMatch=function(){var e=r(n().mark((function e(t,r){var s,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=this.joinedMatchId,104,a=JSON.stringify({number:{value:t}}),u.isJoiner?this.socket.sendMatchState(s,104,a):this.handleSelfSocketMsg(a,104);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.sendSecondMsgToMatch1=function(){var e=r(n().mark((function e(t,r){var s,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=this.joinedMatchId,104,a=JSON.stringify({numbers:{value:t}}),u.isJoiner?this.socket.sendMatchState(s,104,a):this.handleSelfSocketMsg(a,104);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.sendMatchTime=function(){var e=r(n().mark((function e(t,r){var s,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=this.joinedMatchId,102,a=JSON.stringify({time:{minute:t,second:r}}),this.socket.sendMatchState(s,102,a);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.randomTreasureNumbers=function(){for(var e=[],t=0;e.length<5;t++){var r=Math.floor(100*Math.random());e.indexOf(r)<0&&e.push(r)}return e},s.updateUserBalanceInStorage=function(){var e=r(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.writeStorageObject("user",u.currentUser.id,u.currentUser,1);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.updateRoundDataStorageObject=function(){var e=r(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.roundData,r={id:t.id,period:t.period,winner:t.winner,duration:t.duration,startTime:t.startTime,numberPrice:t.numberPrice,jackpotPrize:t.jackpotPrize,boughtNumbers:t.boughtNumbers,jackpotNumber:t.jackpotNumber,treasurePrize:t.treasurePrize,treasureNumbers:t.treasureNumbers,remainTreasureNumbers:t.remainTreasureNumbers},e.next=4,this.writeStorageObject("round",this.joinedMatchId,r,2);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.getGameHistory=function(){var e=r(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.readMultipleStorageObjects("user_round",null==(t=this.session)?void 0:t.user_id),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.removeCurrentRoundObject=function(){var e=r(n().mark((function e(t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.removeObjectStorage("currentRound",t,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.randomJackpotNumber=function(){var e=r(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.random.org/json-rpc/4/invoke",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"generateIntegers",params:{apiKey:"9ba5879c-17ee-43aa-a471-c1ab02a355ed",n:1,min:0,max:99,replacement:!0},id:1})});case 3:return t=e.sent,e.next=6,t.json();case 6:return r=e.sent,console.log("success"),e.abrupt("return",r.result.random.data[0]);case 11:e.prev=11,e.t0=e.catch(0),console.log("Error in calling random.org API: "+e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),s.setEmailAsUsername=function(){var e=r(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.getAccount(this.session);case 2:e.sent.user.username!==t&&this.client.updateAccount(this.session,{username:t}).then((function(e){console.log("set email as username: "+e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.testXmlHttp=function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==this.readyState&&200==this.status&&console.log(e.responseText),this.status>=300&&console.log(e.response)},e.onerror=function(){console.log("Error occurred!")},e.open("POST","https://api.revpayment.io/v1/users/random_message",!1),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Client-ID","e1099b5e06354199a4cbcdf83f256751"),e.send()},t(e,[{key:"nClient",get:function(){return this.client}},{key:"session",get:function(){return this._session},set:function(e){this._session=e}},{key:"matchId",get:function(){return this.joinedMatchId}}]),e}())||h);s._RF.pop()}}}));

System.register("chunks:///_virtual/NotificationTab.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(t){"use strict";var i,o,e,n,r,c,a,s;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,c=t._decorator,a=t.Node},function(t){s=t.UIBase}],execute:function(){var u,l,p,f,y;r._RF.push({},"46745mzW7JPKpfhsw6fESxU","NotificationTab",void 0);var h=c.ccclass,b=c.property;t("NotificationTab",(u=h("NotificationTab"),l=b({type:a}),u((y=i((f=function(t){function i(){for(var i,o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return i=t.call.apply(t,[this].concat(r))||this,e(i,"closeButton",y,n(i)),i}o(i,t);var r=i.prototype;return r.start=function(){},r.update=function(t){},r.init=function(t){},r.onCloseButtonClick=function(){t.prototype.hide.call(this)},i}(s)).prototype,"closeButton",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),p=f))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/NumberBoughtTab.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StaticInstance.ts","./UIBase.ts","./DataStorage.ts","./Utils.ts","./index.ts"],(function(t){"use strict";var e,n,o,i,r,a,c,l,s,u,p,g,h,b,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Node,l=t.Label,s=t.UITransform,u=t.instantiate},function(t){p=t.StaticInstance},function(t){g=t.UIBase},function(t){h=t.DataStorage},function(t){b=t.Utils},function(t){f=t.getUserBoughtNumbersInMatch}],execute:function(){var d,m,y,B,C,v,T,N,I;r._RF.push({},"eddb4UFoqxCu4rLOsHsjtMZ","NumberBoughtTab",void 0);var L=a.ccclass,_=a.property,M=t("ITEM_MARGIN_BOTTOM",160);t("NumberBoughtTab",(d=L("NumberBoughtTab"),m=_({type:c}),y=_({type:c}),B=_({type:l}),d((T=e((v=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"closeButton",T,i(e)),o(e,"scrollContent",N,i(e)),o(e,"periodLabel",I,i(e)),e}n(e,t);var r=e.prototype;return r.init=function(){var t=this,e=h.getAccessToken();f(e,p.currentMatch.match_id).then((function(e){if(e){var n,o=null==(n=e.items)?void 0:n.map((function(t){return null==t?void 0:t.ticket_number}));console.log("You bought: ",o);var i=new Date,r=t.scrollContent.children[0],a=p.currentMatch.round_id;t.periodLabel.string="Period: "+(a<10?"0":"")+a.toString(),t.scrollContent.getComponent(s).height=160*o.length,o.forEach((function(e,n){var o=u(r);o.getChildByName("BottomlessButton").getChildByName("Label").getComponent(l).string=(e<10?"0":"")+e.toString(),o.getChildByName("TimeLabel").getComponent(l).string="10:25:30 - "+b.getDateAsString(i),o.setPosition(r.position.x,r.position.y-n*M),t.scrollContent.addChild(o)})),r.active=!1}}))},r.onCloseButtonClick=function(){t.prototype.hide.call(this)},e}(g)).prototype,"closeButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),N=e(v.prototype,"scrollContent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),I=e(v.prototype,"periodLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),C=v))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/NumberBox.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./StaticInstance.ts"],(function(e){"use strict";var t,r,n,a,o,i,s,c,u,m,l,h,p,f,b,g,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createClass},function(e){i=e.cclegacy,s=e._decorator,c=e.Node,u=e.SpriteFrame,m=e.Sprite,l=e.instantiate,h=e.Label,p=e.math,f=e.UIOpacity,b=e.Component},function(e){g=e.IBoxState},function(e){S=e.StaticInstance}],execute:function(){var d,x,F,y,E,_,A,L,M,N,v;i._RF.push({},"f6145Z36GtDiL/S5B72gl2v","NumberBox",void 0);var C=s.ccclass,G=s.property;e("NumberBox",(d=C("NumberBox"),x=G({type:c}),F=G({type:u}),y=G({type:u}),E=G({type:u}),d((L=t((A=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,n(t,"box",L,a(t)),n(t,"normalFrame",M,a(t)),n(t,"selectedFrame",N,a(t)),n(t,"treasureFrame",v,a(t)),t._currentState=g.NORMAL,t}r(t,e);var i=t.prototype;return i.init=function(e){this.box=e,this._currentState=g.NORMAL,this.treasureFrame=S.mainGameManager.firstBox.treasureSFrame,this.normalFrame=S.mainGameManager.firstBox.box.getComponent(m).spriteFrame},i.clone=function(){return l(this.box)},i.getPosition=function(){return this.box.getPosition()},i.setPosition=function(e){this.box.setPosition(e)},i.transform=function(e,t){this.box.children[0].getComponent(h).color=e,this.box.getComponent(m).spriteFrame=t},i.onClick=function(){var e=parseInt(this.box.children[0].getComponent(h).string),t=S.mainGameManager.boxes[e];switch(t.state){case g.NORMAL:t.state=g.SELECTED,this._currentState=g.SELECTED,this.transform(p.color(182,0,0,255),this.selectedFrame),S.mainGameManager._selectedNumbers.push(e);break;case g.SELECTED:t.state=g.NORMAL,this._currentState=g.NORMAL,this.transform(p.color(255,255,255,255),this.normalFrame),S.mainGameManager.removeSelectedNumber(e);break;case g.TREASURE:t.state=g.SELECTED,this._currentState=g.SELECTED,this.transform(p.color(182,0,0,255),this.selectedFrame),S.mainGameManager._selectedNumbers.push(e)}},i.checkAndRemoveSurroundArrows=function(e){var t=S.mainGameManager._selectedNumbers;e==t[t.length-1]&&S.mainGameManager.removeSurroundingArrows()},i.showSurroundArrows=function(e){S.mainGameManager.showSurroundArrows(e)},i.makeNormal=function(){this._currentState=g.NORMAL,this.box.getComponent(f).opacity=255,this.transform(p.color(255,255,255,255),this.normalFrame)},i.makeTreasure=function(e){void 0===e&&(e=!1),this._currentState=e?g.BOUGHT:g.TREASURE,this.transform(p.color(192,31,19,255),this.treasureFrame)},i.makeUnavailable=function(e){void 0===e&&(e=!1),e?this._currentState==g.BOUGHT&&(console.log("zzz"),this.transform(p.color(182,0,0,255),S.mainGameManager.boxes[0].selectedFrame),this.box.getComponent(f).opacity=255):(this._currentState=g.UNAVAILABLE,this.transform(p.color(255,255,255,255),this.normalFrame)),this.box.getComponent(f).opacity=e?190:100},o(t,[{key:"state",get:function(){return this._currentState},set:function(e){this._currentState=e}},{key:"treasureSFrame",get:function(){return this.treasureFrame}}]),t}(b)).prototype,"box",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),M=t(A.prototype,"normalFrame",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),N=t(A.prototype,"selectedFrame",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),v=t(A.prototype,"treasureFrame",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),_=A))||_));i._RF.pop()}}}));

System.register("chunks:///_virtual/NumberPricePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./UIBase.ts","./StaticInstance.ts","./index.ts","./DataStorage.ts","./Constant.ts"],(function(t){"use strict";var n,e,i,o,r,c,a,u,l,s,f,p,h,b,g,d,y,m;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.asyncToGenerator,c=t.regeneratorRuntime},function(t){a=t.cclegacy,u=t._decorator,l=t.Node,s=t.Label,f=t.director},function(t){p=t.UIType,h=t.IGameMode},function(t){b=t.UIBase},function(t){g=t.StaticInstance},function(t){d=t.getMatchData},function(t){y=t.DataStorage},function(t){m=t.MATCH}],execute:function(){var S,M,_,A,P,B,T,w,L,U,v,k,I;a._RF.push({},"63cdcXO/iJJFqHVNxWszeJ0","NumberPricePanel",void 0);var F=u.ccclass,N=u.property;t("NumberPricePanel",(S=F("NumberPricePanel"),M=N({type:l}),_=N({type:l}),A=N({type:l}),P=N({type:l}),B=N({type:s}),S((L=n((w=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return n=t.call.apply(t,[this].concat(r))||this,i(n,"oneUnitButton",L,o(n)),i(n,"twoUnitButton",U,o(n)),i(n,"tenUnitButton",v,o(n)),i(n,"backButton",k,o(n)),i(n,"notiLabel",I,o(n)),n._uiManager=void 0,n}e(n,t);var a=n.prototype;return a.onLoad=function(){t.prototype.onLoad.call(this),this.notiLabel.string=""},a.show=function(){t.prototype.show.call(this)},a.hide=function(){t.prototype.hide.call(this)},a.init=function(t){this._uiManager=t},a.onPriceSelect=function(){var t=r(c().mark((function t(n){var e,i;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g.numberPrice=n,e=(g.gameMode==h.FAST?"FAST_":"NORMAL_")+n.toString(),console.log(e);try{g.currentUser.balance>=n?(i=y.getAccessToken(),d(i,this.getMatchId(e)).then((function(t){console.log(t),null!=t&&t.match_id&&(g.currentMatch=t,g.startUIManager.closeAllWebSocket(),f.loadScene("main"))}))):this.notiLabel.string="Insufficient balance!"}catch(t){console.log("-- ERROR in joining match: "+t+" --")}case 4:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),a.onOneUnitButtonClick=function(){this.onPriceSelect(1)},a.onTwoUnitButtonClick=function(){this.onPriceSelect(2)},a.onTenUnitButtonClick=function(){this.onPriceSelect(10)},a.onBackButtonClick=function(){console.log("back pressed!"),this._uiManager.showUI([p.StartMenu])},a.checkMatchInfo=function(t){var n=g.gameMode==h.FAST?1:10;return(null==t?void 0:t.duration)==n&&(null==t?void 0:t.numberPrice)==g.numberPrice},a.getMatchId=function(t){switch(t){case"FAST_1":return m.FAST_1;case"FAST_2":return m.FAST_2;case"FAST_10":return m.FAST_10;case"NORMAL_1":return m.NORMAL_1;case"NORMAL_2":return m.NORMAL_2;default:return m.NORMAL_10}},n}(b)).prototype,"oneUnitButton",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),U=n(w.prototype,"twoUnitButton",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),v=n(w.prototype,"tenUnitButton",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),k=n(w.prototype,"backButton",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),I=n(w.prototype,"notiLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),T=w))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/OptionPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./StaticInstance.ts","./UIBase.ts","./DataStorage.ts"],(function(t){"use strict";var i,n,o,e,a,u,r,c,s,p,l,f,d,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){a=t.cclegacy,u=t._decorator,r=t.Node,c=t.SpriteFrame,s=t.Sprite},function(t){p=t.UIType,l=t.ICMContext},function(t){f=t.StaticInstance},function(t){d=t.UIBase},function(t){h=t.DataStorage}],execute:function(){var g,m,y,B,b,S,M,I,v,F,w;a._RF.push({},"a1349oJzB9Hrr6WvJ7vNabF","OptionPanel",void 0);var A=u.ccclass,C=u.property;t("OptionPanel",(g=A("OptionPanel"),m=C({type:r}),y=C({type:r}),B=C({type:r}),b=C({type:c}),g((I=i((M=function(t){function i(){for(var i,n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return i=t.call.apply(t,[this].concat(a))||this,o(i,"audioButton",I,e(i)),o(i,"logoutButton",v,e(i)),o(i,"backButton",F,e(i)),o(i,"secondAudioSprite",w,e(i)),i._uiManager=void 0,i}n(i,t);var a=i.prototype;return a.onLoad=function(){t.prototype.onLoad.call(this),f.muteMusic&&this.changeAudioIconSpriteFrame()},a.show=function(){t.prototype.show.call(this)},a.hide=function(){t.prototype.hide.call(this)},a.init=function(t){this._uiManager=t},a.onBackButtonClick=function(){this._uiManager.showUI([p.StartMenu])},a.onLogOutButtonClick=function(){this._uiManager.showConfirmationModal(l.LOGOUT)},a.onAudioButtonClick=function(){h.setIsMusicMute(!f.muteMusic),f.muteMusic=!f.muteMusic,this.changeAudioIconSpriteFrame()},a.changeAudioIconSpriteFrame=function(){if(this.audioButton){var t=this.audioButton.getComponent(s).spriteFrame;this.audioButton.getComponent(s).spriteFrame=this.secondAudioSprite,this.secondAudioSprite=t}},a.onSomeFunctionClick=function(){},i}(d)).prototype,"audioButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),v=i(M.prototype,"logoutButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),F=i(M.prototype,"backButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),w=i(M.prototype,"secondAudioSprite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),S=M))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/PeriodPicker.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,o,n,c,s,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,c=e._decorator,s=e.Node,a=e.Component}],execute:function(){var p,u,d,l,f;n._RF.push({},"d7f8e0cA4ZDw5NOYCPHwCyh","PeriodPicker",void 0);var y=c.ccclass,P=c.property;e("PeriodPicker",(p=y("PeriodPicker"),u=P({type:s}),p((f=t((l=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return t=e.call.apply(e,[this].concat(n))||this,i(t,"dropdownList",f,o(t)),t}r(t,e);var n=t.prototype;return n.start=function(){},n.update=function(e){},n.onDropdownClick=function(){this.dropdownList.active=!this.dropdownList.active},t}(a)).prototype,"dropdownList",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),d=l))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(t){"use strict";var n,o,i,e;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator},function(t){e=t.UIBase}],execute:function(){var a;o._RF.push({},"be95ap4JDJDibIR+4kYp++N","PlayButton",void 0);var r=i.ccclass;i.property,t("PlayButton",r("PlayButton")(a=function(t){function o(){for(var n,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this)._uiManager=void 0,n}n(o,t);var i=o.prototype;return i.onLoad=function(){t.prototype.onLoad.call(this)},i.show=function(){t.prototype.show.call(this)},i.hide=function(){t.prototype.hide.call(this)},i.init=function(t){this._uiManager=t},i.onClick=function(){this._uiManager.navigateMainScreen()},o}(e))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/ProfileTab.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StaticInstance.ts","./UIBase.ts","./Utils.ts"],(function(t){"use strict";var e,o,n,i,a,r,l,s,c,u,p,h,m,d,g,f,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.createClass},function(t){r=t.cclegacy,l=t._decorator,s=t.Node,c=t.UITransform,u=t.instantiate,p=t.Label,h=t.Sprite,m=t.math,d=t.EditBox},function(t){g=t.StaticInstance},function(t){f=t.UIBase},function(t){C=t.Utils}],execute:function(){var B,y,b,N,k,v,U,T,L,F,S,j,w,D,E,P,I;r._RF.push({},"5fbf1kaIiFBraw8dJ8akcOU","ProfileTab",void 0);var z=l.ccclass,_=l.property;t("ProfileTab",(B=z("ProfileTab"),y=_({type:s}),b=_({type:s}),N=_({type:s}),k=_({type:s}),v=_({type:s}),U=_({type:s}),T=_({type:s}),B((S=e((F=function(t){function e(){for(var e,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"closeButton",S,i(e)),n(e,"scrollContent",j,i(e)),n(e,"editNameButton",w,i(e)),n(e,"editPasswordButton",D,i(e)),n(e,"editCountryButton",E,i(e)),n(e,"jackpotButton",P,i(e)),n(e,"treasureButton",I,i(e)),e.emailUpdated=!1,e.currentType="jackpot",e.jackpotData=[],e.treasureData=[],e._isFromStartMenu=void 0,e}o(e,t);var r=e.prototype;return r.update=function(){this.emailUpdated||(this.updateEmailField(),this.updateUsernameField())},r.onLoad=function(){this.init()},r.init=function(t){},r.showDataList=function(){var t=this,e=0,o=this.scrollContent.children[0],n="jackpot"==this.currentType?this.jackpotData:this.treasureData;this.scrollContent.getComponent(c).height=160*n.length,n.forEach((function(n,i){var a=u(o);if("jackpot"==t.currentType){var r=n.jackpotNumber;a.getChildByName("BottomlessButton").getChildByName("Label").getComponent(p).string=(r<10?"0":"")+r.toString(),a.getChildByName("TimeLabel").getComponent(p).string="10:25:30 - "+C.getDateAsString(new Date(n.startTime)),a.setPosition(o.position.x,o.position.y-160*i),t.scrollContent.addChild(a)}else n.boughtTreasures.forEach((function(i,a){var r=u(o);r.getChildByName("BottomlessButton").getChildByName("Label").getComponent(p).string=(i<10?"0":"")+i.toString(),r.getChildByName("TimeLabel").getComponent(p).string="10:25:30 - "+C.getDateAsString(new Date(n.startTime)),r.setPosition(o.position.x,o.position.y-160*e),t.scrollContent.addChild(r),e++}))})),"treasure"==this.currentType&&(this.scrollContent.getComponent(c).height=160*(e+1)),0==n.length&&(this.scrollContent.getChildByName("EmptyLabel").active=!0),o.active=!1},r.onCloseButtonClick=function(){this._isFromStartMenu&&(g.startUIManager.balanceTabCloseCallback(),this._isFromStartMenu=void 0),t.prototype.hide.call(this)},r.onJackpotButtonClick=function(){this.currentType="jackpot",this.jackpotButton.getComponent(h).color=m.color("#ffffff"),this.jackpotButton.getChildByName("Label").getComponent(p).string="JACKPOT",this.jackpotButton.getChildByName("Label").getComponent(p).color=m.color("#ffffff"),this.treasureButton.getComponent(h).color=m.color("#F88326"),this.treasureButton.getChildByName("Label").getComponent(p).string="Treasure",this.treasureButton.getChildByName("Label").getComponent(p).color=m.color("#F88326"),this.cleanUpScrollContent(),this.showDataList()},r.onTreasureButtonClick=function(){this.currentType="treasure",this.treasureButton.getComponent(h).color=m.color("#ffffff"),this.jackpotButton.getChildByName("Label").getComponent(p).string="Jackpot",this.treasureButton.getChildByName("Label").getComponent(p).color=m.color("#ffffff"),this.jackpotButton.getComponent(h).color=m.color("#F88326"),this.treasureButton.getChildByName("Label").getComponent(p).string="TREASURE",this.jackpotButton.getChildByName("Label").getComponent(p).color=m.color("#F88326"),this.cleanUpScrollContent(),this.showDataList()},r.cleanUpScrollContent=function(){var t=this.scrollContent.getChildByName("EmptyLabel");this.scrollContent.children.forEach((function(e,o){e!=t?o>0?e.destroy():e.active=!0:t.active&&(t.active=!1)}))},r.updateEmailField=function(){var t,e,o=this.node.getChildByName("Content").getChildByName("Information").getChildByName("EmailField").getChildByName("EditBox").getComponent(d);o.enabled=!1,o.string=(null==(t=g.currentUser)?void 0:t.email)||"",null!=(e=g.currentUser)&&e.email&&(this.emailUpdated||(this.emailUpdated=!0))},r.updateUsernameField=function(){var t,e,o=this.node.getChildByName("Content").getChildByName("Information").getChildByName("NameGroup").getChildByName("EditBox").getComponent(d);o.enabled=!1,o.string=(null==(t=g.currentUser)?void 0:t.email)||"",null!=(e=g.currentUser)&&e.email&&(this.emailUpdated||(this.emailUpdated=!0))},a(e,[{key:"isFromStartMenu",set:function(t){this._isFromStartMenu=t}}]),e}(f)).prototype,"closeButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),j=e(F.prototype,"scrollContent",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),w=e(F.prototype,"editNameButton",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),D=e(F.prototype,"editPasswordButton",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),E=e(F.prototype,"editCountryButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),P=e(F.prototype,"jackpotButton",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),I=e(F.prototype,"treasureButton",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),L=F))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/ResultPopUp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StaticInstance.ts","./UIBase.ts","./Utils.ts"],(function(t){"use strict";var e,i,n,o,r,s,a,l,u,c,p,b,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Label,l=t.Node,u=t.instantiate,c=t.UITransform},function(t){p=t.StaticInstance},function(t){b=t.UIBase},function(t){h=t.Utils}],execute:function(){var g,f,m,y,d,v,N,L,_,C,P,U,w;r._RF.push({},"8d274q+TRhIZohOZjN5xF7j","ResultPopUp",void 0);var z=s.ccclass,I=s.property;t("ResultPopUp",(g=z("ResultPopUp"),f=I({type:a}),m=I({type:a}),y=I({type:l}),d=I({type:l}),v=I({type:a}),g((_=e((L=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"periodLabel",_,o(e)),n(e,"timeLabel",C,o(e)),n(e,"scrollContent",P,o(e)),n(e,"closeButton",U,o(e)),n(e,"noNumberLabel",w,o(e)),e._boughtNumbers=void 0,e}i(e,t);var r=e.prototype;return r.init=function(){this._boughtNumbers=p.mainGameManager._boughtNumbers;var t=p.currentMatch.round_id-1,e=new Date(p.currentMatch.begin_at);this.periodLabel.string=(t<10?"0":"")+t.toString(),this.timeLabel.string="10:00 - "+h.getDateAsString(e),this.displayNumbers()},r.onCloseButtonClick=function(){t.prototype.hide.call(this)},r.displayNumbers=function(){if(this._boughtNumbers.length>0){var t=[],e=0,i=0,n=this.scrollContent.children[0];t.push(n);for(var o=0;o<this._boughtNumbers.length;o++){i++;var r=t[t.length-1],s=r.getPosition(),l=u(r);l.active=!0,l.children[1].getComponent(a).string=this._boughtNumbers[o].toString(),o>0&&(6==i?(e++,i=1,l.setPosition(n.getPosition().x,s.y-144)):l.setPosition(s.x+164,s.y)),t.push(l),this.scrollContent.addChild(l)}this.scrollContent.getComponent(c).height=190*e}else this.noNumberLabel.node.active=!0},e}(b)).prototype,"periodLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),C=e(L.prototype,"timeLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),P=e(L.prototype,"scrollContent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),U=e(L.prototype,"closeButton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),w=e(L.prototype,"noNumberLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),N=L))||N));r._RF.pop()}}}));

System.register("chunks:///_virtual/StartMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./Enum.ts","./UIBase.ts","./DataStorage.ts","./StaticInstance.ts"],(function(t){"use strict";var n,e,i,o,a,c,s,r,l,u,f,h,g,p,b,d;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){c=t.cclegacy,s=t._decorator,r=t.Node,l=t.Label},function(t){u=t.getUserInfo,f=t.getUserBalance,h=t.PLATFORM_CLIENT_ID},function(t){g=t.ICMContext},function(t){p=t.UIBase},function(t){b=t.DataStorage},function(t){d=t.StaticInstance}],execute:function(){var m,B,y,S,w,v,k,M,C,_,N,W,O,L,J;c._RF.push({},"3f346b2kCtMFaLz1WnPrIlN","StartMenu",void 0);var T=s.ccclass,U=s.property;t("StartMenu",(m=T("StartMenu"),B=U({type:r}),y=U({type:r}),S=U({type:r}),w=U({type:r}),v=U({type:r}),k=U({type:r}),m((_=n((C=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];return n=t.call.apply(t,[this].concat(a))||this,i(n,"fastButton",_,o(n)),i(n,"normalButton",N,o(n)),i(n,"historyButton",W,o(n)),i(n,"walletButton",O,o(n)),i(n,"quitButton",L,o(n)),i(n,"optionButton",J,o(n)),n.ws=void 0,n.matchWs=void 0,n.currentBalance="",n.balanceWsSuccess=!1,n._uiManager=void 0,n}e(n,t);var c=n.prototype;return c.onLoad=function(){t.prototype.onLoad.call(this),this.getAndSubscribeBalance()},c.update=function(){var t,n;parseFloat(this.currentBalance)!=(null==(t=d.currentUser)?void 0:t.balance)&&(this.currentBalance=null==(n=d.currentUser)?void 0:n.balance.toString(),this.updateBalanceLabel(this.currentBalance))},c.show=function(){t.prototype.show.call(this)},c.hide=function(){t.prototype.hide.call(this)},c.init=function(t){this._uiManager=t},c.getAndSubscribeBalance=function(){var t=this,n=b.getAccessToken(),e=u(n).then((function(t){if(t&&t.id)return t})),i=f(n).then((function(t){if(t)return t}));Promise.all([e,i]).then((function(n){var e,i,o=n[0];d.currentUser={id:o.id,name:o.username,email:o.email,balance:0,firstName:o.first_name,lastName:o.last_name,username:o.username},d.currentUser.balance=null==(e=n[1])?void 0:e.balance,t.updateBalanceLabel(null==(i=n[1])?void 0:i.balance)})),this.ws=new WebSocket("wss://be.our-projects.org/cable?access_token="+n+"&client_id="+h),this.ws.onopen=function(){var n;console.log("Balance websocket connected");var e={command:"subscribe",identifier:JSON.stringify({channel:"UserNotification"})};null==(n=t.ws)||n.send(JSON.stringify(e));var i=setTimeout((function(){var n;t.balanceWsSuccess?(console.log("No need to reconnect!"),clearTimeout(i)):null==(n=t.ws)||n.send(JSON.stringify(e))}),5e3)},this.ws.onmessage=function(n){var e=JSON.parse(null==n?void 0:n.data);if(null!=e&&e.identifier&&(console.log(e),"UserNotification"==JSON.parse(e.identifier).channel&&e.message)){var i,o,a=(null==(i=JSON.parse(e.message))?void 0:i.balance)||0,c=(null==(o=JSON.parse(e.message))?void 0:o.type)||"";t.updateBalanceLabel(null==a?void 0:a.toString()),d.currentUser.balance=a,"match_result_win"==c&&d.startUIManager.showBingoDialog(JSON.parse(e.message).win_price)}null!=e&&e.type&&"ping"==(null==e?void 0:e.type)&&(t.balanceWsSuccess=!0)},this.ws.onclose=function(){console.log("Balance websocket closed")}},c.subscribeMatchWebSocket=function(){var t=this,n=b.getAccessToken();this.matchWs=new WebSocket("wss://be.our-projects.org/cable?access_token="+n+"&client_id="+h),this.matchWs.onopen=function(){var n;console.log("Match websocket connected");var e={command:"subscribe",identifier:JSON.stringify({channel:"MatchNotification"})};null==(n=t.matchWs)||n.send(JSON.stringify(e))},this.matchWs.onmessage=function(t){var n=JSON.parse(null==t?void 0:t.data);null!=n&&n.identifier&&(console.log(n),JSON.parse(n.identifier).channel)},this.matchWs.onclose=function(){console.log("Match websocket closed")}},c.onFastButtonClick=function(){this._uiManager.onFastButtonClick()},c.onNormalButtonClick=function(){this._uiManager.onNormalButtonClick()},c.onQuitButtonClick=function(){this._uiManager.showConfirmationModal(g.START)},c.onWalletButtonClick=function(){this._uiManager.showBalanceTab()},c.onHistoryButtonClick=function(){this._uiManager.showHistoryTab()},c.onOptionButtonClick=function(){this._uiManager.onOptionButtonClick()},c.onProfileButtonClick=function(){this._uiManager.onProfileButtonClick()},c.onRankingButtonClick=function(){this._uiManager.showComingSoonModal()},c.onFriendButtonClick=function(){this._uiManager.showComingSoonModal()},c.onEventButtonClick=function(){this._uiManager.showComingSoonModal()},c.closeWebSocket=function(){var t;null==(t=this.ws)||t.close()},c.updateBalanceLabel=function(t){this.node.getChildByName("TopStack").getChildByName("BalanceBar").getChildByName("Label").getComponent(l).string=null!=t?t:"-"},a(n,[{key:"balanceWebSocket",get:function(){return this.ws}},{key:"matchWebSocket",get:function(){return this.matchWs}}]),n}(p)).prototype,"fastButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),N=n(C.prototype,"normalButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),W=n(C.prototype,"historyButton",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),O=n(C.prototype,"walletButton",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),L=n(C.prototype,"quitButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),J=n(C.prototype,"optionButton",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),M=C))||M));c._RF.pop()}}}));

System.register("chunks:///_virtual/StaticInstance.ts",["cc","./NakamaClient.ts","./DataStorage.ts"],(function(a){"use strict";var n,t,e,i;return{setters:[function(a){n=a.cclegacy,t=a._decorator},function(a){e=a.NakamaClient},function(a){i=a.DataStorage}],execute:function(){var r,s;n._RF.push({},"e6c15HM9bBFn4r82OMYHEEV","StaticInstance",void 0);var o=t.ccclass;t.property,a("StaticInstance",o("StaticInstance")(((s=function(){function a(){}return a.setAuthUIManager=function(n){a.authUIManager=n},a.setStartUIManager=function(n){a.startUIManager=n},a.setMainUIManager=function(n){a.mainUIManager=n},a.setMainGameManager=function(n){a.mainGameManager=n},a.setLoadingUIManager=function(n){a.loadingUIManager=n},a.initNakamaClient=function(){this.nakamaClient||(this.nakamaClient=new e,a.isAuth=!!i.getAccessToken())},a.initCurrentUser=function(){var a=this;this.initNakamaClient();var n=this.nakamaClient.session.user_id;this.nakamaClient.readStorageObject("user",n,n).then((function(n){if(n&&n.length>0){var t,e=JSON.parse(JSON.stringify(null==(t=n[0])?void 0:t.value));a.currentUser=e,a.nakamaClient.updateBalanceFromWallet()}else console.log("-- GET USER STORAGE ERROR: no data --")}))},a}()).authUIManager=void 0,s.startUIManager=void 0,s.mainUIManager=void 0,s.mainGameManager=void 0,s.loadingUIManager=void 0,s.nakamaClient=void 0,s.currentUser={id:"0",name:"",email:"",balance:0,firstName:"",lastName:"",username:""},s.isAuth=void 0,s.balance=0,s.muteMusic=!1,s.gameMode=void 0,s.numberPrice=void 0,s.roundData=void 0,s.isJoiner=!1,s.donePreloading=!1,s.walletCreditUpdated="",s.currentMatch=void 0,r=s))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/SurroundArrows.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StaticInstance.ts"],(function(t){"use strict";var e,r,n,o,s,a,c,u;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator,o=t.Tween,s=t.tween,a=t.Vec3,c=t.Component},function(t){u=t.StaticInstance}],execute:function(){var i;r._RF.push({},"7a0afAbDO9DV7fu+2ci8f1I","SurroundArrows",void 0);var l=n.ccclass;n.property,t("SurroundArrows",l("SurroundArrows")(i=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r.prototype.onLoad=function(){var t=u.mainGameManager._treasureNumbers.length;o.stopAllByTarget(this.node),s(this.node).repeatForever(s(this.node).to(.5,{scale:new a(1.05,1.05)}).delay(.3).to(.5,{scale:new a(.95,.95)})).start(),s(this.node.getChildByName("HintText")).delay(t>0?2:0).to(0,{active:!1}).start()},r}(c))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/TopPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./Enum.ts","./UIBase.ts","./StaticInstance.ts","./index.ts","./DataStorage.ts"],(function(e){"use strict";var t,n,a,i,o,r,l,s,u,c,h,g,d,m,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createClass},function(e){r=e.cclegacy,l=e._decorator,s=e.Label,u=e.director},function(e){c=e.Utils},function(e){h=e.IGameMode},function(e){g=e.UIBase},function(e){d=e.StaticInstance},function(e){m=e.getUserBoughtNumbersInMatch},function(e){f=e.DataStorage}],execute:function(){var v,b,w,p,_,M,R,I,B,L,y,S,T,C,D;r._RF.push({},"4e17cSuwK5HCITCOcANirg5","TopPanel",void 0);var x=l.ccclass,U=l.property;e("TopPanel",(v=x("TopPanel"),b=U({type:s}),w=U({type:s}),p=U({type:s}),_=U({type:s}),M=U({type:s}),R=U({type:s}),v((L=t((B=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,a(t,"countdownLabel",L,i(t)),a(t,"totalTicketLabel",y,i(t)),a(t,"balanceLabel",S,i(t)),a(t,"periodLabel",T,i(t)),a(t,"dateLabel",C,i(t)),a(t,"nextGameCountdownLabel",D,i(t)),t._time=new Date,t._countdown=new Date,t._uiManager=void 0,t._gameIntervalRef=void 0,t._waitingIntervalRef=void 0,t._pendingData=!1,t}n(t,e);var r=t.prototype;return r.onLoad=function(){e.prototype.onLoad.call(this)},r.show=function(){e.prototype.show.call(this)},r.hide=function(){e.prototype.hide.call(this)},r.init=function(e){var t=this;this._uiManager=e,this.updateBalanceLabel(d.currentUser.balance),this.loadBoughtTickets(),this.hideRevealResultBox();var n=(new Date).getTime(),a=new Date(d.currentMatch.begin_at),i=new Date(d.currentMatch.ended_at).getTime(),o=Math.round(Math.abs((i-n)/1e3)),r=Math.floor(o/60),l=o%60;console.log("start: ",a.toLocaleString()),console.log("expire: ",new Date(i).toLocaleString()),console.log("now: ",new Date(n).toLocaleString()),this._time.setMinutes(r),this._time.setSeconds(l),this.countdownLabel.string="--:--",this.dateLabel.string=c.getDateAsString(this._time),this.periodLabel.string=(d.currentMatch.round_id<10?"0":"")+d.currentMatch.round_id.toString();var s=a.getSeconds()-new Date(n).getSeconds();if(n<a.getTime()&&s>0){var u;this._pendingData=!0,null==(u=d.mainUIManager)||u.toggleBuyButton(!1);var h=s;this.handleGameEnd(h)}else{var g;if(i-n>=0)this._pendingData=!1,this._gameIntervalRef=setInterval((function(){return t.countdown()}),1e3);else null==(g=d.mainUIManager)||g.toggleBuyButton(!1),this.restartRound()}},r.onNumberBoughtTabClick=function(){var e;null==(e=this._uiManager)||e.onNumberBoughtTabClick()},r.obBalanceTabClick=function(){this._uiManager.onBalanceTabClick()},r.loadBoughtTickets=function(){var e=this,t=f.getAccessToken();m(t,d.currentMatch.match_id).then((function(t){if(t){var n,a=(null==(n=t.items)?void 0:n.map((function(e){return null==e?void 0:e.ticket_number})))||[],i=t.total_items;e.totalTicketLabel.string=(i<10?"0":"")+i.toString(),d.mainGameManager._boughtNumbers=a,null==a||a.forEach((function(e){d.mainGameManager.handleMakeNumberBought(e)}))}}))},r.updateTotalTicketBought=function(e){this.totalTicketLabel.string=(e<10?"0":"")+e.toString()},r.updateBalanceLabel=function(e){this.balanceLabel.string=e.toString()},r.countdown=function(){var e=this._time.getTime();e-=1e3,this._time=new Date(e);var t=d.currentMatch.result||0,n="0"+this._time.getMinutes(),a=(this._time.getSeconds()<10?"0":"")+this._time.getSeconds();this._time.getMinutes()+this._time.getSeconds()==0?(clearInterval(this._gameIntervalRef),this.countdownLabel.string=n+":"+a,this.showRevealResultBox(t),d.mainUIManager.toggleBuyButton(!1),d.mainUIManager.showRoundResult(t),d.mainGameManager.showRestTreasureNumbers(),this.handleGameEnd()):this.countdownLabel.string=n+":"+a},r.showRevealResultBox=function(e){f.getAccessToken(),d.currentMatch},r.updateRevealResultNumber=function(e){var t=this.node.getChildByName("RevealResultBox");t.active=!0,t.children[0].getComponent(s).string=(e<10?"0":"")+e.toString()},r.hideRevealResultBox=function(){this.node.getChildByName("RevealResultBox").active=!1},r.restartRound=function(){d.currentUser.balance>0&&(this.hideRevealResultBox(),d.mainGameManager.restartRound(),d.mainUIManager.closeResultPopUp(),d.mainUIManager.toggleBuyButton(!0),d.mainUIManager.updateTopPanelTotalTicketBought(),d.mainGameManager.initDataFromServer(),d.mainUIManager.closeLoadingOverlay(),this.node.getChildByName("CountdownPanel").active=!1,this.node.getChildByName("MatchEndPanel").active=!1,this.init(this._uiManager))},r.countdownNextGame=function(){var e,t=null==(e=this._countdown)?void 0:e.getTime();t-=1e3,this._countdown=new Date(t);var n=(this._countdown.getSeconds()<10?"0":"")+this._countdown.getSeconds();0==this._countdown.getSeconds()?(clearInterval(this._waitingIntervalRef),this.nextGameCountdownLabel.string="00:"+n,d.mainUIManager.closeResultPopUp(),this.handleJoinNextPeriod()):(this._countdown.getSeconds(),this.nextGameCountdownLabel.string="00:"+n)},r.handleGameEnd=function(e){var t=this;void 0===e&&(e=10),this._countdown.setMinutes(0),this._countdown.setSeconds(e),this.nextGameCountdownLabel.string="00:"+(e<10?"0":"")+e.toString(),this.node.getChildByName("CountdownPanel").active=!0,this._waitingIntervalRef=setInterval((function(){return t.countdownNextGame()}),1e3)},r.updateTimeLabelWithMinSec=function(e,t){var n=(e<10?"0":"")+e.toString(),a=(t<10?"0":"")+t.toString(),i=d.currentMatch.result||0;e+t==0?(this.countdownLabel.string=n+":"+a,this.showRevealResultBox(i),d.mainUIManager.toggleBuyButton(!1),d.mainUIManager.showRoundResult(i),d.mainGameManager.showRestTreasureNumbers(),this.handleGameEnd()):this.countdownLabel.string=n+":"+a},r.handleJoinNextPeriod=function(){var e;console.log("--- joining next period ---"),null==(e=this._uiManager)||e.showLoadingOverlay();d.gameMode,h.FAST,d.numberPrice.toString();this._waitingIntervalRef&&clearInterval(this._waitingIntervalRef),this.restartRound()},r.showMatchEndPanel=function(){this.node.getChildByName("MatchEndPanel").active=!0},r.stopMatchCountdown=function(){this._gameIntervalRef&&clearInterval(this._gameIntervalRef),this._waitingIntervalRef&&clearInterval(this._waitingIntervalRef)},r.onQuit=function(){this._waitingIntervalRef&&clearInterval(this._waitingIntervalRef),this._gameIntervalRef&&clearInterval(this._gameIntervalRef),u.loadScene("start")},o(t,[{key:"isPendingData",get:function(){return this._pendingData}}]),t}(g)).prototype,"countdownLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),y=t(B.prototype,"totalTicketLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),S=t(B.prototype,"balanceLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),T=t(B.prototype,"periodLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),C=t(B.prototype,"dateLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),D=t(B.prototype,"nextGameCountdownLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),I=B))||I));r._RF.pop()}}}));

System.register("chunks:///_virtual/TreasureHunterPopUp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StaticInstance.ts","./UIBase.ts"],(function(e){"use strict";var t,r,n,i,o,a,s,u,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Label,u=e.Node},function(e){c=e.StaticInstance},function(e){l=e.UIBase}],execute:function(){var p,b,f,h,g,y,z,d,v;o._RF.push({},"c3b0fsoczdOsrKkchhUIHSb","TreasureHunterPopUp",void 0);var L=a.ccclass,m=a.property;e("TreasureHunterPopUp",(p=L("TreasureHunterPopUp"),b=m({type:s}),f=m({type:u}),h=m({type:s}),p((z=t((y=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"prizeLabel",z,i(t)),n(t,"closeButton",d,i(t)),n(t,"treasureNumbersLabel",v,i(t)),t}r(t,e);var o=t.prototype;return o.init=function(e){var t="";this.prizeLabel.string="$ "+(e.length*c.roundData.treasurePrize).toString();for(var r=0;r<e.length;r++)console.log(e[r]),t+=(e[r]<10?"0":"")+e[r].toString()+(r<e.length-1?"  ":"");this.treasureNumbersLabel.string=t},o.onCloseButtonClick=function(){e.prototype.hide.call(this)},t}(l)).prototype,"prizeLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),d=t(y.prototype,"closeButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),v=t(y.prototype,"treasureNumbersLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),g=y))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/TreasurePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(e){"use strict";var r,t,i,n,a,o,s,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Label},function(e){c=e.UIBase}],execute:function(){var l,u,p,f,h;a._RF.push({},"089594RYHpCG6lz2brrWFHw","TreasurePanel",void 0);var y=o.ccclass,d=o.property;e("TreasurePanel",(l=y("TreasurePanel"),u=d({type:s}),l((h=r((f=function(e){function r(){for(var r,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,i(r,"treasurePriceLabel",h,n(r)),r._uiManager=void 0,r}t(r,e);var a=r.prototype;return a.onLoad=function(){e.prototype.onLoad.call(this)},a.show=function(){e.prototype.show.call(this)},a.hide=function(){e.prototype.hide.call(this)},a.init=function(e){this._uiManager=e},r}(c)).prototype,"treasurePriceLabel",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),p=f))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/TreasureTab.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./UIBase.ts","./StaticInstance.ts"],(function(e){"use strict";var t,i,n,r,a,o,s,c,l,u,p,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Node,c=e.Label,l=e.instantiate},function(e){u=e.Utils},function(e){p=e.UIBase},function(e){b=e.StaticInstance}],execute:function(){var f,d,g,h,y,m,v,C,L,T,S;a._RF.push({},"d6a0aMKabtGsa3hSS76sC9j","TreasureTab",void 0);var B=o.ccclass,_=o.property;e("TreasureTab",(f=B("TreasureTab"),d=_({type:s}),g=_({type:s}),h=_({type:c}),y=_({type:c}),f((C=t((v=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"closeButton",C,r(t)),n(t,"numbersContainer",L,r(t)),n(t,"periodLabel",T,r(t)),n(t,"timeLabel",S,r(t)),t}i(t,e);var a=t.prototype;return a.init=function(e){var t=this,i=b.currentMatch,n=b.mainGameManager._boughtTreasures;this.timeLabel.string="10:00 - "+u.getDateAsString(new Date),this.periodLabel.string="Period: "+(i.round_id<10?"0":"")+i.round_id.toString(),n.forEach((function(e){var i=l(t.numbersContainer.children[0]);i.active=!0,i.getChildByName("Label").getComponent(c).string=e.toString(),t.numbersContainer.addChild(i)}))},a.onCloseButtonClick=function(){e.prototype.hide.call(this)},t}(p)).prototype,"closeButton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),L=t(v.prototype,"numbersContainer",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),T=t(v.prototype,"periodLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),S=t(v.prototype,"timeLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),m=v))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIBase.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,n,o,r,s,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Component}],execute:function(){var c,u,p,h,l;r._RF.push({},"261b3ze/IRNX5FMhHypv5kP","UIBase",void 0);var f=s.ccclass,d=s.property;t("UIBase",(c=f("UIBase"),u=d({displayName:"PROPERTY"}),c((l=e((h=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"isShowInit",l,o(e)),e}i(e,t);var r=e.prototype;return r.onLoad=function(){this.isShowInit?this.show():this.hide()},r.show=function(){this.node.active=!0},r.hide=function(){this.node.active=!1},r.update=function(t){},e}(a)).prototype,"isShowInit",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=h))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StaticInstance.ts","./Enum.ts","./TopPanel.ts","./BottomPanel.ts","./TreasurePanel.ts","./InsufficientBalanceModal.ts","./BingoPopUp.ts","./HistoryTab.ts","./ProfileTab.ts","./BalanceTab.ts","./TreasureTab.ts","./ResultPopUp.ts","./NotificationTab.ts","./NumberBoughtTab.ts","./TreasureHunterPopUp.ts","./ConfirmationModal.ts","./LoadingOverlay.ts","./DataStorage.ts","./index.ts"],(function(e){"use strict";var t,n,i,a,o,r,s,l,u,c,p,h,b,d,f,g,m,T,v,P,y,M,w,B,C,N,U,_,S,k,O,W;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createClass},function(e){r=e.cclegacy,s=e._decorator,l=e.Prefab,u=e.Node,c=e.AudioSource,p=e.instantiate,h=e.Component},function(e){b=e.StaticInstance},function(e){d=e.UIType,f=e.ICMContext},function(e){g=e.TopPanel},function(e){m=e.BottomPanel},function(e){T=e.TreasurePanel},function(e){v=e.InsufficientBalanceModal},function(e){P=e.BingoPopUp},function(e){y=e.HistoryTab},function(e){M=e.ProfileTab},function(e){w=e.BalanceTab},function(e){B=e.TreasureTab},function(e){C=e.ResultPopUp},function(e){N=e.NotificationTab},function(e){U=e.NumberBoughtTab},function(e){_=e.TreasureHunterPopUp},function(e){S=e.ConfirmationModal},function(e){k=e.LoadingOverlay},function(e){O=e.DataStorage},function(e){W=e.PLATFORM_CLIENT_ID}],execute:function(){var I,z,R,J,L,H,E,D,A,x,F,G,j,Z,K,q,Q,V,X,Y,$,ee,te,ne,ie,ae,oe,re,se,le,ue,ce,pe,he,be;r._RF.push({},"d4dfeZ/Ti9A1KE3TZlpfcdb","UIManager",void 0);var de=s.ccclass,fe=s.property;e("UIManager",(I=de("UIManager"),z=fe({type:l}),R=fe({type:l}),J=fe({type:l}),L=fe({type:l}),H=fe({type:l}),E=fe({type:l}),D=fe({type:l}),A=fe({type:l}),x=fe({type:l}),F=fe({type:l}),G=fe({type:l}),j=fe({type:l}),Z=fe({type:l}),K=fe({type:l}),q=fe({type:l}),Q=fe({type:u}),I((Y=t((X=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"topPanel",Y,a(t)),i(t,"bottomPanel",$,a(t)),i(t,"treasurePanel",ee,a(t)),i(t,"numberBoughtTab",te,a(t)),i(t,"balanceTab",ne,a(t)),i(t,"notificationTab",ie,a(t)),i(t,"treasureTab",ae,a(t)),i(t,"historyTab",oe,a(t)),i(t,"profileTab",re,a(t)),i(t,"resultPopUp",se,a(t)),i(t,"bingoPopUp",le,a(t)),i(t,"treasureHunterPopUp",ue,a(t)),i(t,"confirmationModal",ce,a(t)),i(t,"balanceInsufficientModal",pe,a(t)),i(t,"loadingOverlay",he,a(t)),i(t,"backButton",be,a(t)),t.uiMap=new Map,t._currentTab=void 0,t.balanceWs=void 0,t.matchWs=void 0,t.wsSuccess={balance:!1,match:!1},t.autoCloseWs=!0,t}n(t,e);var r=t.prototype;return r.update=function(){var e=b.muteMusic;this.node.parent.getComponent(c).volume=e?0:1},r.onLoad=function(){b.setMainUIManager(this),this.initTopPanel(),this.initBottomPanel(),this.initTreasurePanel(),this.subscribeWebSocket(),b.mainUIManager.showUI([d.TopPanel,d.BottomPanel,d.TreasurePanel])},r.subscribeWebSocket=function(){var e=this,t=O.getAccessToken();this.balanceWs=new WebSocket("wss://be.our-projects.org/cable?access_token="+t+"&client_id="+W),this.matchWs=new WebSocket("wss://be.our-projects.org/cable?access_token="+t+"&client_id="+W),this.balanceWs.onopen=function(){var t;console.log("Balance websocket connected");var n={command:"subscribe",identifier:JSON.stringify({channel:"UserNotification"})};null==(t=e.balanceWs)||t.send(JSON.stringify(n));var i=setTimeout((function(){var t,a;null!=(t=e.wsSuccess)&&t.balance?(console.log("No need to reconnect!"),clearTimeout(i)):null==(a=e.balanceWs)||a.send(JSON.stringify(n))}),5e3)},this.balanceWs.onmessage=function(t){var n=JSON.parse(null==t?void 0:t.data);if(null!=n&&n.identifier&&(console.log(n),"UserNotification"==JSON.parse(n.identifier).channel&&n.message)){var i,a,o=(null==(i=JSON.parse(n.message))?void 0:i.type)||"",r=(null==(a=JSON.parse(n.message))?void 0:a.balance)||0;e.updateTopPanelBalanceLabel(r),b.currentUser.balance=r,"match_result_win"==o&&(b.currentMatch.win_prize=JSON.parse(n.message).win_price||-1)}null!=n&&n.type&&"ping"==(null==n?void 0:n.type)&&(e.wsSuccess.balance=!0)},this.balanceWs.onclose=function(){console.log("Balance websocket closed")},this.matchWs.onopen=function(){var t;console.log("Match websocket connected");var n={command:"subscribe",identifier:JSON.stringify({channel:"MatchNotification"})};null==(t=e.matchWs)||t.send(JSON.stringify(n));var i=setTimeout((function(){var t,a;null!=(t=e.wsSuccess)&&t.match?(console.log("No need to reconnect match!"),clearTimeout(i)):null==(a=e.matchWs)||a.send(JSON.stringify(n))}),5e3)},this.matchWs.onmessage=function(t){var n=JSON.parse(null==t?void 0:t.data);if(null!=n&&n.identifier&&(console.log(n),"MatchNotification"==JSON.parse(n.identifier).channel&&n.message)){var i,a,o,r,s=(null==(i=JSON.parse(n.message))?void 0:i.state)||"",l=(null==(a=JSON.parse(n.message))?void 0:a.match_id)||0,u=(null==(o=JSON.parse(n.message))?void 0:o.type)||"",c=(null==(r=JSON.parse(n.message))?void 0:r.tickets)||"";if(l==b.currentMatch.match_id){if("playing"==s)console.log("--- update new round data ---"),b.currentMatch=JSON.parse(n.message),e.checkRestartFromPendingData();else if("ended"==s){var p;if("match_end"==u)b.currentMatch.result=(null==(p=JSON.parse(n.message))?void 0:p.result)||0,e.updateRevealBoxBingoNumber(b.currentMatch.result)}if("bought_tickets"==u)c.split(",").map((function(e){return+e})).forEach((function(e){b.mainGameManager.handleMakeNumberUnavailable(e)}))}}null!=n&&n.type&&"ping"==(null==n?void 0:n.type)&&(e.wsSuccess.match=!0)},this.matchWs.onclose=function(){console.log("Match websocket closed"),e.autoCloseWs&&e.subscribeWebSocket()}},r.closeAllWebSocket=function(){var e,t;this.autoCloseWs=!1,null==(e=this.balanceWs)||e.close(),null==(t=this.matchWs)||t.close()},r.checkRestartFromPendingData=function(){var e=this.uiMap.get(d.TopPanel);e.isPendingData&&e.restartRound()},r.showUI=function(e){this.uiMap.forEach((function(t,n){e.indexOf(n)>-1?null==t||t.show():null==t||t.hide()}))},r.initConfirmationModal=function(e){var t=p(this.confirmationModal);this.node.addChild(t);var n=t.getComponent(S);n.init(e),n.show()},r.initInsufficientBalanceModal=function(e){void 0===e&&(e="");var t=p(this.balanceInsufficientModal);this.node.addChild(t),t.getComponent(v).show(e)},r.initBottomPanel=function(){var e=p(this.bottomPanel);this.node.addChild(e),e.setPosition(0,0);var t=e.getComponent(m);t.init(this),this.uiMap.set(d.BottomPanel,t)},r.initTreasurePanel=function(){var e=p(this.treasurePanel);this.node.addChild(e);var t=e.getComponent(T);t.init(this),this.uiMap.set(d.TreasurePanel,t)},r.initTopPanel=function(){var e=p(this.topPanel);this.node.addChild(e);var t=e.getComponent(g);t.init(this),this.uiMap.set(d.TopPanel,t)},r.onNumberBoughtTabClick=function(){var e=p(this.numberBoughtTab);this.node.addChild(e);var t=e.getComponent(U);t.init(),t.show(),this._currentTab=d.NumberBoughtTab,this.uiMap.set(d.NumberBoughtTab,t)},r.onBalanceTabClick=function(){var e=p(this.balanceTab);this.node.addChild(e);var t=e.getComponent(w);t.init(),t.show(),this._currentTab=d.BalanceTab,this.uiMap.set(d.BalanceTab,t)},r.onNotificationTabClick=function(){var e=p(this.notificationTab);this.node.addChild(e);var t=e.getComponent(N);t.init(this),t.show(),this._currentTab=d.NotificationTab,this.uiMap.set(d.NotificationTab,t)},r.onTreasureTabClick=function(){var e=p(this.treasureTab);this.node.addChild(e);var t=e.getComponent(B);t.init(this),t.show(),this._currentTab=d.TreasureTab,this.uiMap.set(d.TreasureTab,t)},r.onHistoryTabClick=function(){var e=p(this.historyTab);this.node.addChild(e);var t=e.getComponent(y);t.show(),this._currentTab=d.HistoryTab,this.uiMap.set(d.HistoryTab,t)},r.onProfileTabClick=function(){var e=p(this.profileTab);this.node.addChild(e);var t=e.getComponent(M);t.init(this),t.show(),this._currentTab=d.ProfileTab,this.uiMap.set(d.ProfileTab,t)},r.onBackButtonClick=function(){this.showConfirmationModal(f.MAIN)},r.onBuyButtonClick=function(){var e=b.numberPrice,t=b.mainGameManager,n=t._selectedNumbers.length;n>0&&t.balance>=n*e?(t.onBuyButtonClick(),this.updateTopPanelTotalTicketBought()):(console.log("No numbers selected OR not enough balance!"),t.balance<n*e&&this.initInsufficientBalanceModal())},r.updateAfterBuying=function(){var e=b.numberPrice,t=b.mainGameManager,n=t._selectedNumbers.length*e,i=t.balance;t.balance=i-n,this.updateTopPanelBalanceLabel(i-n),this.updateTopPanelTotalTicketBought(),b.currentUser.balance=i-n},r.updateTopPanelTotalTicketBought=function(){var e=this.uiMap.get(d.TopPanel),t=b.mainGameManager._boughtNumbers.length;e.updateTotalTicketBought(t)},r.updateTopPanelBalanceLabel=function(e){this.uiMap.get(d.TopPanel).updateBalanceLabel(e)},r.updateRevealBoxBingoNumber=function(e){this.uiMap.get(d.TopPanel).updateRevealResultNumber(e)},r.toggleBuyButton=function(e){var t=this.uiMap.get(d.BottomPanel);null==t||t.toggleBuyButton(e)},r.showTreasureHunterPopUp=function(e){var t=p(this.treasureHunterPopUp);this.node.addChild(t);var n=t.getComponent(_);n.init(e),n.show(),this._currentTab=d.TreasureHunterPopUp,this.uiMap.set(d.TreasureHunterPopUp,n)},r.showResultPopUp=function(){var e=this,t=p(this.resultPopUp);this.node.addChild(t);var n=t.getComponent(C);n.init(),n.show(),null!=this._currentTab&&this.uiMap.forEach((function(t,n){n==e._currentTab&&(null==t||t.hide())})),this._currentTab=d.ResultPopUp,this.uiMap.set(d.ResultPopUp,n)},r.showBingoPopUp=function(){var e=this,t=p(this.bingoPopUp);this.node.addChild(t);var n=t.getComponent(P);n.init(),n.show(),n.winPrize=b.currentMatch.win_prize,null!=this._currentTab&&this.uiMap.forEach((function(t,n){n==e._currentTab&&(null==t||t.hide())})),this._currentTab=d.BingoPopUp,this.uiMap.set(d.BingoPopUp,n)},r.showLoadingOverlay=function(){var e=p(this.loadingOverlay);this.node.addChild(e);var t=e.getComponent(k);t.init(),t.show()},r.closeLoadingOverlay=function(){this.node.getChildByName("LoadingOverlay")&&(console.log("-- does have loading-overlay"),this.node.getChildByName("LoadingOverlay").destroy())},r.closeResultPopUp=function(){var e=this;this._currentTab!=d.BingoPopUp&&this._currentTab!=d.ResultPopUp||(this.uiMap.forEach((function(t,n){n==e._currentTab&&(null==t||t.hide())})),this._currentTab=void 0)},r.showRoundResult=function(e){b.mainGameManager._boughtNumbers.indexOf(e)>-1?this.showBingoPopUp():this.showResultPopUp()},r.showConfirmationModal=function(e){this.initConfirmationModal(e)},r.updateTimeLabelFromWS=function(e,t){this.uiMap.get(d.TopPanel).updateTimeLabelWithMinSec(e,t)},r.showMatchEndPanel=function(){this.uiMap.get(d.TopPanel).showMatchEndPanel()},r.stopMatchCountdown=function(){this.uiMap.get(d.TopPanel).stopMatchCountdown()},o(t,[{key:"topPanelComp",get:function(){return this.uiMap.get(d.TopPanel)}}]),t}(h)).prototype,"topPanel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),$=t(X.prototype,"bottomPanel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),ee=t(X.prototype,"treasurePanel",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),te=t(X.prototype,"numberBoughtTab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),ne=t(X.prototype,"balanceTab",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),ie=t(X.prototype,"notificationTab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),ae=t(X.prototype,"treasureTab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),oe=t(X.prototype,"historyTab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),re=t(X.prototype,"profileTab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),se=t(X.prototype,"resultPopUp",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),le=t(X.prototype,"bingoPopUp",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),ue=t(X.prototype,"treasureHunterPopUp",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),ce=t(X.prototype,"confirmationModal",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),pe=t(X.prototype,"balanceInsufficientModal",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),he=t(X.prototype,"loadingOverlay",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),be=t(X.prototype,"backButton",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),V=X))||V));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StartMenu.ts","./PlayButton.ts","./Enum.ts","./BalanceTab.ts","./NumberPricePanel.ts","./StaticInstance.ts","./OptionPanel.ts","./ConfirmationModal.ts","./DataStorage.ts","./HistoryTab.ts","./nakama-js.esm.mjs","./ProfileTab.ts","./ComingSoonModal.ts","./LoadingOverlay.ts","./BingoPopUp.ts"],(function(n){"use strict";var t,i,e,o,a,r,s,l,c,u,h,f,p,d,b,g,m,M,y,C,P,v,T,S,w,I,k,B,U;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.inheritsLoose,e=n.initializerDefineProperty,o=n.assertThisInitialized,a=n.asyncToGenerator,r=n.regeneratorRuntime},function(n){s=n.cclegacy,l=n._decorator,c=n.Prefab,u=n.AudioSource,h=n.director,f=n.instantiate,p=n.Component},function(n){d=n.StartMenu},function(n){b=n.PlayButton},function(n){g=n.UIType,m=n.IGameMode},function(n){M=n.BalanceTab},function(n){y=n.NumberPricePanel},function(n){C=n.StaticInstance},function(n){P=n.OptionPanel},function(n){v=n.ConfirmationModal},function(n){T=n.DataStorage},function(n){S=n.HistoryTab},function(n){w=n.Session},function(n){I=n.ProfileTab},function(n){k=n.ComingSoonModal},function(n){B=n.LoadingOverlay},function(n){U=n.BingoPopUp}],execute:function(){var O,D,N,A,z,L,x,F,H,R,E,_,j,W,G,Y,J,K,Z,q,Q,V,X,$,nn;s._RF.push({},"d79254JYFZDe7TmKd92L5gh","UIManager",void 0);var tn=l.ccclass,en=l.property;n("UIManager",(O=tn("UIManager"),D=en({type:c}),N=en({type:c}),A=en({type:c}),z=en({type:c}),L=en({type:c}),x=en({type:c}),F=en({type:c}),H=en({type:c}),R=en({type:c}),E=en({type:c}),_=en({type:c}),O((G=t((W=function(n){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,e(t,"playButton",G,o(t)),e(t,"startMenu",Y,o(t)),e(t,"numberPricePanel",J,o(t)),e(t,"profileTab",K,o(t)),e(t,"balanceTab",Z,o(t)),e(t,"historyTab",q,o(t)),e(t,"optionPanel",Q,o(t)),e(t,"loadingOverlay",V,o(t)),e(t,"confirmationModal",X,o(t)),e(t,"comingSoonModal",$,o(t)),e(t,"bingoDialog",nn,o(t)),t.uiMap=new Map,t}i(t,n);var s=t.prototype;return s.update=function(){var n=C.muteMusic;this.node.parent.getComponent(u).volume=n?0:1},s.onLoad=function(){C.setStartUIManager(this),h.preloadScene("main",(function(){return console.log("MAIN SCENE LOADED!")})),this.initStartMenu(),this.initOptionPanel(),C.muteMusic=T.getIsMusicMute(),this.navigateMainScreen()},s.loadSession=function(){var n=a(r().mark((function n(){var t,i,e;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=T.getAccessToken(),i=T.getRefreshToken(),!t||!i){n.next=30;break}if(!(e=w.restore(t,i)).isrefreshexpired((new Date).getTime())){n.next=23;break}return n.prev=5,C.initNakamaClient(),n.next=9,C.nakamaClient.nClient.sessionRefresh(e);case 9:e=n.sent,C.nakamaClient.session=e,C.initCurrentUser(),n.next=21;break;case 14:n.prev=14,n.t0=n.catch(5),console.log(n.t0),C.isAuth=!1,T.setAccessToken(""),T.setRefreshToken(""),h.loadScene("auth");case 21:n.next=28;break;case 23:console.log("--- Session expired ---"),C.isAuth=!1,T.setAccessToken(""),T.setRefreshToken(""),h.loadScene("auth");case 28:n.next=32;break;case 30:C.isAuth=!1,h.loadScene("auth");case 32:case"end":return n.stop()}}),n,null,[[5,14]])})));return function(){return n.apply(this,arguments)}}(),s.initPlayButton=function(){var n=f(this.playButton);this.node.addChild(n),n.setPosition(0,-330);var t=n.getComponent(b);t.init(this),this.uiMap.set(g.PlayButton,t)},s.initStartMenu=function(){var n=f(this.startMenu);this.node.addChild(n);var t=n.getComponent(d);t.init(this),this.uiMap.set(g.StartMenu,t)},s.initNumberPricePanel=function(){var n=f(this.numberPricePanel);this.node.addChild(n);var t=n.getComponent(y);t.init(this),this.uiMap.set(g.NumberPricePanel,t)},s.initBalanceTab=function(){var n=f(this.balanceTab);this.node.addChild(n);var t=n.getComponent(M);t.isFromStartMenu=!0,t.init(),this.uiMap.set(g.BalanceTab,t)},s.initHistoryTab=function(){var n=f(this.historyTab);this.node.addChild(n);var t=n.getComponent(S);t.isFromStartMenu=!0,this.uiMap.set(g.HistoryTab,t)},s.initProfileTab=function(){var n=f(this.profileTab);this.node.addChild(n);var t=n.getComponent(I);t.isFromStartMenu=!0,this.uiMap.set(g.ProfileTab,t)},s.initConfirmationModal=function(n){var t=f(this.confirmationModal);this.node.addChild(t);var i=t.getComponent(v);i.init(n),i.show()},s.initComingSoonModal=function(){var n=f(this.comingSoonModal);this.node.addChild(n),n.getComponent(k).show()},s.initBingoDialog=function(n){var t=f(this.bingoDialog);this.node.addChild(t);var i=t.getComponent(U);i.initFromStart(n),i.show()},s.initOptionPanel=function(){var n=f(this.optionPanel);this.node.addChild(n);var t=n.getComponent(P);t.init(this),this.uiMap.set(g.OptionPanel,t)},s.showLoadingOverlay=function(){var n=f(this.loadingOverlay);this.node.addChild(n);var t=n.getComponent(B);t.init(!0),t.show()},s.closeLoadingOverlay=function(){this.node.getChildByName("LoadingOverlay")&&this.node.getChildByName("LoadingOverlay").destroy()},s.showUI=function(n){this.uiMap.forEach((function(t,i){n.indexOf(i)>-1?null==t||t.show():null==t||t.hide()}))},s.navigateMainScreen=function(){console.log("Clicked PLAY!"),C.startUIManager.showUI([g.StartMenu])},s.onFastButtonClick=function(){C.gameMode=m.FAST,this.initNumberPricePanel(),C.startUIManager.showUI([g.NumberPricePanel])},s.onNormalButtonClick=function(){C.gameMode=m.NORMAL,this.initNumberPricePanel(),C.startUIManager.showUI([g.NumberPricePanel])},s.showBalanceTab=function(){this.initBalanceTab(),C.startUIManager.showUI([g.BalanceTab])},s.showHistoryTab=function(){this.initHistoryTab(),C.startUIManager.showUI([g.HistoryTab])},s.balanceTabCloseCallback=function(){C.startUIManager.showUI([g.StartMenu])},s.onOptionButtonClick=function(){this.showUI([g.OptionPanel])},s.showConfirmationModal=function(n){this.initConfirmationModal(n)},s.onProfileButtonClick=function(){this.initProfileTab(),C.startUIManager.showUI([g.ProfileTab])},s.showComingSoonModal=function(){this.initComingSoonModal()},s.showBingoDialog=function(n){this.initBingoDialog(n)},s.closeAllWebSocket=function(){var n,t,i=this.uiMap.get(g.StartMenu);null==(n=i.balanceWebSocket)||n.close(),null==(t=i.matchWebSocket)||t.close()},t}(p)).prototype,"playButton",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Y=t(W.prototype,"startMenu",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),J=t(W.prototype,"numberPricePanel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),K=t(W.prototype,"profileTab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Z=t(W.prototype,"balanceTab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),q=t(W.prototype,"historyTab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Q=t(W.prototype,"optionPanel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),V=t(W.prototype,"loadingOverlay",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),X=t(W.prototype,"confirmationModal",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),$=t(W.prototype,"comingSoonModal",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),nn=t(W.prototype,"bingoDialog",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),j=W))||j));s._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./DataStorage.ts","./StaticInstance.ts","./AuthenticationPanel.ts","./LoadingOverlay.ts"],(function(t){"use strict";var n,e,i,a,o,r,c,u,s,l,h,d,g,p,f,y;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,c=t.Prefab,u=t.AudioSource,s=t.instantiate,l=t.director,h=t.Component},function(t){d=t.UIType},function(t){g=t.DataStorage},function(t){p=t.StaticInstance},function(t){f=t.AuthenticationPanel},function(t){y=t.LoadingOverlay}],execute:function(){var v,M,A,m,I,P,S;o._RF.push({},"ebcbdjVFMZP/Ze1T6JkyBHZ","UIManager",void 0);var b=r.ccclass,C=r.property;t("UIManager",(v=b("UIManager"),M=C({type:c}),A=C({type:c}),v((P=n((I=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return n=t.call.apply(t,[this].concat(o))||this,i(n,"authenticationPanel",P,a(n)),i(n,"loadingOverlay",S,a(n)),n.hasCheckAuth=!1,n.uiMap=new Map,n}e(n,t);var o=n.prototype;return o.update=function(){var t=p.muteMusic;this.node.parent.getComponent(u).volume=t?0:1},o.onLoad=function(){this.checkAuth(),p.initNakamaClient(),p.setAuthUIManager(this),this.initAuthenticationPanel(),p.isAuth||p.authUIManager.showUI([d.AuthenticationPanel]),p.muteMusic=g.getIsMusicMute()},o.initAuthenticationPanel=function(){var t=s(this.authenticationPanel);this.node.addChild(t);var n=t.getComponent(f);n.init(this),this.uiMap.set(d.AuthenticationPanel,n)},o.showLoadingOverlay=function(){var t=s(this.loadingOverlay);this.node.addChild(t);var n=t.getComponent(y);n.init(!0),n.show()},o.closeLoadingOverlay=function(){this.node.getChildByName("LoadingOverlay")&&this.node.getChildByName("LoadingOverlay").destroy()},o.showUI=function(t){this.uiMap.forEach((function(n,e){t.indexOf(e)>-1?null==n||n.show():null==n||n.hide()}))},o.navigateStartScreen=function(){l.loadScene("start")},o.checkAuth=function(){var t=g.getAccessToken();p.isAuth=!!t,t&&this.navigateStartScreen()},n}(h)).prototype,"authenticationPanel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),S=n(I.prototype,"loadingOverlay",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),m=I))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager4.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataStorage.ts","./StaticInstance.ts"],(function(e){"use strict";var t,n,o,a,r,s,c,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,a=e.ProgressBar,r=e.director,s=e.Component},function(e){c=e.DataStorage},function(e){i=e.StaticInstance}],execute:function(){var l;n._RF.push({},"f552bZzBQlAG55Qlm7QECBL","UIManager",void 0);var u=o.ccclass;o.property,e("UIManager",u("UIManager")(l=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).validToken=!1,t}t(n,e);var o=n.prototype;return o.update=function(){this.node.getComponent(a).progress<1&&(this.node.getComponent(a).progress+=.0075),i.donePreloading&&r.loadScene(this.validToken?"start":"auth")},o.onLoad=function(){var e=c.getAccessToken();this.node.getComponent(a).progress=.5,e&&(this.validToken=!0,console.log("-- No need to authenitcate --")),i.isAuth=!!e,r.preloadScene(e?"start":"auth",this.finishScenePreloadCallback)},o.finishScenePreloadCallback=function(){i.donePreloading=!0,console.log("Next scene preloaded")},n}(s))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc"],(function(t){"use strict";var e,r;return{setters:[function(t){e=t.cclegacy,r=t._decorator}],execute:function(){var n;e._RF.push({},"69fb2eM4BlCnbQR155JIp9M","Utils",void 0);var i=r.ccclass;r.property,t("Utils",i("Utils")(n=function(){function t(){}return t.getDateAsString=function(t){var e=t.getDate(),r=t.getMonth()+1,n=t.getFullYear();return(e<10?"0":"")+e.toString()+"/"+(r<10?"0":"")+r.toString()+"/"+n},t.validateEmail=function(t){return String(t).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},t.sortHistoryDataWithTimeOrder=function(t,e){return null==t?void 0:t.sort((function(t,e){return new Date(e.create_time).getTime()-new Date(t.create_time).getTime()}))},t}())||n);e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});