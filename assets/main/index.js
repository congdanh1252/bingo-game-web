System.register("chunks:///_virtual/AuthenticationPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./UIBase.ts","./StaticInstance.ts"],(function(e){"use strict";var t,n,i,r,a,o,s,l,c,u,p,d,g,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.Node,u=e.Label,p=e.math},function(e){d=e.Utils},function(e){g=e.UIBase},function(e){f=e.StaticInstance}],execute:function(){var h,m,v,y,b,w,x,T,B,U,k,E,S;s._RF.push({},"7209djwfRJO2pc352Lvvcp6","AuthenticationPanel",void 0);var L=l.ccclass,_=l.property;e("AuthenticationPanel",(h=L("AuthenticationPanel"),m=_({type:c}),v=_({type:c}),y=_({type:c}),b=_({type:c}),w=_({type:u}),h((B=t((T=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"loginButton",B,r(t)),i(t,"signUpButton",U,r(t)),i(t,"emailField",k,r(t)),i(t,"passwordField",E,r(t)),i(t,"errorText",S,r(t)),t._uiManager=void 0,t._password=void 0,t}n(t,e);var s=t.prototype;return s.onLoad=function(){e.prototype.onLoad.call(this),this.errorText.string=""},s.show=function(){e.prototype.show.call(this)},s.hide=function(){e.prototype.hide.call(this)},s.init=function(e){this._uiManager=e},s.onLoginButtonClick=function(){console.log("Login clicked!"),this._uiManager.navigateStartScreen()},s.onPasswordChange=function(e){this._password=e},s.onSignUpButtonClick=function(){var e=this,t=this._password,n=this.emailField.getChildByName("EditBox").getChildByName("TEXT_LABEL").getComponent(u).string;this.validateInput(n,t)&&(f.authUIManager.showLoadingOverlay(),f.nakamaClient.authenticateWithEmail({email:n,password:t}).then(a(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(n),!n){t.next=9;break}return e.errorText.string="Success",e.errorText.color=p.color("#1dc35d"),t.next=6,e.checkUserDataObjectExist(n.user_id);case 6:e._uiManager.navigateStartScreen(),t.next=11;break;case 9:(null==n||null==n)&&(e.errorText.string="Action failed. Please try again!"),f.authUIManager.closeLoadingOverlay();case 11:case"end":return t.stop()}}),t)})))).catch((function(t){e.errorText.string=(null==t?void 0:t.toString())||""})))},s.validateInput=function(e,t){return e&&t?d.validateEmail(e)?!e.toLowerCase().includes("@demo")||(this.errorText.string="Email with @demo is invalid!",!1):(console.log("invalid email"),this.errorText.string="Invalid email format!",!1):(console.log("missing field!"),this.errorText.string="Please fill in both fields!",!1)},s.writeUserInfoToDatabase=function(e,t){var n={id:e,name:"",email:t,balance:200};f.nakamaClient.writeStorageObject("user",e,n,1).then((function(){f.currentUser=n}))},s.checkUserDataObjectExist=function(){var e=a(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.nakamaClient.readStorageObject("user",t,t).then(a(o().mark((function e(i){var r,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i&&i.length>0)){e.next=6;break}console.log("-- GET USER DATA: data exists --"),a=JSON.parse(JSON.stringify(null==(r=i[0])?void 0:r.value)),f.currentUser=a,e.next=10;break;case 6:return console.log("-- GET USER DATA ERROR: no data --"),s=n.emailField.getChildByName("EditBox").getChildByName("TEXT_LABEL").getComponent(u).string,e.next=10,n.writeUserInfoToDatabase(t,s);case 10:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}(g)).prototype,"loginButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),U=t(T.prototype,"signUpButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),k=t(T.prototype,"emailField",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),E=t(T.prototype,"passwordField",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),S=t(T.prototype,"errorText",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),x=T))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/BalanceTab.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StaticInstance.ts","./UIBase.ts"],(function(t){"use strict";var e,n,i,a,r,o,c,l,s,u,p,b,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.createClass,o=t.asyncToGenerator,c=t.regeneratorRuntime},function(t){l=t.cclegacy,s=t._decorator,u=t.Label,p=t.Node},function(t){b=t.StaticInstance},function(t){f=t.UIBase}],execute:function(){var h,y,d,g,B,m,v,w,S,k,C;l._RF.push({},"b0b148gyHVDC5V2hMCNAfto","BalanceTab",void 0);var M=s.ccclass,_=s.property;t("BalanceTab",(h=M("BalanceTab"),y=_({type:u}),d=_({type:p}),g=_({type:p}),B=_({type:p}),h((w=e((v=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,i(e,"balanceLabel",w,a(e)),i(e,"closeButton",S,a(e)),i(e,"depositButton",k,a(e)),i(e,"withdrawButton",C,a(e)),e._isFromStartMenu=void 0,e}n(e,t);var l=e.prototype;return l.init=function(){var t=o(c().mark((function t(){var e,n,i;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.balanceLabel.string=(null==(e=b.mainGameManager)||null==(n=e.balance)?void 0:n.toString())||(null==(i=b.currentUser)?void 0:i.balance.toString());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),l.onCloseButtonClick=function(){this._isFromStartMenu&&(b.startUIManager.balanceTabCloseCallback(),this._isFromStartMenu=void 0),t.prototype.hide.call(this)},l.onDepositButtonClick=function(){console.log("Deposit clicked!")},l.onWithdrawButtonClick=function(){console.log("Withdraw clicked!")},r(e,[{key:"isFromStartMenu",set:function(t){this._isFromStartMenu=t}}]),e}(f)).prototype,"balanceLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),S=e(v.prototype,"closeButton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),k=e(v.prototype,"depositButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),C=e(v.prototype,"withdrawButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),m=v))||m));l._RF.pop()}}}));

System.register("chunks:///_virtual/BingoPopUp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./StaticInstance.ts"],(function(t){"use strict";var n,e,i,o,r,a,c,l,s,u;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Node,l=t.Label},function(t){s=t.UIBase},function(t){u=t.StaticInstance}],execute:function(){var p,f,g,y,b,h,d;r._RF.push({},"8acf1ES27xJCb694xCVmeQt","BingoPopUp",void 0);var B=a.ccclass,P=a.property;t("BingoPopUp",(p=B("BingoPopUp"),f=P({type:c}),g=P({type:l}),p((h=n((b=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,i(n,"closeButton",h,o(n)),i(n,"bingoValue",d,o(n)),n}e(n,t);var r=n.prototype;return r.onLoad=function(){this.bingoValue.string="$ "+u.roundData.jackpotPrize.toString()},r.init=function(){},r.onCloseButtonClick=function(){t.prototype.hide.call(this),u.mainUIManager.showMatchEndPanel()},n}(s)).prototype,"closeButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),d=n(b.prototype,"bingoValue",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),y=b))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/BottomPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(t){"use strict";var i,o,n,e,r,a,u,c,l,s;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,u=t.Node,c=t.Button,l=t.Sprite},function(t){s=t.UIBase}],execute:function(){var p,f,y,B,b,h,g,k,m,C,d,_,v;r._RF.push({},"1f5aaLsrFRIkJviQg7108Gj","BottomPanel",void 0);var w=a.ccclass,M=a.property;t("BottomPanel",(p=w("BottomPanel"),f=M({type:u}),y=M({type:u}),B=M({type:u}),b=M({type:u}),h=M({type:u}),p((m=i((k=function(t){function i(){for(var i,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,n(i,"notificationButton",m,e(i)),n(i,"treasureButton",C,e(i)),n(i,"historyButton",d,e(i)),n(i,"profileButton",_,e(i)),n(i,"buyButton",v,e(i)),i._uiManager=void 0,i}o(i,t);var r=i.prototype;return r.onLoad=function(){t.prototype.onLoad.call(this)},r.show=function(){t.prototype.show.call(this)},r.hide=function(){t.prototype.hide.call(this)},r.init=function(t){this._uiManager=t},r.onNotificationButtonClick=function(){this._uiManager.onNotificationTabClick()},r.onTreasureButtonClick=function(){this._uiManager.onTreasureTabClick()},r.onHistoryButtonClick=function(){this._uiManager.onHistoryTabClick()},r.onProfileButtonClick=function(){this._uiManager.onProfileTabClick()},r.onBuyButtonClick=function(){this._uiManager.onBuyButtonClick()},r.toggleBuyButton=function(t){this.buyButton.getComponent(c).interactable=t,this.buyButton.getComponent(l).grayscale=!t},i}(s)).prototype,"notificationButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),C=i(k.prototype,"treasureButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),d=i(k.prototype,"historyButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),_=i(k.prototype,"profileButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),v=i(k.prototype,"buyButton",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),g=k))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/BoughtNumber.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,u,i;return{setters:[function(t){e=t.createClass},function(t){u=t.cclegacy,i=t._decorator}],execute:function(){var r;u._RF.push({},"fa78aW716xL6bJAqIYPhVsz","BoughtNumber",void 0);var n=i.ccclass;i.property,t("BoughtNumber",n("BoughtNumber")(r=function(){function t(){this._value=void 0,this._time=void 0}return e(t,[{key:"value",get:function(){return this._value},set:function(t){this._value=t}},{key:"time",get:function(){return this._time},set:function(t){this._time=t}}]),t}())||r);u._RF.pop()}}}));

System.register("chunks:///_virtual/ComingSoonModal.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(o){"use strict";var n,t,e,i;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy,e=o._decorator},function(o){i=o.UIBase}],execute:function(){var c;t._RF.push({},"47501nzkS5J85MJOYW+grZU","ComingSoonModal",void 0);var r=e.ccclass;e.property,o("ComingSoonModal",r("ComingSoonModal")(c=function(o){function t(){return o.apply(this,arguments)||this}n(t,o);var e=t.prototype;return e.onLoad=function(){o.prototype.onLoad.call(this)},e.show=function(){o.prototype.show.call(this)},e.hide=function(){o.prototype.hide.call(this)},e.onCancelClick=function(){this.node.destroy()},t}(i))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/ConfirmationModal.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NakamaClient.ts","./Enum.ts","./StaticInstance.ts","./UIBase.ts"],(function(t){"use strict";var e,n,o,i,a,r,s,c,u,l,f,p,h,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Label,c=t.Node,u=t.director,l=t.game},function(t){f=t.NakamaClient},function(t){p=t.ICMContext},function(t){h=t.StaticInstance},function(t){m=t.UIBase}],execute:function(){var d,g,y,b,C,k,w,M,I;a._RF.push({},"c090aSNp0ZEZaYUItGoaEw5","ConfirmationModal",void 0);var v=r.ccclass,L=r.property;t("ConfirmationModal",(d=v("ConfirmationModal"),g=L({type:s}),y=L({type:c}),b=L({type:c}),d((w=e((k=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"message",w,i(e)),o(e,"cancelButton",M,i(e)),o(e,"continueButton",I,i(e)),e._fromContext=void 0,e}n(e,t);var a=e.prototype;return a.onLoad=function(){t.prototype.onLoad.call(this)},a.show=function(){t.prototype.show.call(this)},a.hide=function(){t.prototype.hide.call(this)},a.init=function(t){switch(this._fromContext=t,t){case p.START:this.message.string="Are you sure to\nquit the game?";break;case p.MAIN:this.message.string="Are you sure to\ngo back to start menu?";break;case p.LOGOUT:this.message.string="Are you sure to\nlog out from this account?";break;default:this.message.string=""}},a.onCancelClick=function(){this.node.destroy()},a.onContinueClick=function(){switch(this._fromContext){case p.START:l.end();break;case p.MAIN:h.mainUIManager.stopMatchCountdown(),h.nakamaClient.leaveMatch(),u.loadScene("start");break;case p.LOGOUT:this.handleLogOut()}},a.handleLogOut=function(){(new f).logOutSession(),u.loadScene("auth")},e}(m)).prototype,"message",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),M=e(k.prototype,"cancelButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),I=e(k.prototype,"continueButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),C=k))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/Constant.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"38d11DFCn1Ma5f33tTt0ePX","Constant",void 0);t("CONSTANT",{NUMBER_BOX_SIZE:106,TICKET_PRICE:10,TREASURE_PRIZE:100,JACKPOT_PRIZE:1500});n._RF.pop()}}}));

System.register("chunks:///_virtual/DataStorage.ts",["cc"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.cclegacy,n=t.sys}],execute:function(){e._RF.push({},"e0d74+m3UhJaqvrLuA6P+hb","DataStorage",void 0);t("DataStorage",function(){function t(){}return t.setIsMusicMute=function(t){n.localStorage.setItem("IS_AUDIO_MUTE",JSON.stringify(t))},t.getIsMusicMute=function(){var t=n.localStorage.getItem("IS_AUDIO_MUTE");return!!t&&JSON.parse(t)},t.setAccessToken=function(t){n.localStorage.setItem("ACCESS_TOKEN",t)},t.getAccessToken=function(){var t=n.localStorage.getItem("ACCESS_TOKEN");return t||""},t.setRefreshToken=function(t){n.localStorage.setItem("REFRESH_TOKEN",t)},t.getRefreshToken=function(){var t=n.localStorage.getItem("REFRESH_TOKEN");return t||""},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Enum.ts",["cc"],(function(e){"use strict";var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){var n,o,t,i,r;e({IBoxState:void 0,ICMContext:void 0,IGameMode:void 0,INumberPrice:void 0,UIType:void 0}),a._RF.push({},"7688dUac2NK87QIhYnq4i0D","Enum",void 0),function(e){e[e.Home=0]="Home",e[e.PlayButton=1]="PlayButton",e[e.TopPanel=2]="TopPanel",e[e.BottomPanel=3]="BottomPanel",e[e.TreasurePanel=4]="TreasurePanel",e[e.NotificationTab=5]="NotificationTab",e[e.TreasureTab=6]="TreasureTab",e[e.HistoryTab=7]="HistoryTab",e[e.ProfileTab=8]="ProfileTab",e[e.NumberBoughtTab=9]="NumberBoughtTab",e[e.BalanceTab=10]="BalanceTab",e[e.ResultPopUp=11]="ResultPopUp",e[e.BingoPopUp=12]="BingoPopUp",e[e.StartMenu=13]="StartMenu",e[e.TreasureHunterPopUp=14]="TreasureHunterPopUp",e[e.AuthenticationPanel=15]="AuthenticationPanel",e[e.NumberPricePanel=16]="NumberPricePanel",e[e.ConfirmationModal=17]="ConfirmationModal",e[e.OptionPanel=18]="OptionPanel",e[e.LoadingOverlay=19]="LoadingOverlay",e[e.BalanceInsufficientModal=20]="BalanceInsufficientModal"}(n||(n=e("UIType",{}))),function(e){e[e.NORMAL=0]="NORMAL",e[e.SELECTED=1]="SELECTED",e[e.BOUGHT=2]="BOUGHT",e[e.TREASURE=3]="TREASURE",e[e.UNAVAILABLE=4]="UNAVAILABLE"}(o||(o=e("IBoxState",{}))),function(e){e[e.FAST=0]="FAST",e[e.NORMAL=1]="NORMAL"}(t||(t=e("IGameMode",{}))),function(e){e[e.ONE=0]="ONE",e[e.TWO=1]="TWO",e[e.TEN=2]="TEN"}(i||(i=e("INumberPrice",{}))),function(e){e[e.AUTH=0]="AUTH",e[e.START=1]="START",e[e.MAIN=2]="MAIN",e[e.LOGOUT=3]="LOGOUT"}(r||(r=e("ICMContext",{}))),a._RF.pop()}}}));

System.register("chunks:///_virtual/FullscreenPopUp.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,o=e.Component}],execute:function(){var c;n._RF.push({},"73733Egu3FFxJqzCpnIpphx","FullscreenPopUp",void 0);var p=r.ccclass;r.property,e("FullscreenPopUp",p("FullscreenPopUp")(c=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var r=n.prototype;return r.start=function(){},r.update=function(e){},n}(o))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./NumberBox.ts","./Constant.ts","./StaticInstance.ts"],(function(e){"use strict";var r,t,s,a,i,n,o,u,h,b,m,c,l,d,_;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,s=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.createClass},function(e){n=e.cclegacy,o=e._decorator,u=e.Prefab,h=e.Label,b=e.instantiate,m=e.Component},function(e){c=e.IBoxState},function(e){l=e.NumberBox},function(e){d=e.CONSTANT},function(e){_=e.StaticInstance}],execute:function(){var f,N,g,p,v,x,w;n._RF.push({},"b18f6mcVFBDGaTmPJizuw5R","GameManager",void 0);var T=o.ccclass,M=o.property,O=d.NUMBER_BOX_SIZE;e("GameManager",(f=T("GameManager"),N=M({type:l}),g=M({type:u}),f((x=r((v=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return r=e.call.apply(e,[this].concat(i))||this,s(r,"firstBox",x,a(r)),s(r,"surroundArrows",w,a(r)),r._balance=void 0,r._boxes=[],r._boughtNumbers=[],r._boughtTreasures=[],r._selectedNumbers=[],r._treasureNumbers=[],r._unavailableNumbers=[],r._arrowChildrenArr=[],r}t(r,e);var n=r.prototype;return n.randomizeBoughtNumber=function(){if(100-this._unavailableNumbers.length>0){var e=Math.floor(100*Math.random()),r=this._boxes[e].state;r!=c.NORMAL&&r!=c.SELECTED&&r!=c.TREASURE||(this._unavailableNumbers.push(e),this._boxes[e].makeUnavailable(!1),this._treasureNumbers.indexOf(e)>-1&&this.removeTreasureNumber(e),this._selectedNumbers.indexOf(e)>-1&&this.removeSurroundingArrows())}else console.log("Unschedules"),this.unschedule(this.randomizeBoughtNumber)},n.onLoad=function(){_.setMainGameManager(this),_.mainGameManager.balance=_.currentUser.balance,_.mainGameManager.initOneHundredNumberBoxes(),this.initDataFromServer()},n.initOneHundredNumberBoxes=function(){this._boxes.push(this.firstBox);for(var e=0;e<10;e++)for(var r=0==e?1:0;r<10;r++){var t=new l,s=this._boxes.length,a=this._boxes[s-1],i=a.getPosition(),n=a.clone();n.children[0].getComponent(h).string=(s<10?"0":"")+s.toString(),s>=10&&s%10==0?n.setPosition(this.firstBox.getPosition().x,i.y-O):n.setPosition(i.x+O,i.y),t.init(n),n.setSiblingIndex(0),this.node.addChild(n),this._boxes.push(t)}},n.onBuyButtonClick=function(){var e=this;_.nakamaClient.sendSelectedNumbersToMatch(this._selectedNumbers,!1);var r=setTimeout((function(){_.nakamaClient.sendSecondMsgToMatch1(e._selectedNumbers,!1),clearTimeout(r)}),300)},n.handleBuyOrderApproved=function(){var e=this,r=[],t=0,s=[],a=[],i=[];this._selectedNumbers.forEach((function(r,t){e._boxes[r].state=c.BOUGHT,e._boxes[r].makeUnavailable(!0),a.push(e.findNearestTreasureInfo(r));var s=e._treasureNumbers.indexOf(r)>0;if(s){var i=_.roundData.remainTreasureNumbers.indexOf(r);_.roundData.remainTreasureNumbers.splice(i,1)}_.nakamaClient.sendMatchData(r,s),_.roundData.boughtNumbers.push(r)})),_.isJoiner||_.nakamaClient.updateRoundDataStorageObject(),a.forEach((function(t){if(r.indexOf(t.treasure)<0&&e._selectedNumbers.indexOf(t.treasure)<0)r.push(t.treasure),s.push(t.number);else if(r.indexOf(t.treasure)>=0){var i=a[r.indexOf(t.treasure)];t.min<i.min&&(s.splice(s.indexOf(i.number),1),s.push(t.number))}})),s.forEach((function(r){e.showSurroundArrows(r)})),this._selectedNumbers.forEach((function(r){e._treasureNumbers.indexOf(r)>-1&&(t++,i.push(r),e._boxes[r].makeTreasure(!0),e.removeArrowsOfFoundTreasure(r))})),this._boughtTreasures=this._boughtTreasures.concat(i),t>0&&(this._balance+=t*_.roundData.treasurePrize,console.log(this._balance),_.mainUIManager.updateTopPanelBalanceLabel(this._balance),_.mainUIManager.showTreasureHunterPopUp(i)),_.mainUIManager.updateAfterBuying()},n.removeSurroundingArrows=function(){this.node.children[100]&&this.node.removeChild(this.node.children[100])},n.removeArrowsOfFoundTreasure=function(e){var r=this;this._arrowChildrenArr.forEach((function(t,s){e==t.treasureNumber&&(r.node.children[t.childIndex].active=!1)}))},n.removeSelectedNumber=function(e){var r=this._selectedNumbers.indexOf(e);this._selectedNumbers.splice(r,1)},n.removeTreasureNumber=function(e){var r=this._treasureNumbers.indexOf(e);this._treasureNumbers.splice(r,1)},n.updateBoughtAndSelectedNumbers=function(){var e=this;this._selectedNumbers.forEach((function(r){e._treasureNumbers.indexOf(r)>-1&&(e.removeTreasureNumber(r),console.log("Removed "+r))})),this._boughtNumbers=this._boughtNumbers.concat(this._selectedNumbers),this._selectedNumbers=[],this._unavailableNumbers=[].concat(this._boughtNumbers),this.saveUserCurrentRoundData()},n.showSurroundArrows=function(e){var r=b(this.surroundArrows),t=this.node.children[e].getPosition();r.setPosition(t.x,t.y),this.editArrowsByValue(r,e),this.node.addChild(r)},n.editArrowsByValue=function(e,r){for(var t=[],s=[],a=-1234,i=this._boxes[r],n=0;n<this._treasureNumbers.length;n++){var o=this._boxes[this._treasureNumbers[n]],u=Math.sqrt(Math.pow(o.getPosition().x-i.getPosition().x,2)+Math.pow(o.getPosition().y-i.getPosition().y,2));u>0?(s.push(u),(-1234==a||a>u)&&(a=u)):s.push(u)}for(var h=0;h<this._treasureNumbers.length;h++){var b=this._boxes[this._treasureNumbers[h]];if(this._treasureNumbers[h]!=r&&a==s[h]){var m=i.getPosition().x,c=i.getPosition().y,l=b.getPosition().x,d=b.getPosition().y;m==l?c<d?t.push("arrow_top"):t.push("arrow_bottom"):c==d?m<l?t.push("arrow_right"):t.push("arrow_left"):m>l?c<d?t.push("arrow_top_left"):t.push("arrow_bottom_left"):m<l&&(c<d?t.push("arrow_top_right"):t.push("arrow_bottom_right")),console.log({childIndex:this.node.children.length,treasureNumber:this._treasureNumbers[h]}),this._arrowChildrenArr.push({childIndex:this.node.children.length,treasureNumber:this._treasureNumbers[h]})}}["arrow_top","arrow_bottom","arrow_left","arrow_right","arrow_top_left","arrow_top_right","arrow_bottom_left","arrow_bottom_right"].forEach((function(r){if(t.indexOf(r)<0){var s=e.getChildByName(r);e.removeChild(s)}}))},n.randomizeTreasureNumber=function(){for(var e=0;this._treasureNumbers.length<5;e++){var r=Math.floor(100*Math.random());this._treasureNumbers.indexOf(r)<0&&(this._treasureNumbers.push(r),this._boxes[r].state=c.TREASURE)}console.log("Treasure numbers: "+this._treasureNumbers)},n.initDataFromServer=function(){var e,r=this;null==(e=_.roundData)||e.treasureNumbers.forEach((function(e){r._treasureNumbers.push(e),r._boxes[e].state=c.TREASURE})),_.roundData.boughtNumbers.forEach((function(e){r.handleMakeNumberUnavailable(e)}))},n.findNearestTreasureInfo=function(e){for(var r=-1,t=-1234,s=this._boxes[e],a=0;a<this._treasureNumbers.length;a++){var i=this._boxes[this._treasureNumbers[a]],n=Math.sqrt(Math.pow(i.getPosition().x-s.getPosition().x,2)+Math.pow(i.getPosition().y-s.getPosition().y,2));n>0&&(-1234==t||t>n)&&(r=a,t=n)}return{number:e,min:t,treasure:this._treasureNumbers[r]}},n.showRestTreasureNumbers=function(){for(var e=this;this.node.children[100];)this.node.removeChild(this.node.children[100]);this._treasureNumbers.forEach((function(r){e._boxes[r].makeTreasure(!1)}))},n.restartRound=function(){var e=this;this.node.children.forEach((function(r,t){t>0?r.destroy():(e.firstBox.state=c.NORMAL,e.firstBox.makeNormal())})),this._boxes=[],this._boughtNumbers=[],this._boughtTreasures=[],this._selectedNumbers=[],this._treasureNumbers=[],this._unavailableNumbers=[],_.mainGameManager.initOneHundredNumberBoxes()},n.handleMakeNumberUnavailable=function(e){var r=this._boxes[e].state;r!=c.NORMAL&&r!=c.SELECTED&&r!=c.TREASURE||(this._unavailableNumbers.push(e),this._boxes[e].makeUnavailable(!1),this._treasureNumbers.indexOf(e)>-1&&this.removeTreasureNumber(e),this._selectedNumbers.indexOf(e)>-1&&this.removeSurroundingArrows())},n.handleNumberBoughtEvent=function(e){var r;if(this.handleMakeNumberUnavailable(e.number.value),null!=e&&null!=(r=e.number)&&r.isTreasure){this.removeTreasureNumber(e.number.value);var t=_.roundData.remainTreasureNumbers.indexOf(e.number);_.roundData.remainTreasureNumbers.splice(t,1)}},n.saveUserCurrentRoundData=function(){var e=_.roundData,r=_.nakamaClient.matchId,t=this._boughtNumbers.indexOf(e.jackpotNumber)>-1,s=r,a={matchId:r,period:e.period,boughtJackpot:t,startTime:e.startTime,numberPrice:e.numberPrice,boughtNumbers:this._boughtNumbers,jackpotPrize:e.jackpotPrize,treasurePrize:e.treasurePrize,jackpotNumber:e.jackpotNumber,boughtTreasures:this._boughtTreasures};_.nakamaClient.writeStorageObject("user_round",s,a,1)},i(r,[{key:"boxes",get:function(){return this._boxes}},{key:"balance",get:function(){return this._balance},set:function(e){this._balance=e}}]),r}(m)).prototype,"firstBox",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),w=r(v.prototype,"surroundArrows",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),p=v))||p));n._RF.pop()}}}));

System.register("chunks:///_virtual/HistoryDateItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(t){"use strict";var e,i,n,r,o,a,l,s,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.Label,s=t.Node,u=t.instantiate},function(t){c=t.UIBase}],execute:function(){var d,p,m,g,h,f,y;o._RF.push({},"c2a0frF2XpPrbj88jaKmKpf","HistoryDateItem",void 0);var b=a.ccclass,v=a.property;t("HistoryDateItem",(d=b("HistoryDateItem"),p=v({type:l}),m=v({type:s}),d((f=e((h=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"dateLabel",f,r(e)),n(e,"firstItem",y,r(e)),e}i(e,t);var o=e.prototype;return o.onLoad=function(){t.prototype.onLoad.call(this)},o.show=function(){t.prototype.show.call(this)},o.hide=function(){t.prototype.hide.call(this)},o.init=function(t){var e,i,n=this,r=new Date(null==t?void 0:t.startTime),o=r.getDate().toString()+"/"+(r.getMonth()+1).toString()+"/"+r.getFullYear().toString();this.dateLabel.string="Period "+((null==t?void 0:t.period)<10?"0":"")+(null==t||null==(e=t.period)?void 0:e.toString())+" — "+o,null==t||null==(i=t.boughtNumbers)||i.forEach((function(e,i){var r,o=e==(null==t?void 0:t.jackpotNumber),a=(null==t||null==(r=t.boughtTreasures)?void 0:r.indexOf(e))>-1,l=o?"Jackpot":a?"Treasure":"                    ",s=o?(null==t?void 0:t.jackpotPrize)-(null==t?void 0:t.numberPrice):a?(null==t?void 0:t.treasurePrize)-(null==t?void 0:t.numberPrice):null==t?void 0:t.numberPrice;n.createNewNumberItem(e,i,l,s)})),this.firstItem.active=!1},o.createNewNumberItem=function(t,e,i,n){var r=u(this.firstItem);r.setPosition(0,this.firstItem.getPosition().y-140.375*e),r.getChildByName("Container").getChildByName("BottomlessButton").getChildByName("Label").getComponent(l).string=(t<10?"0":"")+t.toString(),r.getChildByName("Container").getChildByName("NumberTypeLabel").getComponent(l).string=i,r.getChildByName("Container").getChildByName("WinLossLabel").getComponent(l).string=(i.includes("a")?"+ ":"- ")+n.toString()+" $",this.node.addChild(r)},e}(c)).prototype,"dateLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),y=e(h.prototype,"firstItem",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),g=h))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/HistoryTab.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./UIBase.ts","./NumberBoughtTab.ts","./HistoryDateItem.ts","./StaticInstance.ts"],(function(t){"use strict";var e,n,i,o,r,a,s,l,c,u,h,m,f,g,p,b,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,s=t._decorator,l=t.Node,c=t.Prefab,u=t.instantiate,h=t.UITransform,m=t.Label},function(t){f=t.Utils},function(t){g=t.UIBase},function(t){p=t.ITEM_MARGIN_BOTTOM},function(t){b=t.HistoryDateItem},function(t){d=t.StaticInstance}],execute:function(){var y,v,C,T,I,B,_,D,M;a._RF.push({},"cf0aawaQX1JK6oubmPRCon2","HistoryTab",void 0);var H=s.ccclass,S=s.property,w=-84;t("HistoryTab",(y=H("HistoryTab"),v=S({type:l}),C=S({type:l}),T=S({type:c}),y((_=e((B=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"closeButton",_,o(e)),i(e,"scrollContent",D,o(e)),i(e,"dateItem",M,o(e)),e._isFromStartMenu=void 0,e}n(e,t);var a=e.prototype;return a.onLoad=function(){var t=this;d.nakamaClient.getGameHistory().then((function(e){return t.sortHistoryDataWithTimeOrder(e.objects)})).then((function(e){var n=0;null==e||e.forEach((function(e){if((null==e?void 0:e.value.boughtNumbers.length)>0){var i,o=u(t.dateItem),r=140*n;n+=(null==(i=e.value)?void 0:i.boughtNumbers.length)+1,o.setPosition(0,-r+w),t.scrollContent.addChild(o);var a=o.getComponent(b);a.init(e.value),a.show()}})),t.scrollContent.getComponent(h).height=140*n}))},a.init=function(){var t,e=this,n=new Date,i=this.scrollContent.children[0],o=(null==(t=d.mainGameManager)?void 0:t._boughtNumbers)||[];this.scrollContent.getComponent(h).height=158*(null==o?void 0:o.length),o.forEach((function(t,o){var r=u(i);r.getChildByName("BottomlessButton").getChildByName("Label").getComponent(m).string=(t<10?"0":"")+t.toString(),r.getChildByName("TimeLabel").getComponent(m).string="10:25:30 - "+f.getDateAsString(n),r.setPosition(i.position.x,i.position.y-o*p),e.scrollContent.addChild(r)})),i.active=!1},a.onCloseButtonClick=function(){this._isFromStartMenu&&(d.startUIManager.balanceTabCloseCallback(),this._isFromStartMenu=void 0),t.prototype.hide.call(this)},a.sortHistoryDataWithTimeOrder=function(t,e){return null==t?void 0:t.sort((function(t,e){return new Date(e.create_time).getTime()-new Date(t.create_time).getTime()}))},r(e,[{key:"isFromStartMenu",set:function(t){this._isFromStartMenu=t}}]),e}(g)).prototype,"closeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),D=e(B.prototype,"scrollContent",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),M=e(B.prototype,"dateItem",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),I=B))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/InsufficientBalanceModal.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(t){"use strict";var e,n,o,i,c,a,r,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){c=t.cclegacy,a=t._decorator,r=t.Node},function(t){l=t.UIBase}],execute:function(){var s,u,f,p,d;c._RF.push({},"468d3dNjVZPf77hgjY2FP82","InsufficientBalanceModal",void 0);var h=a.ccclass,y=a.property;t("InsufficientBalanceModal",(s=h("InsufficientBalanceModal"),u=y({type:r}),s((d=e((p=function(t){function e(){for(var e,n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return e=t.call.apply(t,[this].concat(c))||this,o(e,"cancelButton",d,i(e)),e}n(e,t);var c=e.prototype;return c.onLoad=function(){t.prototype.onLoad.call(this)},c.show=function(){t.prototype.show.call(this)},c.hide=function(){t.prototype.hide.call(this)},c.onCancelClick=function(){this.node.destroy()},e}(l)).prototype,"cancelButton",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),f=p))||f));c._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingOverlay.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(o){"use strict";var t,n,e,r;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,e=o._decorator},function(o){r=o.UIBase}],execute:function(){var a;n._RF.push({},"722750c5P9IY44S2o0b/h5a","LoadingOverlay",void 0);var c=e.ccclass;e.property,o("LoadingOverlay",c("LoadingOverlay")(a=function(o){function n(){return o.apply(this,arguments)||this}t(n,o);var e=n.prototype;return e.onLoad=function(){o.prototype.onLoad.call(this)},e.show=function(){o.prototype.show.call(this)},n}(r))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./UIManager2.ts","./AuthenticationPanel.ts","./UIManager3.ts","./GameManager.ts","./UIManager.ts","./BoughtNumber.ts","./NumberBox.ts","./SurroundArrows.ts","./NakamaClient.ts","./BottomPanel.ts","./InsufficientBalanceModal.ts","./TopPanel.ts","./TreasurePanel.ts","./BalanceTab.ts","./BingoPopUp.ts","./FullscreenPopUp.ts","./HistoryTab.ts","./NotificationTab.ts","./NumberBoughtTab.ts","./ProfileTab.ts","./ResultPopUp.ts","./TreasureHunterPopUp.ts","./TreasureTab.ts","./HistoryDateItem.ts","./PeriodPicker.ts","./Constant.ts","./Enum.ts","./StaticInstance.ts","./UIBase.ts","./UIManager4.ts","./ComingSoonModal.ts","./ConfirmationModal.ts","./LoadingOverlay.ts","./NumberPricePanel.ts","./OptionPanel.ts","./PlayButton.ts","./StartMenu.ts","./DataStorage.ts","./Utils.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/NakamaClient.ts",["./rollupPluginModLoBabelHelpers.js","cc","./nakama-js.esm.mjs","./Enum.ts","./DataStorage.ts","./StaticInstance.ts"],(function(e){"use strict";var t,r,n,s,a,i,o,c,u;return{setters:[function(e){t=e.createClass,r=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){s=e.cclegacy,a=e._decorator},function(e){i=e.Client},function(e){o=e.IGameMode},function(e){c=e.DataStorage},function(e){u=e.StaticInstance}],execute:function(){var h;s._RF.push({},"d38d1MI+8RGa6Xnq00O5BoW","NakamaClient",void 0);var d=a.ccclass;a.property,e("TEMP_USER_ID","68515a09-ae15-4ff7-96ff-b229e399b77f"),e("NakamaClient",d("NakamaClient")(h=function(){function e(){this.client=void 0,this.socket=void 0,this._session=void 0,this.joinedMatchId=void 0,this._buyOrders=[];for(var e=0;e<100;e++)this._buyOrders.push([]);this.client=new i("defaultkey","dashboard-ws.our-projects.org","443",!0)}var s=e.prototype;return s.initSocket=function(){var e=r(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.createSocket(!0);case 2:return this.socket=e.sent,!0,e.next=6,this.socket.connect(this._session,true);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.checkLiveRound=function(e,t){var r=new Date,n=new Date(e+60*t*1e3);return console.log("Round live?: "+(r<n)),r<n},s.authenticateWithEmail=function(){var e=r(n().mark((function e(t){var r,s,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.email,s=t.password,!0,e.next=5,this.client.authenticateEmail(r,s,true,"");case 5:return(a=e.sent)&&a.token&&(this._session=a,u.isAuth=!0,c.setAccessToken(a.token),c.setRefreshToken(a.refresh_token),this.setEmailAsUsername(r)),e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),s.logOutSession=function(){var e=r(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.isAuth=!1,c.setAccessToken(""),c.setRefreshToken("");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s.removeObjectStorage=function(){var e=r(n().mark((function e(t,r,s){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.deleteStorageObjects(this.session,{object_ids:[{collection:t,key:r}]});case 2:console.log("Object deleted!");case 3:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),s.writeStorageObject=function(){var e=r(n().mark((function e(t,r,s,a){var i,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[{collection:t,key:r,value:s,permission_read:a}],e.next=5,this.client.writeStorageObjects(this.session,i);case 5:o=e.sent,console.log("Write objects: "+o.acks[0].key);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r,n,s){return e.apply(this,arguments)}}(),s.readStorageObject=function(){var e=r(n().mark((function e(t,r,s){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.client.readStorageObjects(this.session,{object_ids:[{collection:t,key:r,user_id:s||this._session.user_id}]});case 3:return a=e.sent,console.log("Read objects: %o",a.objects),e.abrupt("return",a.objects);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),s.readMultipleStorageObjects=function(){var e=r(n().mark((function e(t,r){var s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 100,e.next=3,this.client.listStorageObjects(this._session,t,r,100,"");case 3:return s=e.sent,console.log("List objects: %o",s.objects),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.getRoomStorageObject=function(){var e=r(n().mark((function e(t){var r,s,a,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=4,this.client.listStorageObjects(this._session,"currentRound",null,100);case 4:for(s=e.sent,console.log("room length: "+s.objects.length),a=0;a<s.objects.length;a++)(i=s.objects[a]).key==t&&r.push({value:i.value,creatorId:i.user_id,version:i.version,updatedAt:new Date(i.update_time)});return r=r.sort((function(e,t){return t.updatedAt-e.updatedAt})),e.abrupt("return",r[0]);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.getRoundDataStorageObject=function(){var e=r(n().mark((function e(t,r){var s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.readStorageObject("round",t,r);case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.createMatch=function(){var e=r(n().mark((function e(t){var r,s,a,i,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initSocket();case 2:return e.next=4,this.socket.createMatch();case 4:return r=e.sent,s=u.numberPrice,a=u.gameMode==o.FAST?1:10,i=(1==a?"FAST_":"NORMAL_")+s.toString(),c={status:"live",period:t,duration:a,matchId:r.match_id,numberPrice:s,createdAt:(new Date).getTime()},this.joinedMatchId=r.match_id,console.log(r.match_id),e.next=13,this.writeStorageObject("currentRound",i,c,2);case 13:return e.next=15,this.createRoundStorageObject(r.match_id,t);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.createRoundStorageObject=function(){var e=r(n().mark((function e(t,r){var s,a,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=this.randomTreasureNumbers(),e.next=3,this.randomJackpotNumber();case 3:return a=e.sent,i={id:108,winner:"",period:r,jackpotNumber:a,treasureNumbers:s,remainTreasureNumbers:s,startTime:(new Date).getTime(),numberPrice:u.numberPrice,boughtNumbers:this.randomTreasureNumbers(),treasurePrize:2*u.numberPrice,jackpotPrize:70*u.numberPrice,duration:u.gameMode==o.FAST?1:10},e.next=7,this.writeStorageObject("round",t,i,2);case 7:u.roundData=JSON.parse(JSON.stringify(i));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.joinMatch=function(){var e=r(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.socket){e.next=3;break}return e.next=3,this.initSocket();case 3:if(!t){e.next=8;break}return this.joinedMatchId=t,e.next=7,this.socket.joinMatch(t);case 7:e.sent;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.leaveMatch=function(){var e=r(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.socket.leaveMatch(this.joinedMatchId);case 2:console.log("Left match!");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.handleSelfSocketMsg=function(e,t){var r=this,n=JSON.parse(e);if(103==t)n.numbers.value.forEach((function(e){var t;r._buyOrders[e].push({number:e,time:null==n||null==(t=n.numbers)?void 0:t.time,userId:r.session.user_id}),r._buyOrders[e]=r._buyOrders[e].sort((function(e,t){return e.time-t.time})),console.log(r._buyOrders[e])}));else if(104==t){var s=[];n.numbers.value.forEach((function(e){r._buyOrders[e].length>0&&r._buyOrders[e][0].userId==r.session.user_id?s.push(e):console.log("Self buy order rejected: "+e)})),u.mainGameManager._selectedNumbers=s,u.mainGameManager.handleBuyOrderApproved()}},s.initSocketListener=function(){var e=r(n().mark((function e(){var t=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.socket){e.next=3;break}return e.next=3,this.initSocket();case 3:this.socket.onmatchdata=function(e){var r=e.data,n=(new TextDecoder).decode(r),s=JSON.parse(n);switch(e.op_code){case 101:console.log("A custom opcode.");break;case 102:break;case 103:u.isJoiner||s.numbers.value.forEach((function(r){var n;t._buyOrders[r].push({number:r,time:null==s||null==(n=s.numbers)?void 0:n.time,userId:e.presence.user_id}),t._buyOrders[r]=t._buyOrders[r].sort((function(e,t){return e.time-t.time})),console.log(t._buyOrders[r])}));break;case 104:if(!u.isJoiner){var a=[];s.numbers.value.forEach((function(r){t._buyOrders[r].length>0&&t._buyOrders[r][0].userId==e.presence.user_id?a.push(r):console.log("Buy order rejected: "+r)})),t.socket.sendMatchState(t.joinedMatchId,105,JSON.stringify({data:{numbers:a,userId:e.presence.user_id}}))}break;case 105:s.data.userId==t.session.user_id&&(u.mainGameManager._selectedNumbers=s.data.numbers,u.mainGameManager.handleBuyOrderApproved());break;default:console.log("a user just bought %o",e.presence.user_id,n),u.mainGameManager.handleNumberBoughtEvent(s),u.roundData.boughtNumbers.push(s.number.value),u.isJoiner||t.updateRoundDataStorageObject()}};case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.sendMatchData=function(){var e=r(n().mark((function e(t,r){var s,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=this.joinedMatchId,1,a=JSON.stringify({number:{value:t,isTreasure:r||!1}}),this.socket.sendMatchState(s,1,a);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.sendSelectedNumberToMatch=function(){var e=r(n().mark((function e(t,r){var s,a,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=this.joinedMatchId,103,a=(new Date).getTime(),i=JSON.stringify({number:{value:t,time:a}}),u.isJoiner?this.socket.sendMatchState(s,103,i):this.handleSelfSocketMsg(i,103);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.sendSelectedNumbersToMatch=function(){var e=r(n().mark((function e(t,r){var s,a,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=this.joinedMatchId,103,a=(new Date).getTime(),i=JSON.stringify({numbers:{value:t,time:a}}),u.isJoiner?this.socket.sendMatchState(s,103,i):this.handleSelfSocketMsg(i,103);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.sendSecondMsgToMatch=function(){var e=r(n().mark((function e(t,r){var s,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=this.joinedMatchId,104,a=JSON.stringify({number:{value:t}}),u.isJoiner?this.socket.sendMatchState(s,104,a):this.handleSelfSocketMsg(a,104);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.sendSecondMsgToMatch1=function(){var e=r(n().mark((function e(t,r){var s,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=this.joinedMatchId,104,a=JSON.stringify({numbers:{value:t}}),u.isJoiner?this.socket.sendMatchState(s,104,a):this.handleSelfSocketMsg(a,104);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.sendMatchTime=function(){var e=r(n().mark((function e(t,r){var s,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=this.joinedMatchId,102,a=JSON.stringify({time:{minute:t,second:r}}),this.socket.sendMatchState(s,102,a);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.randomTreasureNumbers=function(){for(var e=[],t=0;e.length<5;t++){var r=Math.floor(100*Math.random());e.indexOf(r)<0&&e.push(r)}return e},s.updateUserBalanceInStorage=function(){var e=r(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.writeStorageObject("user",u.currentUser.id,u.currentUser,1);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.updateRoundDataStorageObject=function(){var e=r(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.roundData,r={id:t.id,period:t.period,winner:t.winner,duration:t.duration,startTime:t.startTime,numberPrice:t.numberPrice,jackpotPrize:t.jackpotPrize,boughtNumbers:t.boughtNumbers,jackpotNumber:t.jackpotNumber,treasurePrize:t.treasurePrize,treasureNumbers:t.treasureNumbers,remainTreasureNumbers:t.remainTreasureNumbers},e.next=4,this.writeStorageObject("round",this.joinedMatchId,r,2);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.getGameHistory=function(){var e=r(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.readMultipleStorageObjects("user_round",this.session.user_id),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.removeCurrentRoundObject=function(){var e=r(n().mark((function e(t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.removeObjectStorage("currentRound",t,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),s.randomJackpotNumber=function(){var e=r(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.random.org/json-rpc/4/invoke",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"generateIntegers",params:{apiKey:"9ba5879c-17ee-43aa-a471-c1ab02a355ed",n:1,min:0,max:99,replacement:!0},id:1})});case 3:return t=e.sent,e.next=6,t.json();case 6:return r=e.sent,console.log("success"),e.abrupt("return",r.result.random.data[0]);case 11:e.prev=11,e.t0=e.catch(0),console.log("Error in calling random.org API: "+e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),s.setEmailAsUsername=function(){var e=r(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.getAccount(this.session);case 2:e.sent.user.username!==t&&this.client.updateAccount(this.session,{username:t}).then((function(e){console.log("set email as username: "+e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.testXmlHttp=function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==this.readyState&&200==this.status&&console.log(e.responseText),this.status>=300&&console.log(e.response)},e.onerror=function(){console.log("Error occurred!")},e.open("POST","https://api.revpayment.io/v1/users/random_message",!1),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Client-ID","e1099b5e06354199a4cbcdf83f256751"),e.send()},t(e,[{key:"nClient",get:function(){return this.client}},{key:"session",get:function(){return this._session},set:function(e){this._session=e}},{key:"matchId",get:function(){return this.joinedMatchId}}]),e}())||h);s._RF.pop()}}}));

System.register("chunks:///_virtual/NotificationTab.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(t){"use strict";var i,o,e,n,r,c,a,s;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,c=t._decorator,a=t.Node},function(t){s=t.UIBase}],execute:function(){var u,l,p,f,y;r._RF.push({},"46745mzW7JPKpfhsw6fESxU","NotificationTab",void 0);var h=c.ccclass,b=c.property;t("NotificationTab",(u=h("NotificationTab"),l=b({type:a}),u((y=i((f=function(t){function i(){for(var i,o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return i=t.call.apply(t,[this].concat(r))||this,e(i,"closeButton",y,n(i)),i}o(i,t);var r=i.prototype;return r.start=function(){},r.update=function(t){},r.init=function(t){},r.onCloseButtonClick=function(){t.prototype.hide.call(this)},i}(s)).prototype,"closeButton",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),p=f))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/NumberBoughtTab.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StaticInstance.ts","./UIBase.ts","./Utils.ts"],(function(t){"use strict";var e,n,i,o,r,a,l,s,c,u,p,g,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Node,s=t.Label,c=t.UITransform,u=t.instantiate},function(t){p=t.StaticInstance},function(t){g=t.UIBase},function(t){b=t.Utils}],execute:function(){var h,d,f,m,y,B,C,v,N;r._RF.push({},"eddb4UFoqxCu4rLOsHsjtMZ","NumberBoughtTab",void 0);var T=a.ccclass,L=a.property,I=t("ITEM_MARGIN_BOTTOM",160);t("NumberBoughtTab",(h=T("NumberBoughtTab"),d=L({type:l}),f=L({type:l}),m=L({type:s}),h((C=e((B=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"closeButton",C,o(e)),i(e,"scrollContent",v,o(e)),i(e,"periodLabel",N,o(e)),e}n(e,t);var r=e.prototype;return r.init=function(){var t=this,e=new Date,n=this.scrollContent.children[0],i=p.mainGameManager._boughtNumbers,o=p.roundData.period;this.periodLabel.string="Period: "+(o<10?"0":"")+o.toString(),this.scrollContent.getComponent(c).height=160*i.length,i.forEach((function(i,o){var r=u(n);r.getChildByName("BottomlessButton").getChildByName("Label").getComponent(s).string=(i<10?"0":"")+i.toString(),r.getChildByName("TimeLabel").getComponent(s).string="10:25:30 - "+b.getDateAsString(e),r.setPosition(n.position.x,n.position.y-o*I),t.scrollContent.addChild(r)})),n.active=!1},r.onCloseButtonClick=function(){t.prototype.hide.call(this)},e}(g)).prototype,"closeButton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),v=e(B.prototype,"scrollContent",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),N=e(B.prototype,"periodLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),y=B))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/NumberBox.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./StaticInstance.ts"],(function(e){"use strict";var t,r,n,a,o,i,s,c,u,m,l,h,p,f,b,g,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createClass},function(e){i=e.cclegacy,s=e._decorator,c=e.Node,u=e.SpriteFrame,m=e.Sprite,l=e.instantiate,h=e.Label,p=e.math,f=e.UIOpacity,b=e.Component},function(e){g=e.IBoxState},function(e){S=e.StaticInstance}],execute:function(){var d,F,x,y,E,A,L,N,_,v,M;i._RF.push({},"f6145Z36GtDiL/S5B72gl2v","NumberBox",void 0);var C=s.ccclass,R=s.property;e("NumberBox",(d=C("NumberBox"),F=R({type:c}),x=R({type:u}),y=R({type:u}),E=R({type:u}),d((N=t((L=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,n(t,"box",N,a(t)),n(t,"normalFrame",_,a(t)),n(t,"selectedFrame",v,a(t)),n(t,"treasureFrame",M,a(t)),t._currentState=g.NORMAL,t}r(t,e);var i=t.prototype;return i.init=function(e){this.box=e,this._currentState=g.NORMAL,this.treasureFrame=S.mainGameManager.firstBox.treasureSFrame,this.normalFrame=S.mainGameManager.firstBox.box.getComponent(m).spriteFrame},i.clone=function(){return l(this.box)},i.getPosition=function(){return this.box.getPosition()},i.setPosition=function(e){this.box.setPosition(e)},i.transform=function(e,t){this.box.children[0].getComponent(h).color=e,this.box.getComponent(m).spriteFrame=t},i.onClick=function(){var e=parseInt(this.box.children[0].getComponent(h).string),t=S.mainGameManager.boxes[e];switch(console.log(t.state),t.state){case g.NORMAL:t.state=g.SELECTED,this._currentState=g.SELECTED,this.transform(p.color(182,0,0,255),this.selectedFrame),S.mainGameManager._selectedNumbers.push(e);break;case g.SELECTED:t.state=g.NORMAL,this._currentState=g.NORMAL,this.transform(p.color(255,255,255,255),this.normalFrame),S.mainGameManager.removeSelectedNumber(e);break;case g.TREASURE:t.state=g.SELECTED,this._currentState=g.SELECTED,this.transform(p.color(182,0,0,255),this.selectedFrame),S.mainGameManager._selectedNumbers.push(e)}},i.checkAndRemoveSurroundArrows=function(e){var t=S.mainGameManager._selectedNumbers;e==t[t.length-1]&&S.mainGameManager.removeSurroundingArrows()},i.showSurroundArrows=function(e){S.mainGameManager.showSurroundArrows(e)},i.makeNormal=function(){this._currentState=g.NORMAL,this.box.getComponent(f).opacity=255,this.transform(p.color(255,255,255,255),this.normalFrame)},i.makeTreasure=function(e){void 0===e&&(e=!1),this._currentState=e?g.BOUGHT:g.TREASURE,this.transform(p.color(192,31,19,255),this.treasureFrame)},i.makeUnavailable=function(e){void 0===e&&(e=!1),e||(this._currentState=g.UNAVAILABLE,this.transform(p.color(255,255,255,255),this.normalFrame)),this.box.getComponent(f).opacity=e?190:100},o(t,[{key:"state",get:function(){return this._currentState},set:function(e){this._currentState=e}},{key:"treasureSFrame",get:function(){return this.treasureFrame}}]),t}(b)).prototype,"box",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),_=t(L.prototype,"normalFrame",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),v=t(L.prototype,"selectedFrame",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),M=t(L.prototype,"treasureFrame",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),A=L))||A));i._RF.pop()}}}));

System.register("chunks:///_virtual/NumberPricePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./UIBase.ts","./StaticInstance.ts"],(function(e){"use strict";var n,t,i,r,o,a,c,u,l,s,p,f,h,b,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){c=e.cclegacy,u=e._decorator,l=e.Node,s=e.Label,p=e.director},function(e){f=e.UIType,h=e.IGameMode},function(e){b=e.UIBase},function(e){d=e.StaticInstance}],execute:function(){var m,g,y,k,v,S,w,P,B,I,U,L,M;c._RF.push({},"63cdcXO/iJJFqHVNxWszeJ0","NumberPricePanel",void 0);var N=u.ccclass,x=u.property;e("NumberPricePanel",(m=N("NumberPricePanel"),g=x({type:l}),y=x({type:l}),k=x({type:l}),v=x({type:l}),S=x({type:s}),m((B=n((P=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,i(n,"oneUnitButton",B,r(n)),i(n,"twoUnitButton",I,r(n)),i(n,"tenUnitButton",U,r(n)),i(n,"backButton",L,r(n)),i(n,"notiLabel",M,r(n)),n._uiManager=void 0,n}t(n,e);var c=n.prototype;return c.onLoad=function(){e.prototype.onLoad.call(this),this.notiLabel.string=""},c.show=function(){e.prototype.show.call(this)},c.hide=function(){e.prototype.hide.call(this)},c.init=function(e){this._uiManager=e},c.onPriceSelect=function(){var e=o(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.numberPrice=n,t=(d.gameMode==h.FAST?"FAST_":"NORMAL_")+n.toString(),console.log(t);try{d.currentUser.balance>=n?(d.startUIManager.showLoadingOverlay(),d.nakamaClient.getRoomStorageObject(t).then(o(a().mark((function e(n){var t,i,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||null==n||!n.value){e.next=11;break}if(t=n.creatorId,i=JSON.parse(JSON.stringify(n.value)),r=(null==i?void 0:i.period)+1,d.nakamaClient.checkLiveRound(i.createdAt,i.duration)){e.next=8;break}d.nakamaClient.createMatch(r).then((function(){d.isJoiner=!1,d.nakamaClient.initSocketListener(),p.loadScene("main")})),e.next=11;break;case 8:return console.log("--- JOINING ---"),e.next=11,d.nakamaClient.readStorageObject("round",i.matchId,t).then(o(a().mark((function e(n){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&n.length>0)){e.next=10;break}return r=JSON.parse(JSON.stringify(null==(t=n[0])?void 0:t.value)),d.roundData=r,d.isJoiner=!0,console.log(r),e.next=7,d.nakamaClient.initSocketListener();case 7:return e.next=9,d.nakamaClient.joinMatch(i.matchId);case 9:p.loadScene("main");case 10:case"end":return e.stop()}}),e)}))));case 11:case"end":return e.stop()}}),e)}))))):this.notiLabel.string="Insufficient balance!"}catch(e){console.log("-- ERROR in joining match: "+e+" --")}case 4:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),c.onOneUnitButtonClick=function(){this.onPriceSelect(1)},c.onTwoUnitButtonClick=function(){this.onPriceSelect(2)},c.onTenUnitButtonClick=function(){this.onPriceSelect(10)},c.onBackButtonClick=function(){console.log("back pressed!"),this._uiManager.showUI([f.StartMenu])},c.checkMatchInfo=function(e){var n=d.gameMode==h.FAST?1:10;return(null==e?void 0:e.duration)==n&&(null==e?void 0:e.numberPrice)==d.numberPrice},n}(b)).prototype,"oneUnitButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),I=n(P.prototype,"twoUnitButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),U=n(P.prototype,"tenUnitButton",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),L=n(P.prototype,"backButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),M=n(P.prototype,"notiLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),w=P))||w));c._RF.pop()}}}));

System.register("chunks:///_virtual/OptionPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./StaticInstance.ts","./UIBase.ts","./DataStorage.ts"],(function(t){"use strict";var i,n,o,e,a,u,r,c,s,p,l,f,d,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){a=t.cclegacy,u=t._decorator,r=t.Node,c=t.SpriteFrame,s=t.Sprite},function(t){p=t.UIType,l=t.ICMContext},function(t){f=t.StaticInstance},function(t){d=t.UIBase},function(t){h=t.DataStorage}],execute:function(){var g,m,y,B,b,S,M,I,v,F,w;a._RF.push({},"a1349oJzB9Hrr6WvJ7vNabF","OptionPanel",void 0);var A=u.ccclass,C=u.property;t("OptionPanel",(g=A("OptionPanel"),m=C({type:r}),y=C({type:r}),B=C({type:r}),b=C({type:c}),g((I=i((M=function(t){function i(){for(var i,n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return i=t.call.apply(t,[this].concat(a))||this,o(i,"audioButton",I,e(i)),o(i,"logoutButton",v,e(i)),o(i,"backButton",F,e(i)),o(i,"secondAudioSprite",w,e(i)),i._uiManager=void 0,i}n(i,t);var a=i.prototype;return a.onLoad=function(){t.prototype.onLoad.call(this),f.muteMusic&&this.changeAudioIconSpriteFrame()},a.show=function(){t.prototype.show.call(this)},a.hide=function(){t.prototype.hide.call(this)},a.init=function(t){this._uiManager=t},a.onBackButtonClick=function(){this._uiManager.showUI([p.StartMenu])},a.onLogOutButtonClick=function(){this._uiManager.showConfirmationModal(l.LOGOUT)},a.onAudioButtonClick=function(){h.setIsMusicMute(!f.muteMusic),f.muteMusic=!f.muteMusic,this.changeAudioIconSpriteFrame()},a.changeAudioIconSpriteFrame=function(){if(this.audioButton){var t=this.audioButton.getComponent(s).spriteFrame;this.audioButton.getComponent(s).spriteFrame=this.secondAudioSprite,this.secondAudioSprite=t}},a.onSomeFunctionClick=function(){},i}(d)).prototype,"audioButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),v=i(M.prototype,"logoutButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),F=i(M.prototype,"backButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),w=i(M.prototype,"secondAudioSprite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),S=M))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/PeriodPicker.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,o,n,c,s,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,c=e._decorator,s=e.Node,a=e.Component}],execute:function(){var p,u,d,l,f;n._RF.push({},"d7f8e0cA4ZDw5NOYCPHwCyh","PeriodPicker",void 0);var y=c.ccclass,P=c.property;e("PeriodPicker",(p=y("PeriodPicker"),u=P({type:s}),p((f=t((l=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return t=e.call.apply(e,[this].concat(n))||this,i(t,"dropdownList",f,o(t)),t}r(t,e);var n=t.prototype;return n.start=function(){},n.update=function(e){},n.onDropdownClick=function(){this.dropdownList.active=!this.dropdownList.active},t}(a)).prototype,"dropdownList",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),d=l))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(t){"use strict";var n,o,i,e;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator},function(t){e=t.UIBase}],execute:function(){var a;o._RF.push({},"be95ap4JDJDibIR+4kYp++N","PlayButton",void 0);var r=i.ccclass;i.property,t("PlayButton",r("PlayButton")(a=function(t){function o(){for(var n,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this)._uiManager=void 0,n}n(o,t);var i=o.prototype;return i.onLoad=function(){t.prototype.onLoad.call(this)},i.show=function(){t.prototype.show.call(this)},i.hide=function(){t.prototype.hide.call(this)},i.init=function(t){this._uiManager=t},i.onClick=function(){this._uiManager.navigateMainScreen()},o}(e))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/ProfileTab.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StaticInstance.ts","./UIBase.ts","./Utils.ts"],(function(t){"use strict";var e,o,n,i,a,r,l,s,u,c,p,h,m,g,f,d,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.createClass},function(t){r=t.cclegacy,l=t._decorator,s=t.Node,u=t.UITransform,c=t.instantiate,p=t.Label,h=t.Sprite,m=t.math,g=t.EditBox},function(t){f=t.StaticInstance},function(t){d=t.UIBase},function(t){C=t.Utils}],execute:function(){var B,y,b,k,T,N,v,j,L,D,w,F,S,U,E,P,I;r._RF.push({},"5fbf1kaIiFBraw8dJ8akcOU","ProfileTab",void 0);var z=l.ccclass,_=l.property;t("ProfileTab",(B=z("ProfileTab"),y=_({type:s}),b=_({type:s}),k=_({type:s}),T=_({type:s}),N=_({type:s}),v=_({type:s}),j=_({type:s}),B((w=e((D=function(t){function e(){for(var e,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"closeButton",w,i(e)),n(e,"scrollContent",F,i(e)),n(e,"editNameButton",S,i(e)),n(e,"editPasswordButton",U,i(e)),n(e,"editCountryButton",E,i(e)),n(e,"jackpotButton",P,i(e)),n(e,"treasureButton",I,i(e)),e.currentType="jackpot",e.jackpotData=[],e.treasureData=[],e._isFromStartMenu=void 0,e}o(e,t);var r=e.prototype;return r.onLoad=function(){this.updateEmailField(),this.updateUsernameField(),this.init()},r.init=function(t){var e=this;f.nakamaClient.getGameHistory().then((function(t){return C.sortHistoryDataWithTimeOrder(t.objects)})).then((function(t){null==t||t.forEach((function(t){null!=t&&t.value.boughtJackpot&&e.jackpotData.push({startTime:t.value.startTime,boughtJackpot:t.value.boughtJackpot,jackpotNumber:t.value.jackpotNumber}),(null==t?void 0:t.value.boughtTreasures.length)>0&&e.treasureData.push({startTime:t.value.startTime,boughtTreasures:t.value.boughtTreasures})})),e.showDataList()}))},r.showDataList=function(){var t=this,e=0,o=this.scrollContent.children[0],n="jackpot"==this.currentType?this.jackpotData:this.treasureData;this.scrollContent.getComponent(u).height=160*n.length,n.forEach((function(n,i){var a=c(o);if("jackpot"==t.currentType){var r=n.jackpotNumber;a.getChildByName("BottomlessButton").getChildByName("Label").getComponent(p).string=(r<10?"0":"")+r.toString(),a.getChildByName("TimeLabel").getComponent(p).string="10:25:30 - "+C.getDateAsString(new Date(n.startTime)),a.setPosition(o.position.x,o.position.y-160*i),t.scrollContent.addChild(a)}else n.boughtTreasures.forEach((function(i,r){a.getChildByName("BottomlessButton").getChildByName("Label").getComponent(p).string=(i<10?"0":"")+i.toString(),a.getChildByName("TimeLabel").getComponent(p).string="10:25:30 - "+C.getDateAsString(new Date(n.startTime)),a.setPosition(o.position.x,o.position.y-160*e),t.scrollContent.addChild(a),e++}))})),"treasure"==this.currentType&&(this.scrollContent.getComponent(u).height=160*(e+1)),o.active=!1},r.onCloseButtonClick=function(){this._isFromStartMenu&&(f.startUIManager.balanceTabCloseCallback(),this._isFromStartMenu=void 0),t.prototype.hide.call(this)},r.onJackpotButtonClick=function(){this.currentType="jackpot",this.jackpotButton.getComponent(h).color=m.color("#ffffff"),this.jackpotButton.getChildByName("Label").getComponent(p).string="JACKPOT",this.jackpotButton.getChildByName("Label").getComponent(p).color=m.color("#ffffff"),this.treasureButton.getComponent(h).color=m.color("#F88326"),this.treasureButton.getChildByName("Label").getComponent(p).string="Treasure",this.treasureButton.getChildByName("Label").getComponent(p).color=m.color("#F88326"),this.cleanUpScrollContent(),this.showDataList()},r.onTreasureButtonClick=function(){this.currentType="treasure",this.treasureButton.getComponent(h).color=m.color("#ffffff"),this.jackpotButton.getChildByName("Label").getComponent(p).string="Jackpot",this.treasureButton.getChildByName("Label").getComponent(p).color=m.color("#ffffff"),this.jackpotButton.getComponent(h).color=m.color("#F88326"),this.treasureButton.getChildByName("Label").getComponent(p).string="TREASURE",this.jackpotButton.getChildByName("Label").getComponent(p).color=m.color("#F88326"),this.cleanUpScrollContent(),this.showDataList()},r.cleanUpScrollContent=function(){this.scrollContent.children.forEach((function(t,e){e>0?t.destroy():t.active=!0}))},r.updateEmailField=function(){var t=this.node.getChildByName("Content").getChildByName("Information").getChildByName("EmailField").getChildByName("EditBox").getComponent(g);t.enabled=!1,t.string=f.currentUser.email},r.updateUsernameField=function(){var t=this.node.getChildByName("Content").getChildByName("Information").getChildByName("NameGroup").getChildByName("EditBox").getComponent(g);t.enabled=!1,t.string=f.currentUser.email},a(e,[{key:"isFromStartMenu",set:function(t){this._isFromStartMenu=t}}]),e}(d)).prototype,"closeButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),F=e(D.prototype,"scrollContent",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),S=e(D.prototype,"editNameButton",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),U=e(D.prototype,"editPasswordButton",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),E=e(D.prototype,"editCountryButton",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),P=e(D.prototype,"jackpotButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),I=e(D.prototype,"treasureButton",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),L=D))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/ResultPopUp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StaticInstance.ts","./UIBase.ts","./Utils.ts"],(function(t){"use strict";var e,i,n,o,r,a,s,l,u,c,p,b,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Label,l=t.Node,u=t.instantiate,c=t.UITransform},function(t){p=t.StaticInstance},function(t){b=t.UIBase},function(t){h=t.Utils}],execute:function(){var g,f,m,d,y,v,N,L,P,C,U,_,w;r._RF.push({},"8d274q+TRhIZohOZjN5xF7j","ResultPopUp",void 0);var I=a.ccclass,z=a.property;t("ResultPopUp",(g=I("ResultPopUp"),f=z({type:s}),m=z({type:s}),d=z({type:l}),y=z({type:l}),v=z({type:s}),g((P=e((L=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"periodLabel",P,o(e)),n(e,"timeLabel",C,o(e)),n(e,"scrollContent",U,o(e)),n(e,"closeButton",_,o(e)),n(e,"noNumberLabel",w,o(e)),e._boughtNumbers=void 0,e}i(e,t);var r=e.prototype;return r.init=function(){this._boughtNumbers=p.mainGameManager._boughtNumbers;var t=p.roundData.period,e=new Date(p.roundData.startTime);this.periodLabel.string=(t<10?"0":"")+t.toString(),this.timeLabel.string="10:00 - "+h.getDateAsString(e),this.displayNumbers()},r.onCloseButtonClick=function(){t.prototype.hide.call(this),p.mainUIManager.showMatchEndPanel()},r.displayNumbers=function(){if(this._boughtNumbers.length>0){var t=[],e=0,i=0,n=this.scrollContent.children[0];t.push(n);for(var o=0;o<this._boughtNumbers.length;o++){i++;var r=t[t.length-1],a=r.getPosition(),l=u(r);l.active=!0,l.children[1].getComponent(s).string=this._boughtNumbers[o].toString(),o>0&&(6==i?(e++,i=1,l.setPosition(n.getPosition().x,a.y-144)):l.setPosition(a.x+164,a.y)),t.push(l),this.scrollContent.addChild(l)}this.scrollContent.getComponent(c).height=190*e}else this.noNumberLabel.node.active=!0},e}(b)).prototype,"periodLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),C=e(L.prototype,"timeLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),U=e(L.prototype,"scrollContent",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),_=e(L.prototype,"closeButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),w=e(L.prototype,"noNumberLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),N=L))||N));r._RF.pop()}}}));

System.register("chunks:///_virtual/StartMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./StaticInstance.ts","./UIBase.ts"],(function(t){"use strict";var n,o,i,e,a,r,u,l,c,s,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,u=t.Node,l=t.Label},function(t){c=t.ICMContext},function(t){s=t.StaticInstance},function(t){p=t.UIBase}],execute:function(){var f,h,B,g,y,b,d,C,M,m,k,w,_,S,v;a._RF.push({},"3f346b2kCtMFaLz1WnPrIlN","StartMenu",void 0);var z=r.ccclass,T=r.property;t("StartMenu",(f=z("StartMenu"),h=T({type:u}),B=T({type:u}),g=T({type:u}),y=T({type:u}),b=T({type:u}),d=T({type:u}),f((m=n((M=function(t){function n(){for(var n,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return n=t.call.apply(t,[this].concat(a))||this,i(n,"fastButton",m,e(n)),i(n,"normalButton",k,e(n)),i(n,"historyButton",w,e(n)),i(n,"walletButton",_,e(n)),i(n,"quitButton",S,e(n)),i(n,"optionButton",v,e(n)),n._uiManager=void 0,n.hasUpdateBalanceText=!1,n}o(n,t);var a=n.prototype;return a.onLoad=function(){t.prototype.onLoad.call(this)},a.update=function(){var t,n,o;this.hasUpdateBalanceText||null!=(t=s.currentUser)&&t.balance&&(this.hasUpdateBalanceText=!0,this.node.getChildByName("TopStack").getChildByName("BalanceBar").getChildByName("Label").getComponent(l).string=(null==(n=s.currentUser)||null==(o=n.balance)?void 0:o.toString())||"0")},a.show=function(){t.prototype.show.call(this)},a.hide=function(){t.prototype.hide.call(this)},a.init=function(t){this._uiManager=t},a.onFastButtonClick=function(){this._uiManager.onFastButtonClick()},a.onNormalButtonClick=function(){this._uiManager.onNormalButtonClick()},a.onQuitButtonClick=function(){this._uiManager.showConfirmationModal(c.START)},a.onWalletButtonClick=function(){this._uiManager.showBalanceTab()},a.onHistoryButtonClick=function(){this._uiManager.showHistoryTab()},a.onOptionButtonClick=function(){this._uiManager.onOptionButtonClick()},a.onProfileButtonClick=function(){this._uiManager.onProfileButtonClick()},a.onRankingButtonClick=function(){this._uiManager.showComingSoonModal()},a.onFriendButtonClick=function(){this._uiManager.showComingSoonModal()},a.onEventButtonClick=function(){this._uiManager.showComingSoonModal()},n}(p)).prototype,"fastButton",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),k=n(M.prototype,"normalButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),w=n(M.prototype,"historyButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),_=n(M.prototype,"walletButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),S=n(M.prototype,"quitButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),v=n(M.prototype,"optionButton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),C=M))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/StaticInstance.ts",["cc","./NakamaClient.ts","./DataStorage.ts"],(function(a){"use strict";var n,t,e,i;return{setters:[function(a){n=a.cclegacy,t=a._decorator},function(a){e=a.NakamaClient},function(a){i=a.DataStorage}],execute:function(){var r,o;n._RF.push({},"e6c15HM9bBFn4r82OMYHEEV","StaticInstance",void 0);var s=t.ccclass;t.property,a("StaticInstance",s("StaticInstance")(((o=function(){function a(){}return a.setAuthUIManager=function(n){a.authUIManager=n},a.setStartUIManager=function(n){a.startUIManager=n},a.setMainUIManager=function(n){a.mainUIManager=n},a.setMainGameManager=function(n){a.mainGameManager=n},a.setLoadingUIManager=function(n){a.loadingUIManager=n},a.initNakamaClient=function(){this.nakamaClient=new e,a.isAuth=!!i.getAccessToken()},a.initCurrentUser=function(){var a=this;this.nakamaClient||this.initNakamaClient();var n=this.nakamaClient.session.user_id;this.nakamaClient.readStorageObject("user",n,n).then((function(n){if(n&&n.length>0){var t,e=JSON.parse(JSON.stringify(null==(t=n[0])?void 0:t.value));a.currentUser=e}else console.log("-- GET USER STORAGE ERROR: no data --")}))},a}()).authUIManager=void 0,o.startUIManager=void 0,o.mainUIManager=void 0,o.mainGameManager=void 0,o.loadingUIManager=void 0,o.nakamaClient=void 0,o.currentUser=void 0,o.isAuth=void 0,o.balance=0,o.muteMusic=!1,o.gameMode=void 0,o.numberPrice=void 0,o.roundData=void 0,o.isJoiner=!1,o.donePreloading=!1,r=o))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/SurroundArrows.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StaticInstance.ts"],(function(t){"use strict";var e,r,n,o,s,a,c,u;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator,o=t.Tween,s=t.tween,a=t.Vec3,c=t.Component},function(t){u=t.StaticInstance}],execute:function(){var i;r._RF.push({},"7a0afAbDO9DV7fu+2ci8f1I","SurroundArrows",void 0);var l=n.ccclass;n.property,t("SurroundArrows",l("SurroundArrows")(i=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r.prototype.onLoad=function(){var t=u.mainGameManager._treasureNumbers.length;o.stopAllByTarget(this.node),s(this.node).repeatForever(s(this.node).to(.5,{scale:new a(1.05,1.05)}).delay(.3).to(.5,{scale:new a(.95,.95)})).start(),s(this.node.getChildByName("HintText")).delay(t>0?2:0).to(0,{active:!1}).start()},r}(c))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/TopPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./Enum.ts","./UIBase.ts","./StaticInstance.ts"],(function(e){"use strict";var t,n,a,i,o,r,l,s,c,u,h,d,g,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){l=e.cclegacy,s=e._decorator,c=e.Label,u=e.director},function(e){h=e.Utils},function(e){d=e.IGameMode},function(e){g=e.UIBase},function(e){m=e.StaticInstance}],execute:function(){var f,v,p,b,w,R,_,I,M,L,y,S,C,T,B;l._RF.push({},"4e17cSuwK5HCITCOcANirg5","TopPanel",void 0);var k=s.ccclass,x=s.property;e("TopPanel",(f=k("TopPanel"),v=x({type:c}),p=x({type:c}),b=x({type:c}),w=x({type:c}),R=x({type:c}),_=x({type:c}),f((L=t((M=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,a(t,"countdownLabel",L,i(t)),a(t,"totalTicketLabel",y,i(t)),a(t,"balanceLabel",S,i(t)),a(t,"periodLabel",C,i(t)),a(t,"dateLabel",T,i(t)),a(t,"nextGameCountdownLabel",B,i(t)),t._time=new Date,t._countdown=new Date,t._uiManager=void 0,t._gameIntervalRef=void 0,t._waitingIntervalRef=void 0,t}n(t,e);var l=t.prototype;return l.onLoad=function(){e.prototype.onLoad.call(this)},l.show=function(){e.prototype.show.call(this)},l.hide=function(){e.prototype.hide.call(this)},l.init=function(e){var t=this;this._uiManager=e,this.updateBalanceLabel(m.mainGameManager.balance);var n=new Date,a=m.roundData.startTime,i=new Date(a+60*m.roundData.duration*1e3),o=Math.round(Math.abs((i.getTime()-n.getTime())/1e3)),r=Math.floor(o/60),l=o%60;console.log("Now: "+n.toLocaleString()),console.log("Expire: "+i.toLocaleString()),console.log("Min: "+r),console.log("Sec: "+l),this._time.setMinutes(r),this._time.setSeconds(l),this.countdownLabel.string="--:--",this.dateLabel.string=h.getDateAsString(this._time),this.periodLabel.string=(m.roundData.period<10?"0":"")+m.roundData.period.toString(),
//!StaticInstance.isJoiner
this._gameIntervalRef=setInterval((function(){return t.countdown()}),1e3)},l.onNumberBoughtTabClick=function(){this._uiManager.onNumberBoughtTabClick()},l.obBalanceTabClick=function(){this._uiManager.onBalanceTabClick()},l.updateTotalTicketBought=function(e){this.totalTicketLabel.string=(e<10?"0":"")+e.toString()},l.updateBalanceLabel=function(e){this.balanceLabel.string=e.toString()},l.countdown=function(){var e=this._time.getTime();e-=1e3,this._time=new Date(e);var t=m.roundData.jackpotNumber,n="0"+this._time.getMinutes(),a=(this._time.getSeconds()<10?"0":"")+this._time.getSeconds();this._time.getMinutes()+this._time.getSeconds()==0?(clearInterval(this._gameIntervalRef),this.countdownLabel.string=n+":"+a,this.showRevealResultBox(t),m.mainUIManager.toggleBuyButton(!1),m.mainUIManager.showRoundResult(t),m.mainGameManager.showRestTreasureNumbers(),m.mainGameManager.saveUserCurrentRoundData(),this.handleGameEnd()):this.countdownLabel.string=n+":"+a},l.showRevealResultBox=function(e){var t=this.node.getChildByName("RevealResultBox");t.active=!0,t.children[0].getComponent(c).string=(e<10?"0":"")+e.toString()},l.hideRevealResultBox=function(){this.node.getChildByName("RevealResultBox").active=!1},l.restartRound=function(){m.mainGameManager.balance>0&&(this.hideRevealResultBox(),m.mainGameManager.restartRound(),m.mainUIManager.closeResultPopUp(),m.mainUIManager.toggleBuyButton(!0),m.mainUIManager.updateTopPanelTotalTicketBought(),m.mainGameManager.initDataFromServer(),m.mainUIManager.closeLoadingOverlay(),this.node.getChildByName("CountdownPanel").active=!1,this.node.getChildByName("MatchEndPanel").active=!1,this.init(this._uiManager))},l.countdownNextGame=function(){var e=this._countdown.getTime();e-=1e3,this._countdown=new Date(e);var t=(this._countdown.getSeconds()<10?"0":"")+this._countdown.getSeconds();0==this._countdown.getSeconds()?(clearInterval(this._waitingIntervalRef),this.nextGameCountdownLabel.string="00:"+t,m.mainUIManager.closeResultPopUp(),this.handleJoinNextPeriod()):(1==this._countdown.getSeconds()&&m.nakamaClient.leaveMatch().then((function(){console.log("LEAVE MATCH")})),this.nextGameCountdownLabel.string="00:"+t)},l.handleGameEnd=function(){var e=this;this._countdown.setMinutes(0),this._countdown.setSeconds(15),this.nextGameCountdownLabel.string="00:15",this.node.getChildByName("CountdownPanel").active=!0,this._waitingIntervalRef=setInterval((function(){return e.countdownNextGame()}),1e3)},l.updateTimeLabelWithMinSec=function(e,t){var n=(e<10?"0":"")+e.toString(),a=(t<10?"0":"")+t.toString(),i=m.roundData.jackpotNumber;e+t==0?(this.countdownLabel.string=n+":"+a,this.showRevealResultBox(i),m.mainUIManager.toggleBuyButton(!1),m.mainUIManager.showRoundResult(i),m.mainGameManager.showRestTreasureNumbers(),m.mainGameManager.saveUserCurrentRoundData(),this.handleGameEnd()):this.countdownLabel.string=n+":"+a},l.handleJoinNextPeriod=function(){var e=this;console.log("--- joining next period ---"),this._uiManager.showLoadingOverlay();var t=(m.gameMode==d.FAST?"FAST_":"NORMAL_")+m.numberPrice.toString();this._waitingIntervalRef&&clearInterval(this._waitingIntervalRef);try{m.nakamaClient.getRoomStorageObject(t).then(o(r().mark((function t(n){var a,i,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n||null==n||!n.value){t.next=12;break}if(a=n.creatorId,i=JSON.parse(JSON.stringify(n.value)),l=(null==i?void 0:i.period)+1,m.nakamaClient.checkLiveRound(i.createdAt,i.duration)){t.next=9;break}console.log("--- CREATING ---"),m.nakamaClient.createMatch(l).then((function(){m.isJoiner=!1,m.nakamaClient.initSocketListener(),e.restartRound()})),t.next=12;break;case 9:return console.log("--- JOINING ---"),t.next=12,m.nakamaClient.readStorageObject("round",i.matchId,a).then(o(r().mark((function t(n){var a,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n&&n.length>0)){t.next=10;break}return o=JSON.parse(JSON.stringify(null==(a=n[0])?void 0:a.value)),m.roundData=o,m.isJoiner=!0,console.log(o),t.next=7,m.nakamaClient.initSocketListener();case 7:return t.next=9,m.nakamaClient.joinMatch(i.matchId);case 9:e.restartRound();case 10:case"end":return t.stop()}}),t)}))));case 12:case"end":return t.stop()}}),t)}))))}catch(e){console.log("-- ERROR in joining match: "+e+" --")}},l.showMatchEndPanel=function(){this.node.getChildByName("MatchEndPanel").active=!0},l.stopMatchCountdown=function(){this._gameIntervalRef&&clearInterval(this._gameIntervalRef),this._waitingIntervalRef&&clearInterval(this._waitingIntervalRef)},l.onQuit=function(){this._waitingIntervalRef&&clearInterval(this._waitingIntervalRef),this._gameIntervalRef&&clearInterval(this._gameIntervalRef),u.loadScene("start")},t}(g)).prototype,"countdownLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),y=t(M.prototype,"totalTicketLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),S=t(M.prototype,"balanceLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),C=t(M.prototype,"periodLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),T=t(M.prototype,"dateLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),B=t(M.prototype,"nextGameCountdownLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),I=M))||I));l._RF.pop()}}}));

System.register("chunks:///_virtual/TreasureHunterPopUp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StaticInstance.ts","./UIBase.ts"],(function(e){"use strict";var t,r,n,i,o,a,s,u,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Label,u=e.Node},function(e){c=e.StaticInstance},function(e){l=e.UIBase}],execute:function(){var p,b,f,h,g,y,z,d,v;o._RF.push({},"c3b0fsoczdOsrKkchhUIHSb","TreasureHunterPopUp",void 0);var L=a.ccclass,m=a.property;e("TreasureHunterPopUp",(p=L("TreasureHunterPopUp"),b=m({type:s}),f=m({type:u}),h=m({type:s}),p((z=t((y=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"prizeLabel",z,i(t)),n(t,"closeButton",d,i(t)),n(t,"treasureNumbersLabel",v,i(t)),t}r(t,e);var o=t.prototype;return o.init=function(e){var t="";this.prizeLabel.string="$ "+(e.length*c.roundData.treasurePrize).toString();for(var r=0;r<e.length;r++)console.log(e[r]),t+=(e[r]<10?"0":"")+e[r].toString()+(r<e.length-1?"  ":"");this.treasureNumbersLabel.string=t},o.onCloseButtonClick=function(){e.prototype.hide.call(this)},t}(l)).prototype,"prizeLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),d=t(y.prototype,"closeButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),v=t(y.prototype,"treasureNumbersLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),g=y))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/TreasurePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(e){"use strict";var r,t,i,n,a,o,s,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Label},function(e){c=e.UIBase}],execute:function(){var l,u,p,f,h;a._RF.push({},"089594RYHpCG6lz2brrWFHw","TreasurePanel",void 0);var y=o.ccclass,d=o.property;e("TreasurePanel",(l=y("TreasurePanel"),u=d({type:s}),l((h=r((f=function(e){function r(){for(var r,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,i(r,"treasurePriceLabel",h,n(r)),r._uiManager=void 0,r}t(r,e);var a=r.prototype;return a.onLoad=function(){e.prototype.onLoad.call(this)},a.show=function(){e.prototype.show.call(this)},a.hide=function(){e.prototype.hide.call(this)},a.init=function(e){this._uiManager=e},r}(c)).prototype,"treasurePriceLabel",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),p=f))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/TreasureTab.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./UIBase.ts","./StaticInstance.ts"],(function(e){"use strict";var t,i,n,r,a,o,s,l,c,u,p,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Node,l=e.Label,c=e.instantiate},function(e){u=e.Utils},function(e){p=e.UIBase},function(e){b=e.StaticInstance}],execute:function(){var f,d,g,h,y,m,v,C,L,T,S;a._RF.push({},"d6a0aMKabtGsa3hSS76sC9j","TreasureTab",void 0);var B=o.ccclass,w=o.property;e("TreasureTab",(f=B("TreasureTab"),d=w({type:s}),g=w({type:s}),h=w({type:l}),y=w({type:l}),f((C=t((v=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"closeButton",C,r(t)),n(t,"numbersContainer",L,r(t)),n(t,"periodLabel",T,r(t)),n(t,"timeLabel",S,r(t)),t}i(t,e);var a=t.prototype;return a.init=function(e){var t=this,i=b.roundData,n=b.mainGameManager._boughtTreasures;this.timeLabel.string="10:00 - "+u.getDateAsString(new Date),this.periodLabel.string="Period: "+(i.period<10?"0":"")+i.period.toString(),n.forEach((function(e){var i=c(t.numbersContainer.children[0]);i.active=!0,i.getChildByName("Label").getComponent(l).string=e.toString(),t.numbersContainer.addChild(i)}))},a.onCloseButtonClick=function(){e.prototype.hide.call(this)},t}(p)).prototype,"closeButton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),L=t(v.prototype,"numbersContainer",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),T=t(v.prototype,"periodLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),S=t(v.prototype,"timeLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),m=v))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIBase.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,n,o,r,s,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Component}],execute:function(){var c,u,p,h,l;r._RF.push({},"261b3ze/IRNX5FMhHypv5kP","UIBase",void 0);var f=s.ccclass,d=s.property;t("UIBase",(c=f("UIBase"),u=d({displayName:"PROPERTY"}),c((l=e((h=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"isShowInit",l,o(e)),e}i(e,t);var r=e.prototype;return r.onLoad=function(){this.isShowInit?this.show():this.hide()},r.show=function(){this.node.active=!0},r.hide=function(){this.node.active=!1},r.update=function(t){},e}(a)).prototype,"isShowInit",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=h))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StaticInstance.ts","./Enum.ts","./TopPanel.ts","./BottomPanel.ts","./TreasurePanel.ts","./InsufficientBalanceModal.ts","./BingoPopUp.ts","./HistoryTab.ts","./ProfileTab.ts","./BalanceTab.ts","./TreasureTab.ts","./ResultPopUp.ts","./NotificationTab.ts","./NumberBoughtTab.ts","./TreasureHunterPopUp.ts","./ConfirmationModal.ts"],(function(t){"use strict";var e,n,i,a,o,r,u,l,s,c,p,h,b,f,d,T,g,m,P,y,M,B,C,v,w,U,_,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,u=t.Prefab,l=t.Node,s=t.AudioSource,c=t.instantiate,p=t.Component},function(t){h=t.StaticInstance},function(t){b=t.UIType,f=t.ICMContext},function(t){d=t.TopPanel},function(t){T=t.BottomPanel},function(t){g=t.TreasurePanel},function(t){m=t.InsufficientBalanceModal},function(t){P=t.BingoPopUp},function(t){y=t.HistoryTab},function(t){M=t.ProfileTab},function(t){B=t.BalanceTab},function(t){C=t.TreasureTab},function(t){v=t.ResultPopUp},function(t){w=t.NotificationTab},function(t){U=t.NumberBoughtTab},function(t){_=t.TreasureHunterPopUp},function(t){I=t.ConfirmationModal}],execute:function(){var N,k,z,H,L,R,O,S,E,A,G,D,x,j,F,W,Z,K,q,J,Q,V,X,Y,$,tt,et,nt,it,at,ot,rt,ut,lt,st;o._RF.push({},"d4dfeZ/Ti9A1KE3TZlpfcdb","UIManager",void 0);var ct=r.ccclass,pt=r.property;t("UIManager",(N=ct("UIManager"),k=pt({type:u}),z=pt({type:u}),H=pt({type:u}),L=pt({type:u}),R=pt({type:u}),O=pt({type:u}),S=pt({type:u}),E=pt({type:u}),A=pt({type:u}),G=pt({type:u}),D=pt({type:u}),x=pt({type:u}),j=pt({type:u}),F=pt({type:u}),W=pt({type:u}),Z=pt({type:l}),N((J=e((q=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"topPanel",J,a(e)),i(e,"bottomPanel",Q,a(e)),i(e,"treasurePanel",V,a(e)),i(e,"numberBoughtTab",X,a(e)),i(e,"balanceTab",Y,a(e)),i(e,"notificationTab",$,a(e)),i(e,"treasureTab",tt,a(e)),i(e,"historyTab",et,a(e)),i(e,"profileTab",nt,a(e)),i(e,"resultPopUp",it,a(e)),i(e,"bingoPopUp",at,a(e)),i(e,"treasureHunterPopUp",ot,a(e)),i(e,"confirmationModal",rt,a(e)),i(e,"balanceInsufficientModal",ut,a(e)),i(e,"loadingOverlay",lt,a(e)),i(e,"backButton",st,a(e)),e.uiMap=new Map,e._currentTab=void 0,e}n(e,t);var o=e.prototype;return o.update=function(){var t=h.muteMusic;this.node.parent.getComponent(s).volume=t?0:1},o.onLoad=function(){h.setMainUIManager(this),this.initTopPanel(),this.initBottomPanel(),this.initTreasurePanel(),h.mainUIManager.showUI([b.TopPanel,b.BottomPanel,b.TreasurePanel])},o.showUI=function(t){this.uiMap.forEach((function(e,n){t.indexOf(n)>-1?null==e||e.show():null==e||e.hide()}))},o.initConfirmationModal=function(t){var e=c(this.confirmationModal);this.node.addChild(e);var n=e.getComponent(I);n.init(t),n.show()},o.initInsufficientBalanceModal=function(){var t=c(this.balanceInsufficientModal);this.node.addChild(t),t.getComponent(m).show()},o.initBottomPanel=function(){var t=c(this.bottomPanel);this.node.addChild(t),t.setPosition(0,0);var e=t.getComponent(T);e.init(this),this.uiMap.set(b.BottomPanel,e)},o.initTreasurePanel=function(){var t=c(this.treasurePanel);this.node.addChild(t);var e=t.getComponent(g);e.init(this),this.uiMap.set(b.TreasurePanel,e)},o.initTopPanel=function(){var t=c(this.topPanel);this.node.addChild(t);var e=t.getComponent(d);e.init(this),this.uiMap.set(b.TopPanel,e)},o.onNumberBoughtTabClick=function(){var t=c(this.numberBoughtTab);this.node.addChild(t);var e=t.getComponent(U);e.init(),e.show(),this._currentTab=b.NumberBoughtTab,this.uiMap.set(b.NumberBoughtTab,e)},o.onBalanceTabClick=function(){var t=c(this.balanceTab);this.node.addChild(t);var e=t.getComponent(B);e.init(),e.show(),this._currentTab=b.BalanceTab,this.uiMap.set(b.BalanceTab,e)},o.onNotificationTabClick=function(){var t=c(this.notificationTab);this.node.addChild(t);var e=t.getComponent(w);e.init(this),e.show(),this._currentTab=b.NotificationTab,this.uiMap.set(b.NotificationTab,e)},o.onTreasureTabClick=function(){var t=c(this.treasureTab);this.node.addChild(t);var e=t.getComponent(C);e.init(this),e.show(),this._currentTab=b.TreasureTab,this.uiMap.set(b.TreasureTab,e)},o.onHistoryTabClick=function(){var t=c(this.historyTab);this.node.addChild(t);var e=t.getComponent(y);e.show(),this._currentTab=b.HistoryTab,this.uiMap.set(b.HistoryTab,e)},o.onProfileTabClick=function(){var t=c(this.profileTab);this.node.addChild(t);var e=t.getComponent(M);e.init(this),e.show(),this._currentTab=b.ProfileTab,this.uiMap.set(b.ProfileTab,e)},o.onBackButtonClick=function(){this.showConfirmationModal(f.MAIN)},o.onBuyButtonClick=function(){var t=h.numberPrice,e=h.mainGameManager,n=e._selectedNumbers.length;n>0&&e.balance>=n*t?e.onBuyButtonClick():(console.log("No numbers selected OR not enough balance!"),e.balance<n*t&&this.initInsufficientBalanceModal())},o.updateAfterBuying=function(){var t=h.numberPrice,e=h.mainGameManager,n=e._selectedNumbers.length*t,i=e.balance;e.balance=i-n,this.updateTopPanelBalanceLabel(i-n),this.updateTopPanelTotalTicketBought(),h.currentUser.balance=i-n,h.nakamaClient.updateUserBalanceInStorage()},o.updateTopPanelTotalTicketBought=function(){var t=this.uiMap.get(b.TopPanel),e=h.mainGameManager,n=e._selectedNumbers.length+e._boughtNumbers.length;t.updateTotalTicketBought(n),e.updateBoughtAndSelectedNumbers()},o.updateTopPanelBalanceLabel=function(t){this.uiMap.get(b.TopPanel).updateBalanceLabel(t)},o.toggleBuyButton=function(t){this.uiMap.get(b.BottomPanel).toggleBuyButton(t)},o.showTreasureHunterPopUp=function(t){var e=c(this.treasureHunterPopUp);this.node.addChild(e);var n=e.getComponent(_);n.init(t),n.show(),this._currentTab=b.TreasureHunterPopUp,this.uiMap.set(b.TreasureHunterPopUp,n)},o.showResultPopUp=function(){var t=this,e=c(this.resultPopUp);this.node.addChild(e);var n=e.getComponent(v);n.init(),n.show(),null!=this._currentTab&&this.uiMap.forEach((function(e,n){n==t._currentTab&&(null==e||e.hide())})),this._currentTab=b.ResultPopUp,this.uiMap.set(b.ResultPopUp,n)},o.showBingoPopUp=function(){var t=this,e=c(this.bingoPopUp);this.node.addChild(e);var n=e.getComponent(P);n.init(),n.show(),null!=this._currentTab&&this.uiMap.forEach((function(e,n){n==t._currentTab&&(null==e||e.hide())})),this._currentTab=b.BingoPopUp,this.uiMap.set(b.BingoPopUp,n)},o.showLoadingOverlay=function(){var t=c(this.loadingOverlay);this.node.addChild(t)},o.closeLoadingOverlay=function(){this.node.getChildByName("LoadingOverlay")&&(console.log("-- does have loading-overlay"),this.node.getChildByName("LoadingOverlay").destroy())},o.closeResultPopUp=function(){var t=this;this._currentTab!=b.BingoPopUp&&this._currentTab!=b.ResultPopUp||(this.uiMap.forEach((function(e,n){n==t._currentTab&&(null==e||e.hide())})),this._currentTab=void 0)},o.showRoundResult=function(t){h.mainGameManager._boughtNumbers.indexOf(t)>-1?(this.showBingoPopUp(),h.currentUser.balance+=h.roundData.jackpotPrize,h.mainGameManager.balance+=h.roundData.jackpotPrize,this.updateTopPanelBalanceLabel(h.mainGameManager.balance),h.nakamaClient.updateUserBalanceInStorage()):this.showResultPopUp()},o.showConfirmationModal=function(t){this.initConfirmationModal(t)},o.updateTimeLabelFromWS=function(t,e){this.uiMap.get(b.TopPanel).updateTimeLabelWithMinSec(t,e)},o.showMatchEndPanel=function(){this.uiMap.get(b.TopPanel).showMatchEndPanel()},o.stopMatchCountdown=function(){this.uiMap.get(b.TopPanel).stopMatchCountdown()},e}(p)).prototype,"topPanel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Q=e(q.prototype,"bottomPanel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),V=e(q.prototype,"treasurePanel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),X=e(q.prototype,"numberBoughtTab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Y=e(q.prototype,"balanceTab",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),$=e(q.prototype,"notificationTab",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),tt=e(q.prototype,"treasureTab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),et=e(q.prototype,"historyTab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),nt=e(q.prototype,"profileTab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),it=e(q.prototype,"resultPopUp",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),at=e(q.prototype,"bingoPopUp",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),ot=e(q.prototype,"treasureHunterPopUp",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),rt=e(q.prototype,"confirmationModal",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),ut=e(q.prototype,"balanceInsufficientModal",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),lt=e(q.prototype,"loadingOverlay",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),st=e(q.prototype,"backButton",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),K=q))||K));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./DataStorage.ts","./StaticInstance.ts","./AuthenticationPanel.ts"],(function(t){"use strict";var n,e,i,a,o,r,c,u,s,h,l,d,p,f,g;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,c=t.Prefab,u=t.AudioSource,s=t.instantiate,h=t.director,l=t.Component},function(t){d=t.UIType},function(t){p=t.DataStorage},function(t){f=t.StaticInstance},function(t){g=t.AuthenticationPanel}],execute:function(){var y,v,M,A,m,I,P;o._RF.push({},"ebcbdjVFMZP/Ze1T6JkyBHZ","UIManager",void 0);var S=r.ccclass,b=r.property;t("UIManager",(y=S("UIManager"),v=b({type:c}),M=b({type:c}),y((I=n((m=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return n=t.call.apply(t,[this].concat(o))||this,i(n,"authenticationPanel",I,a(n)),i(n,"loadingOverlay",P,a(n)),n.hasCheckAuth=!1,n.uiMap=new Map,n}e(n,t);var o=n.prototype;return o.update=function(){var t=f.muteMusic;this.node.parent.getComponent(u).volume=t?0:1},o.onLoad=function(){this.checkAuth(),f.initNakamaClient(),f.setAuthUIManager(this),this.initAuthenticationPanel(),f.isAuth||f.authUIManager.showUI([d.AuthenticationPanel]),f.muteMusic=p.getIsMusicMute()},o.initAuthenticationPanel=function(){var t=s(this.authenticationPanel);this.node.addChild(t);var n=t.getComponent(g);n.init(this),this.uiMap.set(d.AuthenticationPanel,n)},o.showLoadingOverlay=function(){var t=s(this.loadingOverlay);this.node.addChild(t)},o.closeLoadingOverlay=function(){this.node.getChildByName("LoadingOverlay")&&this.node.getChildByName("LoadingOverlay").destroy()},o.showUI=function(t){this.uiMap.forEach((function(n,e){t.indexOf(e)>-1?null==n||n.show():null==n||n.hide()}))},o.navigateStartScreen=function(){h.loadScene("start")},o.checkAuth=function(){
//!this.hasCheckAuth
f.isAuth&&(this.hasCheckAuth=!0,this.navigateStartScreen())},n}(l)).prototype,"authenticationPanel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),P=n(m.prototype,"loadingOverlay",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),A=m))||A));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataStorage.ts","./StaticInstance.ts"],(function(e){"use strict";var t,n,o,a,r,s,c,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,a=e.ProgressBar,r=e.director,s=e.Component},function(e){c=e.DataStorage},function(e){i=e.StaticInstance}],execute:function(){var l;n._RF.push({},"f552bZzBQlAG55Qlm7QECBL","UIManager",void 0);var u=o.ccclass;o.property,e("UIManager",u("UIManager")(l=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).validToken=!1,t}t(n,e);var o=n.prototype;return o.update=function(){this.node.getComponent(a).progress<1&&(this.node.getComponent(a).progress+=.0075),i.donePreloading&&r.loadScene(this.validToken?"start":"auth")},o.onLoad=function(){var e=c.getAccessToken();this.node.getComponent(a).progress=.5,e&&(this.validToken=!0,console.log("-- No need to authenitcate --")),r.preloadScene(e?"start":"auth",this.finishScenePreloadCallback)},o.finishScenePreloadCallback=function(){i.donePreloading=!0,console.log("Next scene preloaded")},n}(s))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager4.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StartMenu.ts","./PlayButton.ts","./Enum.ts","./BalanceTab.ts","./NumberPricePanel.ts","./StaticInstance.ts","./OptionPanel.ts","./ConfirmationModal.ts","./DataStorage.ts","./HistoryTab.ts","./nakama-js.esm.mjs","./ProfileTab.ts","./ComingSoonModal.ts"],(function(t){"use strict";var n,e,i,a,o,r,s,l,u,c,h,f,p,d,b,m,g,M,y,P,C,T,v,S,w,I,k;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){s=t.cclegacy,l=t._decorator,u=t.Prefab,c=t.AudioSource,h=t.instantiate,f=t.Component,p=t.director},function(t){d=t.StartMenu},function(t){b=t.PlayButton},function(t){m=t.UIType,g=t.IGameMode},function(t){M=t.BalanceTab},function(t){y=t.NumberPricePanel},function(t){P=t.StaticInstance},function(t){C=t.OptionPanel},function(t){T=t.ConfirmationModal},function(t){v=t.DataStorage},function(t){S=t.HistoryTab},function(t){w=t.Session},function(t){I=t.ProfileTab},function(t){k=t.ComingSoonModal}],execute:function(){var U,B,O,z,x,A,N,F,H,R,D,L,_,j,E,G,Y,J,K,Z,q,Q,V;s._RF.push({},"d79254JYFZDe7TmKd92L5gh","UIManager",void 0);var W=l.ccclass,X=l.property;t("UIManager",(U=W("UIManager"),B=X({type:u}),O=X({type:u}),z=X({type:u}),x=X({type:u}),A=X({type:u}),N=X({type:u}),F=X({type:u}),H=X({type:u}),R=X({type:u}),D=X({type:u}),U((j=n((_=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return n=t.call.apply(t,[this].concat(o))||this,i(n,"playButton",j,a(n)),i(n,"startMenu",E,a(n)),i(n,"numberPricePanel",G,a(n)),i(n,"profileTab",Y,a(n)),i(n,"balanceTab",J,a(n)),i(n,"historyTab",K,a(n)),i(n,"optionPanel",Z,a(n)),i(n,"loadingOverlay",q,a(n)),i(n,"confirmationModal",Q,a(n)),i(n,"comingSoonModal",V,a(n)),n.uiMap=new Map,n}e(n,t);var s=n.prototype;return s.update=function(){var t=P.muteMusic;this.node.parent.getComponent(c).volume=t?0:1},s.onLoad=function(){P.setStartUIManager(this),this.initStartMenu(),this.initOptionPanel(),P.muteMusic=v.getIsMusicMute(),this.loadSession(),this.navigateMainScreen()},s.loadSession=function(){var t=o(r().mark((function t(){var n,e,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=v.getAccessToken(),e=v.getRefreshToken(),!n||!e){t.next=30;break}if(!(i=w.restore(n,e)).isrefreshexpired((new Date).getTime())){t.next=23;break}return t.prev=5,P.initNakamaClient(),t.next=9,P.nakamaClient.nClient.sessionRefresh(i);case 9:i=t.sent,P.nakamaClient.session=i,P.initCurrentUser(),t.next=21;break;case 14:t.prev=14,t.t0=t.catch(5),console.log(t.t0),P.isAuth=!1,v.setAccessToken(""),v.setRefreshToken(""),p.loadScene("auth");case 21:t.next=28;break;case 23:console.log("--- Session expired ---"),P.isAuth=!1,v.setAccessToken(""),v.setRefreshToken(""),p.loadScene("auth");case 28:t.next=32;break;case 30:P.isAuth=!1,p.loadScene("auth");case 32:case"end":return t.stop()}}),t,null,[[5,14]])})));return function(){return t.apply(this,arguments)}}(),s.initPlayButton=function(){var t=h(this.playButton);this.node.addChild(t),t.setPosition(0,-330);var n=t.getComponent(b);n.init(this),this.uiMap.set(m.PlayButton,n)},s.initStartMenu=function(){var t=h(this.startMenu);this.node.addChild(t);var n=t.getComponent(d);n.init(this),this.uiMap.set(m.StartMenu,n)},s.initNumberPricePanel=function(){var t=h(this.numberPricePanel);this.node.addChild(t);var n=t.getComponent(y);n.init(this),this.uiMap.set(m.NumberPricePanel,n)},s.initBalanceTab=function(){var t=h(this.balanceTab);this.node.addChild(t);var n=t.getComponent(M);n.isFromStartMenu=!0,n.init(),this.uiMap.set(m.BalanceTab,n)},s.initHistoryTab=function(){var t=h(this.historyTab);this.node.addChild(t);var n=t.getComponent(S);n.isFromStartMenu=!0,this.uiMap.set(m.HistoryTab,n)},s.initProfileTab=function(){var t=h(this.profileTab);this.node.addChild(t);var n=t.getComponent(I);n.isFromStartMenu=!0,this.uiMap.set(m.ProfileTab,n)},s.initConfirmationModal=function(t){var n=h(this.confirmationModal);this.node.addChild(n);var e=n.getComponent(T);e.init(t),e.show()},s.initComingSoonModal=function(){var t=h(this.comingSoonModal);this.node.addChild(t),t.getComponent(k).show()},s.initOptionPanel=function(){var t=h(this.optionPanel);this.node.addChild(t);var n=t.getComponent(C);n.init(this),this.uiMap.set(m.OptionPanel,n)},s.showLoadingOverlay=function(){var t=h(this.loadingOverlay);this.node.addChild(t)},s.showUI=function(t){this.uiMap.forEach((function(n,e){t.indexOf(e)>-1?null==n||n.show():null==n||n.hide()}))},s.navigateMainScreen=function(){console.log("Clicked PLAY!"),P.startUIManager.showUI([m.StartMenu])},s.onFastButtonClick=function(){P.gameMode=g.FAST,this.initNumberPricePanel(),P.startUIManager.showUI([m.NumberPricePanel])},s.onNormalButtonClick=function(){P.gameMode=g.NORMAL,this.initNumberPricePanel(),P.startUIManager.showUI([m.NumberPricePanel])},s.showBalanceTab=function(){this.initBalanceTab(),P.startUIManager.showUI([m.BalanceTab])},s.showHistoryTab=function(){this.initHistoryTab(),P.startUIManager.showUI([m.HistoryTab])},s.balanceTabCloseCallback=function(){P.startUIManager.showUI([m.StartMenu])},s.onOptionButtonClick=function(){this.showUI([m.OptionPanel])},s.showConfirmationModal=function(t){this.initConfirmationModal(t)},s.onProfileButtonClick=function(){this.initProfileTab(),P.startUIManager.showUI([m.ProfileTab])},s.showComingSoonModal=function(){this.initComingSoonModal()},n}(f)).prototype,"playButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),E=n(_.prototype,"startMenu",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),G=n(_.prototype,"numberPricePanel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Y=n(_.prototype,"profileTab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),J=n(_.prototype,"balanceTab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),K=n(_.prototype,"historyTab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Z=n(_.prototype,"optionPanel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),q=n(_.prototype,"loadingOverlay",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Q=n(_.prototype,"confirmationModal",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),V=n(_.prototype,"comingSoonModal",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),L=_))||L));s._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc"],(function(t){"use strict";var e,r;return{setters:[function(t){e=t.cclegacy,r=t._decorator}],execute:function(){var n;e._RF.push({},"69fb2eM4BlCnbQR155JIp9M","Utils",void 0);var i=r.ccclass;r.property,t("Utils",i("Utils")(n=function(){function t(){}return t.getDateAsString=function(t){var e=t.getDate(),r=t.getMonth()+1,n=t.getFullYear();return(e<10?"0":"")+e.toString()+"/"+(r<10?"0":"")+r.toString()+"/"+n},t.validateEmail=function(t){return String(t).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},t.sortHistoryDataWithTimeOrder=function(t,e){return null==t?void 0:t.sort((function(t,e){return new Date(e.create_time).getTime()-new Date(t.create_time).getTime()}))},t}())||n);e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});